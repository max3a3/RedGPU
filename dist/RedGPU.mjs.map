{"version":3,"file":"RedGPU.mjs","mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ,aAAa,oCAAoC;AACjD,IAAI;AACJ,aAAa,gDAAgD;AAC7D,IAAI;AACJ,aAAa,oCAAoC;AACjD,IAAI;AACJ,aAAa,gDAAgD;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,+CAA+C,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AAQD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oKAAoK,gCAAgC;AACpM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,+GAA+G;AAC/G,GAAG;AACH;AACA;AACA;AACA,2JAA2J;AAC3J,wJAAwJ;AACxJ,mJAAmJ;AACnJ,oJAAoJ;AACpJ,gJAAgJ;AAChJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0DAA0D;AACnH;AACA,uDAAuD,sCAAsC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED,yCAAyC,gBAAgB,SAAS,UAAU,WAAW,WAAW,OAAO,eAAe,MAAM,OAAO,QAAQ,SAAS,UAAU,mBAAmB,gBAAgB,SAAS,sCAAsC,iCAAiC,mCAAmC,8BAA8B,4BAA4B,gBAAgB,0CAA0C,UAAU,gBAAgB,6BAA6B,iCAAiC,qBAAqB,yDAAyD,UAAU,uBAAuB,sCAAsC,iCAAiC,mCAAmC,8BAA8B,SAAS,iBAAiB,YAAY,eAAe,kBAAkB,sBAAsB,iCAAiC,kBAAkB,oCAAoC,kBAAkB,6BAA6B,sBAAsB,MAAM,YAAY,kBAAkB,mBAAmB,4BAA4B,aAAa,+BAA+B,gBAAgB,yBAAyB,aAAa,gBAAgB,MAAM,aAAa,0BAA0B,kBAAkB,6BAA6B,eAAe,OAAO,uCAAuC,kCAAkC,oCAAoC,+BAA+B,uCAAuC,kCAAkC,oCAAoC,+BAA+B,oBAAoB,YAAY,YAAY,iBAAiB,oBAAoB,cAAc,UAAU,oCAAoC,aAAa,eAAe,iBAAiB,iEAAiE,SAAS,gBAAgB,SAAS,QAAQ,WAAW,iBAAiB,YAAY,gBAAgB,mBAAmB,eAAe,WAAW,WAAW,UAAU,gBAAgB,uBAAuB,gCAAgC,WAAW,OAAO,WAAW,UAAU,kBAAkB,wBAAwB,SAAS,eAAe,YAAY,WAAW,YAAY,iCAAiC,UAAU,cAAc,YAAY,WAAW,UAAU,iBAAiB,eAAe,YAAY,eAAe,eAAe,YAAY,4BAA4B,eAAe,cAAc,eAAe,sGAAsG,eAAe,cAAc,iBAAiB,cAAc,aAAa,kBAAkB,iBAAiB,gBAAgB,WAAW,0CAA0C,cAAc,gBAAgB,UAAU,wBAAwB,qBAAqB,gBAAgB,aAAa,sBAAsB,YAAY,aAAa,eAAe,iBAAiB,oBAAoB,aAAa,WAAW,8BAA8B,eAAe,SAAS,YAAY,kCAAkC,qBAAqB,cAAc,cAAc,YAAY,kBAAkB,aAAa,kBAAkB,kBAAkB,aAAa,eAAe,iBAAiB,kBAAkB,sBAAsB,YAAY,gBAAgB,uBAAuB,eAAe,sBAAsB,aAAa,IAAI,WAAW,sCAAsC,0BAA0B,4BAA4B,UAAU,mBAAmB,mCAAmC,SAAS,aAAa,kCAAkC,kBAAkB,mBAAmB,oBAAoB,mBAAmB,gCAAgC,gBAAgB,iBAAiB,mBAAmB,SAAS,uBAAuB,gBAAgB,YAAY,wBAAwB,gBAAgB,eAAe,kBAAkB,cAAc,gBAAgB,wBAAwB,mBAAmB,WAAW,4BAA4B,4BAA4B,eAAe,8BAA8B,sCAAsC,mfAAmf,WAAW,UAAU,8BAA8B,yBAAyB,4BAA4B,cAAc,gBAAgB,aAAa,kBAAkB,mCAAmC,wGAAwG,eAAe,8CAA8C,qBAAqB,oCAAoC,qFAAqF,gBAAgB,8BAA8B,cAAc,sBAAsB,iBAAiB,8BAA8B,eAAe,8BAA8B,gCAAgC,cAAc,eAAe,8BAA8B,gCAAgC,cAAc,6CAA6C,gBAAgB,wBAAwB,mBAAmB,aAAa,8BAA8B,mBAAmB,8BAA8B,mBAAmB,WAAW,eAAe,mBAAmB,iBAAiB,kBAAkB,mBAAmB,eAAe,qBAAqB,mBAAmB,gCAAgC,mBAAmB;;AAE7vL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gFAAgF,uEAAuE;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA,wBAAwB,oCAAoC;AAC5D;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE+D;AAC/D,iEAAe,KAAK,EAAC;AACrB;;;;;;;;;;;;;;;AC39EA,iEAAe,gHAAgH,oEAAoE,wFAAwF,2DAA2D,iHAAiH,qDAAqD,4FAA4F,mKAAmK,uDAAuD,KAAK,qHAAqH,yBAAyB,wBAAwB,QAAQ,aAAa,qEAAqE,oCAAoC,oCAAoC,+BAA+B,uDAAuD,WAAW,2BAA2B,sDAAsD,WAAW,SAAS,0BAA0B,KAAK,kMAAkM,sNAAsN,yEAAyE,oIAAoI,wDAAwD,kCAAkC,aAAa,kHAAkH,oEAAoE,oGAAoG,4FAA4F,aAAa,oIAAoI,sBAAsB,aAAa,SAAS,uIAAuI,oDAAoD,uBAAuB,aAAa,yHAAyH,SAAS,+GAA+G,iFAAiF,KAAK,KAAK;;;;;;;;;;;;;;ACA9oG,iEAAe,4HAA4H,iGAAiG,8CAA8C,uBAAuB,+DAA+D,0BAA0B,KAAK,sDAAsD,iEAAiE,gEAAgE,KAAK,yDAAyD,gEAAgE,uHAAuH,gCAAgC,KAAK,sCAAsC,sMAAsM,mOAAmO,qOAAqO,4KAA4K,qFAAqF,uEAAuE,6DAA6D,2DAA2D,uDAAuD,sGAAsG,gDAAgD,uEAAuE,iFAAiF,uEAAuE,2EAA2E,8IAA8I,iFAAiF,mFAAmF,iFAAiF,4JAA4J,0FAA0F,sFAAsF,kFAAkF,KAAK,KAAK;;;;;;;;;;;;;;ACAtvG,iEAAe,6CAA6C,wDAAwD,gFAAgF,kDAAkD,KAAK,KAAK;;;;;;;;;;;;;;ACAhQ,iEAAe,sCAAsC,sCAAsC,gDAAgD,qFAAqF,oDAAoD,oFAAoF,wFAAwF,8DAA8D,4BAA4B,kFAAkF,gCAAgC,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACA3qB,iEAAe,qDAAqD,oDAAoD,yEAAyE,oCAAoC,KAAK,CAAC;;;;;;;;;;;;;;ACA3O,iEAAe,iGAAiG,6FAA6F,oBAAoB,+FAA+F,8DAA8D,8BAA8B,0JAA0J,qDAAqD,uBAAuB,KAAK,KAAK;;;;;;;;;;;;;;ACA5oB,iEAAe,qDAAqD,oDAAoD,yEAAyE,oCAAoC,KAAK,CAAC;;;;;;;;;;;;;;ACA3O,iEAAe,6FAA6F,6FAA6F,oBAAoB,+FAA+F,8DAA8D,8BAA8B,0JAA0J,qDAAqD,uBAAuB,KAAK,KAAK;;;;;;;;;;;;;;ACAxoB,iEAAe,sPAAsP,0BAA0B,+EAA+E,gDAAgD,wDAAwD,0BAA0B,wLAAwL,iFAAiF,oFAAoF,mHAAmH,mCAAmC,iBAAiB,SAAS,4BAA4B,KAAK,KAAK;;;;;;;;;;;;;;ACAniC,iEAAe,2HAA2H,kIAAkI,gDAAgD,6KAA6K,wDAAwD,4BAA4B,8FAA8F,kGAAkG,4CAA4C,uGAAuG,gCAAgC,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACA/8B,iEAAe,sKAAsK,gHAAgH,+EAA+E,gDAAgD,wDAAwD,0BAA0B,wLAAwL,iFAAiF,oFAAoF,+UAA+U,mIAAmI,mCAAmC,iBAAiB,SAAS,4BAA4B,KAAK,KAAK;;;;;;;;;;;;;;ACAx4C,iEAAe,2HAA2H,kIAAkI,gDAAgD,6KAA6K,wDAAwD,4BAA4B,8FAA8F,kGAAkG,4CAA4C,uGAAuG,gCAAgC,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACA/8B,iEAAe,4DAA4D,gDAAgD,2EAA2E,sDAAsD,oCAAoC,KAAK,CAAC;;;;;;;;;;;;;;ACAtS,iEAAe,+HAA+H,+CAA+C,gDAAgD,oDAAoD,oEAAoE,4BAA4B,wJAAwJ,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACAxjB,iEAAe,4DAA4D,2BAA2B,2EAA2E,gDAAgD,0DAA0D,0BAA0B,mIAAmI,yEAAyE,0EAA0E,4EAA4E,6BAA6B,gBAAgB,OAAO,sBAAsB,KAAK,CAAC;;;;;;;;;;;;;;ACAvuB,iEAAe,+HAA+H,kIAAkI,gDAAgD,wKAAwK,wDAAwD,4BAA4B,wJAAwJ,gCAAgC,qGAAqG,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACAx3B,iEAAe,uBAAuB,uEAAuE,qEAAqE,KAAK;;;;;;;;;;;;;;ACAvL,iEAAe,kCAAkC,8EAA8E,gCAAgC,6KAA6K,iFAAiF,CAAC;;;;;;;;;;;;;;ACA9Z,iEAAe,oMAAoM,6DAA6D,oDAAoD,oDAAoD,0BAA0B,sDAAsD,0CAA0C,yBAAyB,iDAAiD,oJAAoJ,4DAA4D,SAAS,8CAA8C,UAAU,mNAAmN,oFAAoF,2DAA2D,qCAAqC,mCAAmC,uCAAuC,oCAAoC,0BAA0B,uCAAuC,6CAA6C,gEAAgE,8CAA8C,kFAAkF,0BAA0B,oDAAoD,6BAA6B,6BAA6B,8CAA8C,6IAA6I,gCAAgC,+BAA+B,kCAAkC,qDAAqD,wJAAwJ,8EAA8E,aAAa,KAAK,aAAa,SAAS,oCAAoC,KAAK,mRAAmR,yDAAyD,6DAA6D,qDAAqD,aAAa,mRAAmR,aAAa,6FAA6F,wFAAwF,2FAA2F,sCAAsC,yBAAyB,+BAA+B,uFAAuF,+RAA+R,aAAa,iGAAiG,yFAAyF,oDAAoD,iCAAiC,SAAS,KAAK;;;;;;;;;;;;;;ACAznI,iEAAe,wBAAwB,2KAA2K,8GAA8G,kIAAkI,0CAA0C,8CAA8C,0CAA0C,sKAAsK,mCAAmC,+DAA+D,gCAAgC,iFAAiF,kDAAkD,iKAAiK,KAAK,gEAAgE,gDAAgD,+IAA+I,SAAS,8DAA8D,4MAA4M,oJAAoJ,2FAA2F,gPAAgP,KAAK,2BAA2B,yGAAyG,2BAA2B,gEAAgE,2EAA2E,uEAAuE,gHAAgH,KAAK;;;;;;;;;;;;;;ACAjnF,iEAAe,sCAAsC,+CAA+C,2DAA2D,gDAAgD,wDAAwD,gFAAgF,0EAA0E,2BAA2B,sCAAsC,2CAA2C,0RAA0R,UAAU,MAAM,2CAA2C,0RAA0R,SAAS,8CAA8C,8CAA8C,8CAA8C,0BAA0B,KAAK,KAAK;;;;;;;;;;;;;;ACAnzC,iEAAe,6CAA6C,wDAAwD,gFAAgF,wEAAwE,6EAA6E,uDAAuD,KAAK,KAAK;;;;;;;;;;;;;;ACA1Z,iEAAe,sCAAsC,0CAA0C,2DAA2D,gDAAgD,wDAAwD,gFAAgF,0EAA0E,6EAA6E,gCAAgC,+BAA+B,wGAAwG,+CAA+C,sNAAsN,uFAAuF,wCAAwC,qEAAqE,gRAAgR,UAAU,MAAM,0UAA0U,SAAS,0BAA0B,KAAK,KAAK;;;;;;;;;;;;;;ACAhvD,iEAAe,6CAA6C,wDAAwD,gFAAgF,wEAAwE,+DAA+D,KAAK,KAAK;;;;;;;;;;;;;;ACArV,iEAAe,sCAAsC,mEAAmE,2DAA2D,gDAAgD,wDAAwD,gFAAgF,gEAAgE,iEAAiE,qIAAqI,6EAA6E,4BAA4B,KAAK,KAAK;;;;;;;;;;;;;;ACApuB,iEAAe,6CAA6C,qFAAqF,oDAAoD,oFAAoF,8DAA8D,4BAA4B,2DAA2D,gCAAgC,qBAAqB,KAAK,KAAK;;;;;;;;;;;;;;ACA7e,iEAAe,gDAAgD,oDAAoD,uFAAuF,wDAAwD,KAAK,CAAC;;;;;;;;;;;;;;ACAxQ,iEAAe,qKAAqK,6BAA6B,gGAAgG,sFAAsF,kCAAkC,mFAAmF,gEAAgE,sBAAsB,KAAK,KAAK;;;;;;;;;;;;;;ACA5lB,iEAAe,mDAAmD,2CAA2C,KAAK,CAAC;;;;;;;;;;;;;;ACAnH,iEAAe,yGAAyG,yMAAyM,uDAAuD,KAAK,KAAK;;;;;;;;;;;;;;;;;;;ACAvT;AACY;AACjC;AACM;AACnB;AACzC,0BAA0B,4EAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kFAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kFAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kFAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sEAAU,CAAC,oEAAkB;AACzC,mCAAmC,kFAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA,QAAQ,0DAAa;AACrB,QAAQ,2DAAc;AACtB,QAAQ,yDAAY;AACpB,QAAQ,yDAAY;AACpB,QAAQ,yDAAY;AACpB,QAAQ,wDAAW;AACnB,mCAAmC,kFAA2B;AAC9D;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;AC/Da;AACjB;;;;;;;;;;;;;;;;;;;;;ACDc;AAC+D;AAC9C;AACoB;AACd;AACS;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,eAAe,mBAAmB;AAClC,eAAe,YAAY;AAC3B,eAAe,WAAW;AAC1B,eAAe,kBAAkB;AACjC,eAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA,6BAA6B,uEAAqB;AAClD,oCAAoC,8FAA4B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uDAAI;AAClC,YAAY,gFAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uDAAI;AAClC,YAAY,gFAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,uBAAuB,oEAAkB,OAAO,qBAAqB,EAAE,GAAG,GAAG,aAAa,GAAG,IAAI,GAAG;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oEAAkB,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sEAAU,IAAI,MAAM,IAAI,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;ACtS6C;AAC9B;AAC5C;AACA;AACA;AACA,uCAAuC,sDAAa;AACpD,YAAY,gFAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;;;;;;;;ACbF;AACsB;AAC0B;AACN;AACQ;AACd;AACrB;AAC8B;AACN;AACtE,oCAAoC,0DAAiB;AACrD,gCAAgC,sEAAuB;AACvD,mCAAmC,yEAA0B;AAC7D,oBAAoB,0DAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,oCAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wCAAO;AACnD;AACA,gBAAgB,yFAAiB;AACjC,gBAAgB,sFAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wEAAsB;AAClC;AACA;AACA,YAAY,+EAA6B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iEAAe,qBAAqB,EAAC;;;;;;;;;;;;;;;;AC3J2C;AAChF;AACA;AACA,IAAI,6EAA0B;AAC9B,IAAI,6EAA0B;AAC9B;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;ACPyC;AAC1E;AACA,YAAY,cAAc;AAC1B;AACA;AACA;AACA,QAAQ,0EAAuB;AAC/B;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;ACRgD;AACJ;AAC1E;AACA;AACA,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D,IAAI,0EAAuB,aAAa,6EAAuB;AAC/D;AACA,iEAAe,mBAAmB,EAAC;;;;;;;;;;;;;;;;;ACZe;AACwB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0EAAuB;AACvC;AACA;AACA,IAAI,8DAAW;AACf,IAAI,8DAAW;AACf;AACA,IAAI,0EAAuB;AAC3B,IAAI,0EAAuB;AAC3B,IAAI,0EAAuB;AAC3B,IAAI,0EAAuB;AAC3B;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;;;ACrBc;AACU;AACN;AAClD;AACA;AACA;AACA;AACA,IAAI,2DAAc;AAClB,IAAI,6DAAgB;AACpB,IAAI,gEAAmB;AACvB;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;ACX9B;AACA;AACA;AACA,YAAY,+CAA+C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,MAAM;AAChE;AACA;AACA;AACA,8CAA8C,gBAAgB,4BAA4B;AAC1F;AACA;AACA;AACA;AACA;AACA,iCAAiC,IAAI;AACrC,wDAAwD,wBAAwB;AAChF,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA,8CAA8C,sBAAsB,QAAQ,aAAa,gBAAgB,4BAA4B;AACrI;AACA;AACA;AACA,oBAAoB,wBAAwB;AAC5C;AACA;AACA;AACA,8CAA8C,2BAA2B,IAAI,2BAA2B;AACxG;AACA,kDAAkD,8BAA8B,QAAQ,sBAAsB,oBAAoB,wBAAwB;AAC1J,kDAAkD,4CAA4C,mBAAmB,gBAAgB;AACjI;AACA;AACA,mEAAmE,wBAAwB,mCAAmC,WAAW,iCAAiC,oBAAoB;AAC9L;AACA,gDAAgD,MAAM,IAAI,KAAK,IAAI,MAAM;AACzE;AACA;AACA,SAAS;AACT;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA,8CAA8C,gBAAgB,4BAA4B;AAC1F;AACA;AACA;AACA,oBAAoB,wBAAwB;AAC5C;AACA;AACA;AACA,kCAAkC,SAAS,IAAI,SAAS;AACxD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,8BAA8B,QAAQ,sBAAsB,oBAAoB,wBAAwB;AAC1J,kDAAkD,4CAA4C,mBAAmB,gBAAgB;AACjI;AACA;AACA,mEAAmE,wBAAwB,mCAAmC,WAAW,iCAAiC,oBAAoB;AAC9L;AACA,gDAAgD,MAAM,IAAI,KAAK,IAAI,MAAM;AACzE;AACA;AACA,SAAS;AACT;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA,iEAAe,6BAA6B,EAAC;;;;;;;;;;;;;;;AC3F7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA,4CAA4C,GAAG,IAAI,MAAM;AACzD;AACA;AACA,4CAA4C,EAAE;AAC9C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,QAAQ,MAAM,IAAI,KAAK,IAAI,yEAAyE;AAC5K;AACA,6DAA6D,WAAW;AACxE;AACA;AACA;AACA,sCAAsC,UAAU;AAChD;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,wBAAwB,8CAA8C;AACtE,wBAAwB,6BAA6B;AACrD,mBAAmB,uDAAuD,wBAAwB;AAClG;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,2CAA2C,mBAAmB;AAC9D;AACA,6DAA6D,cAAc,IAAI,UAAU;AACzF,KAAK;AACL,6BAA6B,SAAS;AACtC;AACA,iEAAe,sBAAsB,EAAC;;;;;;;;;;;;;;;AChDtC;AACA;AACA,mEAAmE,+BAA+B;AAClG;AACA;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;ACN3B;AACA;AACA,mEAAmE,+BAA+B;AAClG;AACA;AACA;AACA;AACA,iEAAe,0BAA0B,EAAC;;;;;;;;;;;;;;;ACP1C;AACA;AACA;AACA,YAAY,4BAA4B;AACxC;AACA,wDAAwD,+BAA+B;AACvF,gFAAgF,WAAW,EAAE,gCAAgC,sBAAsB,OAAO;AAC1J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;AClBK;AACQ;AACR;;;;;;;;;;;;;;;;;;ACFQ;AAC4C;AAC5D;AACpC,yBAAyB,+FAAuB;AAChD,MAAM,MAAM,kEAAQ,gCAAgC;AACpD,MAAM,MAAM,kEAAQ,kCAAkC;AACtD;AACA,2BAA2B,kDAAS;AACpC;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;ACZyB;AACsB;AACe;AAC5B;AACY;AAC1E,wBAAwB,4EAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8DAAa;AACpD,YAAY,gFAAoB;AAChC;AACA;AACA,kCAAkC,4FAAoB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wEAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;;;;ACtE2B;AAC4C;AAC5D;AACpC,yBAAyB,+FAAuB;AAChD,MAAM,MAAM,kEAAQ,gCAAgC;AACpD,MAAM,MAAM,kEAAQ,kCAAkC;AACtD;AACA,+BAA+B,kDAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;;;;AC5CsB;AACZ;AACQ;AACZ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qDAAY;AACzC;AACA,kCAAkC,yDAAgB;AAClD;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA,kCAAkC,mDAAU;AAC5C;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;AC5CwB;AAC4C;AAC5D;AACpC,yBAAyB,+FAAuB;AAChD,MAAM,MAAM,kEAAQ,gCAAgC;AACpD,MAAM,MAAM,kEAAQ,kCAAkC;AACtD;AACA,yBAAyB,kDAAS;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,UAAU,EAAC;;;;;;;;;;;;;;;;;;;;;;;;ACtBgB;AACN;AACc;AACR;AACJ;AAC0C;;;;;;;;;;;;;;;;;;;ACLhB;AACe;AAChB;AACC;AAChE;AACA;AACA;AACA,gCAAgC,kEAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA,kCAAkC,gEAAuB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,uBAAuB,mFAAmB,CAAC,+DAAuB;AAClE;AACA,kBAAkB,gEAAuB;AACzC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;;;ACpF+B;AACe;AACN;AACT;AAChE,qCAAqC,kEAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gEAAuB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,uBAAuB,mFAAmB,CAAC,oEAA4B;AACvE;AACA,kBAAkB,gEAAuB;AACzC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA,iEAAe,sBAAsB,EAAC;;;;;;;;;;;;;;;AC3EtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;;;ACpBa;AACU;AACE;AACc;;;;;;;;;;;;;;;;;ACHd;AACR;AACxD,uBAAuB,kEAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kEAAa;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qEAAqE,UAAU,WAAW,qBAAqB;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,2EAA2E,UAAU,WAAW,sBAAsB;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,gBAAgB,sCAAsC;AACtD;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;ACvMU;AACd;;;;;;;;;;;;;;;;;;;;;;;;ACD+C;AACM;AACY;AACA;AACnB;AACP;AACZ;AACF;AACJ;AACzC,4BAA4B,kEAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,8BAA8B,sEAAgB,YAAY,oDAAY;AACtE,8BAA8B,sEAAgB,YAAY,sDAAc;AACxE;AACA,uBAAuB,wDAAW;AAClC;AACA;AACA,gCAAgC,6EAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uFAAc;AAC9B,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2BAA2B,6DAAc;AACzC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,kDAAkD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAsC;AACtD;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,kCAAkC,gCAAgC;AAClE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAa;AACzB,YAAY,uDAAU;AACtB;AACA;AACA;AACA;AACA,YAAY,uDAAU;AACtB;AACA;AACA;AACA;AACA,YAAY,2DAAc;AAC1B;AACA;AACA;AACA;AACA,yBAAyB,wDAAW;AACpC,YAAY,uDAAU;AACtB;AACA;AACA;AACA;AACA,YAAY,2DAAc;AAC1B;AACA;AACA;AACA;AACA,YAAY,0DAAa;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;;ACpNuB;AACgB;AACH;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uEAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C,iCAAiC,2DAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;;;;;;;;AC7JO;AACS;AACP;AACJ;;;;;;;;;;;;;;;;;;;ACHmD;AACjC;AACmB;AACM;AACrE,mBAAmB,2CAAI;AACvB;AACA;AACA,+BAA+B,2CAAI,oBAAoB,4EAAM,0BAA0B,6EAAa;AACpG;AACA;AACA,yBAAyB,yEAAG;AAC5B,0BAA0B,6EAAa;AACvC,0BAA0B,6EAAa;AACvC,0BAA0B,6EAAa;AACvC;AACA,oBAAoB,2CAAI;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,2CAAI;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,2CAAI;AACxB;AACA;AACA;AACA;AACA;AACA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;;;;;;;ACjCwB;AAC4C;AACA;AAC1B;AACS;AAC7B;AAC1C,mBAAmB,2CAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD,oCAAoC,wEAAgB,qBAAqB,wEAAgB;AACzF;AACA;AACA,4BAA4B,mEAAQ,sDAAsD,uFAAc;AACxG,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C;AACA,4BAA4B,qDAAY;AACxC;AACA;AACA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;;;;ACnEyC;AAChB;AACJ;AACzC;AACA;AACA;AACA;AACA,2BAA2B,8DAAY;AACvC;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;AC/BG;AACA;AACwB;AACnB;;;;;;;;;;;;;;;;;;;;;;;ACHQ;AAC4C;AACA;AAC3B;AAC4C;AAC3C;AACZ;AACQ;AAC1D,0CAA0C,+FAAuB;AACjE,MAAM,MAAM,kEAAQ,iCAAiC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,2CAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG,uFAAc;AAClH;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAc;AAC9B,kCAAkC,wDAAW;AAC7C,iCAAiC,wDAAW;AAC5C,gBAAgB,qDAAQ,sBAAsB,uDAAU;AACxD;AACA;AACA;AACA,gCAAgC,mEAAQ,iDAAiD,uFAAc;AACvG,oBAAoB,uFAAc,CAAC,uFAAc;AACjD,oBAAoB,uFAAc,CAAC,uFAAc;AACjD;AACA,gCAAgC,6DAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;ACjFiC;AAC4C;AAC5D;AACJ;AACzC,4CAA4C,+FAAuB;AACnE;AACA;AACA;AACA,mCAAmC,8DAAY;AAC/C;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,oBAAoB,EAAC;;;;;;;;;;;;;;;;;;;ACjCyC;AACpC;AACmB;AACgB;AAC5E,qBAAqB,2CAAI;AACzB;AACA,8BAA8B;AAC9B,iCAAiC,yEAAG,0CAA0C,+EAAc,oBAAoB,2EAAiB;AACjI;AACA;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACV6B;AACC;AAC4B;AACU;AACA;AACvB;AACZ;AAC4C;AACN;AAClB;AACE;AAC3B;AACf;AACD;AAClC;AACA;AACA;AACA;AACA;AACA,mBAAmB,kDAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA,2BAA2B,2DAAW;AACtC,sCAAsC,qEAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qDAAK;AACpC,YAAY,iFAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAA0D;AAC1E,qBAAqB,2DAAW;AAChC,YAAY,8DAAgB;AAC5B;AACA;AACA;AACA;AACA,8BAA8B,0EAAwB;AACtD,gBAAgB,gCAAgC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA,+CAA+C,uFAAsB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kFAAiB;AAC/D;AACA,oBAAoB,qDAAqD;AACzE;AACA;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA;AACA,oCAAoC,kEAAQ;AAC5C,0BAA0B,kEAAQ;AAClC;AACA,sCAAsC,2DAAa,CAAC,yDAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gCAAgC;AACxD,sCAAsC,0EAAwB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,kFAA2B;AACtF;AACA;AACA,2DAA2D,kFAA2B;AACtF,4BAA4B,2DAAa;AACzC,4BAA4B,4DAAc;AAC1C,yDAAyD,kFAA2B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kEAAQ;AACpD,kCAAkC,kEAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,8BAA8B;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA,8BAA8B;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA,8BAA8B;AAC9B,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qCAAqC,4FAAoB,yBAAyB,+FAAuB;AACzG,cAAc,MAAM,kEAAQ,sCAAsC;AAClE,cAAc,MAAM,kEAAQ,6CAA6C;AACzE,cAAc,MAAM,kEAAQ,kCAAkC;AAC9D,cAAc,MAAM,kEAAQ,qCAAqC;AACjE,cAAc,MAAM,kEAAQ,kCAAkC;AAC9D;AACA,4DAA4D,4FAAoB,yBAAyB,+FAAuB;AAChI,cAAc,MAAM,kEAAQ,uCAAuC;AACnE,cAAc,MAAM,kEAAQ,gDAAgD;AAC5E;AACA;AACA;AACA,sBAAsB,MAAM,kEAAQ,gDAAgD;AACpF,sBAAsB,MAAM,kEAAQ,kDAAkD;AACtF,sBAAsB,MAAM,kEAAQ,oDAAoD;AACxF;AACA,qBAAqB,2DAAY;AACjC;AACA;AACA,6DAA6D,4FAAoB,yBAAyB,+FAAuB;AACjI,cAAc,MAAM,kEAAQ,0CAA0C;AACtE;AACA;AACA;AACA,sBAAsB,MAAM,kEAAQ,6CAA6C;AACjF,sBAAsB,MAAM,kEAAQ,wCAAwC;AAC5E,sBAAsB,MAAM,kEAAQ,0CAA0C;AAC9E,sBAAsB,MAAM,kEAAQ,4CAA4C;AAChF;AACA,qBAAqB,2DAAY;AACjC;AACA;AACA;AACA;AACA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;;;;;ACpa4C;AACP;AACb;AACF;AAC1C,uBAAuB,kEAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAW;AACnC,wBAAwB,qDAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wDAAW,CAAC,wDAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,cAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;AClJxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iCAAiC;AACjD;AACA;AACA;AACA,8BAA8B,YAAY,IAAI,aAAa,GAAG,sBAAsB,OAAO,sBAAsB;AACjH,kCAAkC,QAAQ,IAAI,QAAQ,GAAG,sBAAsB,OAAO,sBAAsB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;ACtCF;AACgB;AACX;;;;;;;;;;;;;;;;;;;;ACF8B;AACmC;AACN;AAC9B;AACpB;AACxC,2BAA2B,kEAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0DAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sEAAgB,oCAAoC,sBAAsB;AACxG,8BAA8B,sEAAgB,wCAAwC,sBAAsB;AAC5G,0CAA0C,4FAAoB,yBAAyB,+FAAuB;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;AC9Gf;AACuC;AACU;AAC9D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wEAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe;AACf;AACA;AACA,2BAA2B,MAAM,kEAAQ,8BAA8B;AACvE;AACA;AACA,UAAU,MAAM,kEAAQ,kCAAkC;AAC1D,UAAU,MAAM,kEAAQ,sCAAsC;AAC9D,UAAU,MAAM,kEAAQ;AACxB;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;ACzFiE;AACxB;AACV;AACY;AACJ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,oDAAG;AACV;AACA,6BAA6B,oDAAG,KAAK,qDAAY,EAAE,oDAAG,iBAAiB,oDAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD;AACA,yCAAyC,wEAAc;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;;;;ACxFqC;AACxB;AACV;AACY;AACJ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,oDAAG;AACV,OAAO,oDAAG;AACV;AACA,kCAAkC,oDAAG,KAAK,qDAAY,EAAE,oDAAG,iBAAiB,oDAAG,QAAQ,oDAAG;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD;AACA,yCAAyC,wEAAc;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,mBAAmB,EAAC;;;;;;;;;;;;;;;;;;;;ACzFoB;AACU;AACtB;AACE;AACJ;AACzC;AACA,MAAM,MAAM,kEAAQ,gCAAgC;AACpD,MAAM,MAAM,kEAAQ,8BAA8B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B,qDAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD,gCAAgC,8DAA8D;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wEAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;;;;;;ACnFgC;AACe;AAClB;AACG;AACiB;;;;;;;;;;;;;;;;;;;;ACJvB;AACY;AACxB;AACE;AACJ;AACzC;AACA,MAAM,MAAM,kEAAQ,gCAAgC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qDAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAY,EAAE,sDAAc;AACzD;AACA,4BAA4B,wEAAc,kBAAkB,2CAA2C;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;AC9F4B;AAC1D,2BAA2B,6DAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;AChB4B;AACqC;AAChB;AAC7B;AACY;AAC5D,mCAAmC,8DAAqB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8DAAa;AACpD,YAAY,gFAAoB;AAChC;AACA,gBAAgB,YAAY;AAC5B,wCAAwC,4FAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0DAAY;AAC5D;AACA;AACA;AACA;AACA;AACA,iEAAe,oBAAoB,EAAC;;;;;;;;;;;;;;;;;;AC/IQ;AAC4B;AACtB;AAClD,oCAAoC,yDAAgB;AACpD,0BAA0B,oEAA2B;AACrD;AACA,aAAa,wDAAW;AACxB,mBAAmB,wDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,qBAAqB,EAAC;;;;;;;;;;;;;;;ACpGrC;AACA;AACA;AACA;AACA;AACA,iEAAe,2BAA2B,EAAC;;;;;;;;;;;;;;;ACL3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;;;;;;;;;ACpGe;AACgB;AACc;AACtB;AACpB;AACiE;;;;;;;;;;;;;;;;;;;;ACL7C;AAC4C;AACvD;AACI;AAC8B;AAC9E,iDAAiD,+FAAuB;AACxE,MAAM,MAAM,kEAAQ,iCAAiC;AACrD,MAAM,MAAM,kEAAQ,kCAAkC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mBAAmB,0DAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,4CAA4C;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2DAAc,oBAAoB,wDAAW;AACzD;AACA;AACA;AACA;AACA;AACA,mCAAmC,yEAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yEAA2B;AACpE,YAAY,0DAAa;AACzB,YAAY,2DAAc;AAC1B,YAAY,yDAAY;AACxB,YAAY,yDAAY;AACxB,YAAY,yDAAY;AACxB,YAAY,uDAAU;AACtB,uCAAuC,yEAA2B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F,0FAA0F;AAC1F,gGAAgG;AAChG,2GAA2G;AAC3G;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,yEAA2B;AAC5E;AACA,+EAA+E;AAC/E,+EAA+E;AAC/E,qFAAqF;AACrF,gGAAgG;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,yEAA2B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;;;;;;;;;;;;;;;AClLhB;AACA;AACA;AACA;AACA,gBAAgB,oDAAoD;AACpE,gBAAgB,gCAAgC;AAChD,gBAAgB,sDAAsD;AACtE,gBAAgB,6CAA6C;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;ACnDiC;AACD;AACN;AACtD,6BAA6B,kEAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,8BAA8B,sEAAgB,oCAAoC,sBAAsB;AACxG,8BAA8B,sEAAgB,wCAAwC,sBAAsB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA,qDAAqD,kDAAkD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,OAAO;AACvB,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sBAAsB;AAC5C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,kCAAkC,gCAAgC;AAClE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sEAAU;AAClB;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;;;;ACpI+B;AACM;AACY;AACA;AAC1B;AACrD;AACA;AACA;AACA,gCAAgC,kEAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,6EAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uFAAc;AAC9B,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C,gBAAgB,uFAAc,CAAC,uFAAc;AAC7C;AACA,4BAA4B,6DAAc;AAC1C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;;;;;ACtFsB;AAC4C;AACN;AACnD;AACkC;AACpB;AACxD;AACA,2CAA2C,kDAAc;AACzD;AACA;AACA;AACA;AACA,6BAA6B,mEAAY,EAAE,qFAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,iCAAiC,4FAAoB,yBAAyB,+FAAuB;AACrG,cAAc,MAAM,kEAAQ,mCAAmC;AAC/D,cAAc,MAAM,kEAAQ,iCAAiC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,4BAA4B,EAAC;;;;;;;;;;;;;;;;;;AChHF;AACoB;AACN;AACxD,6BAA6B,kDAAc;AAC3C;AACA,6BAA6B,mEAAY,EAAE,uEAAc;AACzD;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;;;;;AC5DyB;AAC4C;AACN;AACnD;AAC6B;AACf;AACxD;AACA,sCAAsC,kDAAc;AACpD;AACA;AACA;AACA;AACA,6BAA6B,mEAAY,EAAE,gFAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,iCAAiC,4FAAoB,yBAAyB,+FAAuB;AACrG,cAAc,MAAM,kEAAQ,4BAA4B;AACxD,cAAc,MAAM,kEAAQ,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;AC9GG;AACsB;AACR;AACxD,+BAA+B,kDAAc;AAC7C;AACA;AACA,6BAA6B,mEAAY,EAAE,yEAAc;AACzD;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;;;;;;AC7DuB;AAC4C;AACN;AACnD;AACwB;AACV;AACxD;AACA;AACA,iCAAiC,kDAAc;AAC/C;AACA;AACA;AACA;AACA,6BAA6B,mEAAY,EAAE,2EAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,iCAAiC,4FAAoB,yBAAyB,+FAAuB;AACrG,cAAc,MAAM,kEAAQ,qCAAqC;AACjE,cAAc,MAAM,kEAAQ,8BAA8B;AAC1D,cAAc,MAAM,kEAAQ,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iEAAe,kBAAkB,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GkB;AACN;AACY;AACJ;AACkB;AACU;AACpB;AAGgD;;;;;;;;;;;;;;;ACTjG;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;ACV2C;AACnE;AACA;AACA;AACA,0BAA0B,kEAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;AChD3B;AACmE;AACnE;AACA;AACA;AACA,2BAA2B,kEAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDmB;AACE;AACY;AACA;AAC3B;AAC4C;AACN;AAKxB;;;;;;;;;;;;;;;ACXhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;AC3BK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iDAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;ACpC8B;AACzB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sEAAU,IAAI,uBAAuB,8CAA8C,aAAa,SAAS,mBAAmB;AACxI;AACA;AACA;AACA;AACA,0BAA0B,iDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sEAAU,IAAI,uBAAuB,kCAAkC,eAAe,SAAS,qBAAqB;AAC5I;AACA,wBAAwB,sEAAU,IAAI,uBAAuB,6BAA6B,UAAU,SAAS,gBAAgB;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,wBAAwB,sEAAU,IAAI,uBAAuB,kCAAkC,eAAe,SAAS,qBAAqB;AAC5I;AACA,wBAAwB,sEAAU,IAAI,uBAAuB,6BAA6B,UAAU,SAAS,gBAAgB;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;ACpH4B;AACP;AAC5D;AACA;AACA;AACA,mCAAmC,kEAAiB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sEAAU;AACtB;AACA;AACA;AACA;AACA,iEAAe,oBAAoB,EAAC;;;;;;;;;;;;;;;;;;ACrD4B;AACR;AACE;AAC1D,uBAAuB,kEAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oEAAY;AAC7C;AACA;AACA;AACA,oCAAoC,mEAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;;;;;ACvFU;AACC;AACM;AACR;;;;;;;;;;;;;;;;;;ACHpB;AAC4D;AACA;AACtC;AACpB,kBAAkB,iDAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,aAAa;AAClC;AACA,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,qBAAqB,YAAY;AACjC,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0HAA0H;AAC1H,0HAA0H;AAC1H,wHAAwH;AACxH,0HAA0H;AAC1H,yHAAyH;AACzH,2HAA2H;AAC3H;AACA;AACA,gCAAgC,8EAAc;AAC9C,oBAAoB,8EAAc,CAAC,8EAAc;AACjD,oBAAoB,8EAAc,CAAC,8EAAc;AACjD,oBAAoB,8EAAc,CAAC,8EAAc;AACjD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;AC/EY;AACkC;AAC0B;AACA;AACtC;AACpB,qBAAqB,iDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA,yBAAyB,qBAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qBAAqB;AAC1C,yBAAyB,oBAAoB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,8EAAc;AAC9C,oBAAoB,8EAAc,CAAC,8EAAc;AACjD,oBAAoB,8EAAc,CAAC,8EAAc;AACjD,oBAAoB,8EAAc,CAAC,8EAAc;AACjD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;AChF2E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mFAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;AClBhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,eAAe,EAAC;;;;;;;;;;;;;;;;;;;;ACRiC;AACrB;AACmC;AAC9B;AACR;AACxC,2CAA2C,kEAAiB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAA4C;AAChE;AACA;AACA,SAAS;AACT;AACA;AACA,oBAAoB,6CAA6C;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qCAAqC,oDAAW;AAChD,yCAAyC,wDAAe;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAa;AAC7C;AACA;AACA,qCAAqC,uDAAiB;AACtD;AACA;AACA,qCAAqC,oDAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAa;AAC7C;AACA;AACA,qCAAqC,uDAAiB;AACtD;AACA;AACA,qCAAqC,oDAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAa;AAC7C,4CAA4C,0DAAQ;AACpD,2CAA2C,oDAAW;AACtD;AACA,qCAAqC,uDAAiB;AACtD,4CAA4C,0DAAQ;AACpD,+CAA+C,wDAAe;AAC9D;AACA,qCAAqC,oDAAc;AACnD,4CAA4C,0DAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAa;AAC7C;AACA;AACA,qCAAqC,uDAAiB;AACtD;AACA;AACA,qCAAqC,oDAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mDAAa;AAC7C;AACA;AACA,qCAAqC,uDAAiB;AACtD;AACA;AACA,qCAAqC,oDAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,4BAA4B,EAAC;;;;;;;;;;;;;;;AC1I5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;;;ACRqC;AACrB;AAC6C;AACxF,gCAAgC,kEAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0DAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iFAAiF;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,qBAAqB,IAAI,6CAA6C;AAC3H,KAAK;AACL;AACA;AACA,QAAQ,wFAA2B;AACnC;AACA;AACA;AACA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;;AChJ+B;AACrB;AAC6C;AACxF,4BAA4B,kEAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0DAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4CAA4C;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,QAAQ,IAAI,SAAS;AACtE;AACA;AACA,QAAQ,wFAA2B;AACnC;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;AClHmC;AAChE,6BAA6B,kEAAiB;AAC9C;AACA;AACA,0CAA0C;AAC1C;AACA,gBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,IAAI,GAAG,YAAY;AACzC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc,EAAC;;;;;;;;;;;;;;;;;;;;;;ACrC6D;AACvC;AACR;AACE;AAC4C;;;;;;;;;;;;;;;;;ACJ7C;AACJ;AACzC;AACA;AACA;AACA;AACA,cAAc,oDAAY;AAC1B;AACA,KAAK;AACL;AACA,cAAc,sDAAc;AAC5B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,2EAA2E,oBAAoB;AAC/F,iDAAiD,qBAAqB;AACtE;AACA;AACA;AACA,KAAK;AACL;AACA,4DAA4D;AAC5D,oBAAoB,qCAAqC;AACzD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,kCAAkC,gCAAgC;AAClE;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,2BAA2B,EAAC;;;;;;;;;;;;;;;;;ACjGa;AACX;AAC7C;AACA,uBAAuB;AACvB,OAAO,sDAAa;AACpB;AACyB;;;;;;;;;;;;;;;;;;ACNe;AACiD;AAC5C;AAC7C;AACA;AACA;AACA,yDAAyD,sDAAa;AACtE,+DAA+D,sDAAa;AAC5E,2EAA2E,sDAAa;AACxF,qEAAqE,sDAAa;AAClF,gDAAgD,wFAAuB;AACvE,gDAAgD,wFAAuB;AACvE,gDAAgD,wFAAuB;AACvE,+CAA+C,wFAAuB;AACtE,oDAAoD,wFAAuB;AAC3E,oDAAoD,wFAAuB;AAC3E,oDAAoD,wFAAuB;AAC3E,oDAAoD,wFAAuB;AAC3E,0DAA0D,wFAAuB;AACjF,4DAA4D,gDAAY;AACxE;AACA,iEAAe,mBAAmB,EAAC;;;;;;;;;;;;;;;;;ACrBU;AACJ;AACzC;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA,0BAA0B,oDAAY;AACtC,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,0BAA0B,sDAAc;AACxC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;;ACzDmC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,EAAE,EAAE,IAAI;AACzE,8BAA8B,EAAE,EAAE,IAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAAkB,oBAAoB,kBAAkB,aAAa;AACjG;AACA;AACA,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;ACnDkB;AACtB;;;;;;;;;;;;;;;;ACDO;AACnC;AACA,eAAe,mDAAW;AAC1B,IAAI,qDAAa;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,wBAAwB,EAAC;;;;;;;;;;;;;;;;;;;;ACrBF;AACoB;AACA;AACQ;;;;;;;;;;;;;;;ACHlE;AACA,cAAc,wBAAwB;AACtC;AACA,iEAAe,kBAAkB,EAAC;;;;;;;;;;;;;;;ACHlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;;;;ACT4D;AACwB;AACZ;AACpB;AAC5E;AACA;AACA,8BAA8B,yEAA2B;AACzD,gCAAgC;AAChC,4CAA4C;AAC5C,sCAAsC;AACtC;AACA,iEAAe,YAAY;;;;;;;;;;;;;;;ACX3B;AACA;AACA;AACA;AACA,iEAAe;;;;;;;;;;;;;;;ACJf;AACA;AACA;AACuD;AACvD;AACA;AACA;AACA,qBAAqB,+DAAkB,UAAU,IAAI,IAAI,IAAI,cAAc;AAC3E;AACA,iEAAe;;;;;;;;;;;;;;;ACTf;AACA;AACA;AACuD;AACvD;AACA;AACA;AACA,qBAAqB,+DAAkB,UAAU,IAAI,KAAK;AAC1D;AACA,iEAAe;;;;;;;;;;;;;;;;;;;;ACTf;AACA;AACA;AACA;AACA;AACO;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrDwC;AACN;AACE;AACF;AACA;AACA;AACE;AACF;AACA;AACA;AAClC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AAC5S;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjciC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACtd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxfiC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACrtB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9xBiC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,+CAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,+CAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;AACA;AACO;AACP,uBAAuB,kDAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,MAAM;AAClB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,MAAM;AAClB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,YAAY,MAAM;AAClB;AACA;AACO;AACP,mBAAmB,kDAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,MAAM;AAClB,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAAgB,+BAA+B,+CAAgB,+BAA+B,+CAAgB;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,uEAAuE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB;AAC9zC;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACj8DiC;AACN;AACA;AACA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,YAAY;AACxB;AACA;AACO;AACP;AACA;AACA,SAAS,+CAAgB;AACzB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,YAAY,cAAc;AAC1B,YAAY,YAAY;AACxB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,mBAAmB,+CAAgB;AACnC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA,UAAU,8CAAe;AACzB,UAAU,8CAAe;AACzB,UAAU,8CAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,uBAAuB;AACvB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,qCAAqC;AAChD,aAAa,MAAM;AACnB;AACA;AACA;AACO;AACP,iFAAiF,mDAAoB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACA;AACO,YAAY,2CAAU;AAC7B;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACO,iBAAiB,gDAAe;AACvC;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACA;AACO,WAAW,0CAAS;AAC3B;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACA;AACO,UAAU,yCAAQ;AACzB;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACO,YAAY,2CAAU;AAC7B;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACA;AACO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACO,WAAW,0CAAS;AAC3B;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO,aAAa,4CAAW;AAC/B;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACA;AACO,oBAAoB,mDAAkB;AAC7C;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACA;AACO,gBAAgB,+CAAc;AACrC;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO,kBAAkB,iDAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP,iBAAiB,yCAAQ,eAAe,+CAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,4CAAW;AAC1B,iBAAiB,gDAAe;AAChC,iBAAiB,gDAAe;AAChC;AACA,YAAY,yCAAQ;AACpB;AACA,GAAG,2CAAU;AACb,OAAO,yCAAQ,sBAAsB,2CAAU;AAC/C,GAAG,+CAAc;AACjB;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG,2CAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,YAAY,4CAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrvBuC;AACN;AACA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACO;AACP,cAAc,kDAAmB;AACjC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP,cAAc,kDAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP,cAAc,kDAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP,cAAc,kDAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA,aAAa,4CAAW;AACxB,CAAC,iDAAgB;AACjB,aAAa,kDAAmB;AAChC,CAAC,oDAAmB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;AACA;AACO,cAAc,0CAAS;AAC9B;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO,cAAc,0CAAS;AAC9B;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6CAAY;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6CAAY;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6CAAY;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA,qBAAqB,+CAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACO,aAAa,4CAAW;AAC/B;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACO,oBAAoB,mDAAkB;AAC7C;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AAChoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACh2BwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,SAAS,8CAAe;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB;AAClI;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzoBuC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,SAAS,8CAAe;AACxB,SAAS,8CAAe;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,UAAU;AACV;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,UAAU;AACV;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA,UAAU;AACV;AACA;AACA,qBAAqB;AACrB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACvN;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtzBuC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC,KAAK,kDAAmB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACO;AACP,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,OAAO,8CAAe;AACtB,OAAO,8CAAe;AACtB;AACA,GAAG;AACH;AACA,OAAO,8CAAe;AACtB,OAAO,8CAAe;AACtB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AAC5S;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA,cAAc;AACd;AACA;AACA;AACO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;ACxqBiE;AACZ;AACtD;AAC4B;AACJ;AAIvB;;;;;;;SCRD;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA;UACA,yCAAyC,wCAAwC;UACjF;UACA;UACA;;;;;UCPA;;;;;UCAA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN0C;AACL;AACX;AACE;AACC;AACC;AACD;AACJ;AACD;AACkB;AACnB;AACU;AACN;AACA;AACQ;AACC;AACD;AACF;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA,WAAW,qBAAqB;AAChC,WAAW,2BAA2B;AACtC,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,8BAA8B;AAC9B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,4BAA4B,mDAAa;AACzC;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACgB","sources":["webpack://redgpu/./node_modules/dat.gui/build/dat.gui.module.js","webpack://redgpu/./src/light/pointLightCluster/PassLightClusters.wgsl","webpack://redgpu/./src/light/pointLightCluster/PassLightClustersBound.wgsl","webpack://redgpu/./src/main/render/renderFinal/fragment.wgsl","webpack://redgpu/./src/main/render/renderFinal/vertex.wgsl","webpack://redgpu/./src/main/scene/sceneHelper/grid/fragment.wgsl","webpack://redgpu/./src/main/scene/sceneHelper/grid/vertex.wgsl","webpack://redgpu/./src/main/scene/sceneHelper/normalHelper/fragment.wgsl","webpack://redgpu/./src/main/scene/sceneHelper/normalHelper/vertex.wgsl","webpack://redgpu/./src/material/bitmapMaterial/fragment.wgsl","webpack://redgpu/./src/material/bitmapMaterial/vertex.wgsl","webpack://redgpu/./src/material/bitmapPhoneMaterial/fragment.wgsl","webpack://redgpu/./src/material/bitmapPhoneMaterial/vertex.wgsl","webpack://redgpu/./src/material/colorMaterial/fragment.wgsl","webpack://redgpu/./src/material/colorMaterial/vertex.wgsl","webpack://redgpu/./src/material/skyboxMaterial/fragment.wgsl","webpack://redgpu/./src/material/skyboxMaterial/vertex.wgsl","webpack://redgpu/./src/material/wgsl/ShaderDefine_ModelUniformStruct.wgsl","webpack://redgpu/./src/material/wgsl/ShaderDefine_SystemAmbientDirectionalLights.wgsl","webpack://redgpu/./src/material/wgsl/ShaderDefine_SystemCalcLightFunctions.wgsl","webpack://redgpu/./src/material/wgsl/ShaderDefine_SystemUniforms.wgsl","webpack://redgpu/./src/postEffect/effects/wgslFragment/brightnessContrastFragment.wgsl","webpack://redgpu/./src/postEffect/effects/wgslFragment/grayFragment.wgsl","webpack://redgpu/./src/postEffect/effects/wgslFragment/hueSaturationFragment.wgsl","webpack://redgpu/./src/postEffect/effects/wgslFragment/invertFragment.wgsl","webpack://redgpu/./src/postEffect/effects/wgslFragment/pixelizeFragment.wgsl","webpack://redgpu/./src/postEffect/effects/wgslVertex/baseVertex.wgsl","webpack://redgpu/./src/resource/texture/mipmapGenerator/fragment.wgsl","webpack://redgpu/./src/resource/texture/mipmapGenerator/vertex.wgsl","webpack://redgpu/./src/temp/qurd/fragment.wgsl","webpack://redgpu/./src/temp/qurd/vertex.wgsl","webpack://redgpu/./src/camera/BasicCamera.ts","webpack://redgpu/./src/camera/index.ts","webpack://redgpu/./src/context/RedGPUContext.ts","webpack://redgpu/./src/context/RedGPUContextBase.ts","webpack://redgpu/./src/context/debugger/RedGPUContextDebugger.ts","webpack://redgpu/./src/context/debugger/category/systemStatePanels/setActiveDebugger.ts","webpack://redgpu/./src/context/debugger/category/systemStatePanels/setAdapterInfo.ts","webpack://redgpu/./src/context/debugger/category/systemStatePanels/setLightClusterInfo.ts","webpack://redgpu/./src/context/debugger/category/systemStatePanels/setRedGPUContext.ts","webpack://redgpu/./src/context/debugger/category/systemStatePanels/setStatePanels.ts","webpack://redgpu/./src/context/debugger/draw/debuggerRenderResourceManager.ts","webpack://redgpu/./src/context/debugger/draw/debuggerRenderViewList.ts","webpack://redgpu/./src/context/debugger/funcs/gui_setItem.ts","webpack://redgpu/./src/context/debugger/funcs/gui_setItemBooleanNameSize.ts","webpack://redgpu/./src/context/debugger/funcs/gui_setItemDisableInput.ts","webpack://redgpu/./src/context/index.ts","webpack://redgpu/./src/light/AmbientLight.ts","webpack://redgpu/./src/light/BaseLight.ts","webpack://redgpu/./src/light/DirectionalLight.ts","webpack://redgpu/./src/light/LightManager.ts","webpack://redgpu/./src/light/PointLight.ts","webpack://redgpu/./src/light/index.ts","webpack://redgpu/./src/light/pointLightCluster/PassLightClusters.ts","webpack://redgpu/./src/light/pointLightCluster/PassLightClustersBound.ts","webpack://redgpu/./src/light/pointLightCluster/PassLightClustersHelper.ts","webpack://redgpu/./src/light/pointLightCluster/index.ts","webpack://redgpu/./src/main/render/Renderer.ts","webpack://redgpu/./src/main/render/index.ts","webpack://redgpu/./src/main/render/renderFinal/FinalRenderer.ts","webpack://redgpu/./src/main/scene/Scene.ts","webpack://redgpu/./src/main/scene/index.ts","webpack://redgpu/./src/main/scene/sceneHelper/asix/Axis.ts","webpack://redgpu/./src/main/scene/sceneHelper/grid/Grid.ts","webpack://redgpu/./src/main/scene/sceneHelper/grid/GridMaterial.ts","webpack://redgpu/./src/main/scene/sceneHelper/index.ts","webpack://redgpu/./src/main/scene/sceneHelper/normalHelper/NormalHelper.ts","webpack://redgpu/./src/main/scene/sceneHelper/normalHelper/NormalHelperMaterial.ts","webpack://redgpu/./src/main/scene/skyBox/SkyBox.ts","webpack://redgpu/./src/main/view/View.ts","webpack://redgpu/./src/main/view/ViewBase.ts","webpack://redgpu/./src/main/view/ViewDebugger.ts","webpack://redgpu/./src/main/view/index.ts","webpack://redgpu/./src/material/BaseMaterial.ts","webpack://redgpu/./src/material/MaterialMix.ts","webpack://redgpu/./src/material/bitmapMaterial/BitmapMaterial.ts","webpack://redgpu/./src/material/bitmapPhoneMaterial/BitmapPhongMaterial.ts","webpack://redgpu/./src/material/colorMaterial/ColorMaterial.ts","webpack://redgpu/./src/material/index.ts","webpack://redgpu/./src/material/skyboxMaterial/SkyBoxMaterial.ts","webpack://redgpu/./src/object3d/base/BaseObject3D.ts","webpack://redgpu/./src/object3d/base/BaseObject3DPipeline.ts","webpack://redgpu/./src/object3d/base/BaseObject3DTransform.ts","webpack://redgpu/./src/object3d/base/CONST_DIRTY_TRANSFORM_STATE.ts","webpack://redgpu/./src/object3d/base/DisplayContainer.ts","webpack://redgpu/./src/object3d/index.ts","webpack://redgpu/./src/object3d/mesh/Mesh.ts","webpack://redgpu/./src/object3d/mesh/MeshPipeline.ts","webpack://redgpu/./src/postEffect/PostEffectBase.ts","webpack://redgpu/./src/postEffect/PostEffectManager.ts","webpack://redgpu/./src/postEffect/effects/PostEffectBrightnessContrast.ts","webpack://redgpu/./src/postEffect/effects/PostEffectGray.ts","webpack://redgpu/./src/postEffect/effects/PostEffectHueSaturation.ts","webpack://redgpu/./src/postEffect/effects/PostEffectInvert.ts","webpack://redgpu/./src/postEffect/effects/PostEffectPixelize.ts","webpack://redgpu/./src/postEffect/index.ts","webpack://redgpu/./src/resource/buffers/TypeSize.ts","webpack://redgpu/./src/resource/buffers/buffer/IndexBuffer.ts","webpack://redgpu/./src/resource/buffers/buffer/VertexBuffer.ts","webpack://redgpu/./src/resource/buffers/index.ts","webpack://redgpu/./src/resource/buffers/interleaveInfo/InterleaveInfo.ts","webpack://redgpu/./src/resource/buffers/interleaveInfo/InterleaveUnit.ts","webpack://redgpu/./src/resource/buffers/uniformBuffer/UniformBufferDescriptor.ts","webpack://redgpu/./src/resource/buffers/uniformBuffer/UniformBufferFloat32.ts","webpack://redgpu/./src/resource/geometry/Geometry.ts","webpack://redgpu/./src/resource/geometry/index.ts","webpack://redgpu/./src/resource/geometry/primitives/Box.ts","webpack://redgpu/./src/resource/geometry/primitives/Sphere.ts","webpack://redgpu/./src/resource/makeShaderModule.ts","webpack://redgpu/./src/resource/resourceManager/CubeTextureInfo.ts","webpack://redgpu/./src/resource/resourceManager/RedGPUContextResourceManager.ts","webpack://redgpu/./src/resource/resourceManager/TextureInfo.ts","webpack://redgpu/./src/resource/texture/BitmapCubeTexture.ts","webpack://redgpu/./src/resource/texture/BitmapTexture.ts","webpack://redgpu/./src/resource/texture/TextureSampler.ts","webpack://redgpu/./src/resource/texture/index.ts","webpack://redgpu/./src/resource/texture/mipmapGenerator/generateWebGPUTextureMipmap.ts","webpack://redgpu/./src/systemShaderDefine/index.ts","webpack://redgpu/./src/systemShaderDefine/shaderDefineReplace.ts","webpack://redgpu/./src/temp/qurd/Quad.ts","webpack://redgpu/./src/util/color/hexadecimalToRgb.ts","webpack://redgpu/./src/util/color/index.ts","webpack://redgpu/./src/util/computeViewFrustumPlanes.ts","webpack://redgpu/./src/util/errorFunc/index.ts","webpack://redgpu/./src/util/getConstructorName.ts","webpack://redgpu/./src/util/makeUUID.ts","webpack://redgpu/./src/material/wgsl/index.js","webpack://redgpu/./src/util/errorFunc/throwError.js","webpack://redgpu/./src/util/errorFunc/throwErrorInstanceOf.js","webpack://redgpu/./src/util/errorFunc/throwErrorNumberType.js","webpack://redgpu/./src/util/gl-matrix/common.js","webpack://redgpu/./src/util/gl-matrix/index.js","webpack://redgpu/./src/util/gl-matrix/mat2.js","webpack://redgpu/./src/util/gl-matrix/mat2d.js","webpack://redgpu/./src/util/gl-matrix/mat3.js","webpack://redgpu/./src/util/gl-matrix/mat4.js","webpack://redgpu/./src/util/gl-matrix/quat.js","webpack://redgpu/./src/util/gl-matrix/quat2.js","webpack://redgpu/./src/util/gl-matrix/vec2.js","webpack://redgpu/./src/util/gl-matrix/vec3.js","webpack://redgpu/./src/util/gl-matrix/vec4.js","webpack://redgpu/./src/util/index.js","webpack://redgpu/webpack/bootstrap","webpack://redgpu/webpack/runtime/define property getters","webpack://redgpu/webpack/runtime/hasOwnProperty shorthand","webpack://redgpu/webpack/runtime/make namespace object","webpack://redgpu/./src/RedGPU.ts"],"sourcesContent":["/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return obj instanceof Function;\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n      this.__state.space = 'HEX';\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function () {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function () {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function () {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function () {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n    _this2.__saturation_field.appendChild(valueField);\n    _this2.__selector.appendChild(_this2.__field_knob);\n    _this2.__selector.appendChild(_this2.__saturation_field);\n    _this2.__selector.appendChild(_this2.__hue_field);\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n    _this2.domElement.appendChild(_this2.__input);\n    _this2.domElement.appendChild(_this2.__selector);\n    _this2.updateDisplay();\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n      _this.__color.v = v;\n      _this.__color.s = s;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n      _this.__color.h = h * 360;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    return _this2;\n  }\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n      var _flip = 255 - flip;\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller, {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n@group(1) @binding(0) var<storage> pointLight_Clusters : PointLight_Clusters;\\r\\n\\r\\nfn pointLight_testSphereAABB(light:u32,  tile:u32) -> bool {\\r\\n   // 라이트와 타일의 정보를 한 번만 획득합니다.\\r\\n   let targetLight = pointLightList.lights[light];\\r\\n   let targetTile = pointLight_Clusters.cubeList[tile];\\r\\n\\r\\n   // 라이트의 반지름과 위치를 획득하고, 위치는 World Space에서 View Space로 변환합니다.\\r\\n   let radius:f32 = targetLight.radius;\\r\\n   let position:vec3<f32> = targetLight.position;\\r\\n   let center:vec3<f32> = (systemUniforms.cameraMatrix *  vec4<f32>(position, 1.0)).xyz;\\r\\n\\r\\n   // AABB와 라이트 사이의 제곱 거리를 계산합니다.\\r\\n   let squaredDistance:f32 = pointLight_sqDistPointAABB(center, tile, targetTile.minAABB.xyz, targetTile.maxAABB.xyz);\\r\\n\\r\\n   return squaredDistance <= (radius * radius);\\r\\n}\\r\\n\\r\\nfn pointLight_sqDistPointAABB(targetPoint:vec3<f32>, tile:u32, minAABB:vec3<f32>, maxAABB:vec3<f32>) -> f32 {\\r\\n    var sqDist = 0.0;\\r\\n    for(var i = 0u; i < 3u; i = i + 1u) {\\r\\n      // 해당 축에 대한 좌표를 하나씩 확인합니다.\\r\\n      let v = targetPoint[i];\\r\\n      let _minAABB = minAABB[i];\\r\\n      let _maxAABB = maxAABB[i];\\r\\n\\r\\n      if(v < _minAABB){\\r\\n        sqDist +=  (_minAABB - v) * (_minAABB - v);\\r\\n      }\\r\\n      if(v > _maxAABB){\\r\\n        sqDist += (v - _maxAABB) * (v - _maxAABB);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return sqDist;\\r\\n}\\r\\n\\r\\n@compute @workgroup_size(REDGPU_DEFINE_WORKGROUP_SIZE_X,REDGPU_DEFINE_WORKGROUP_SIZE_Y, REDGPU_DEFINE_WORKGROUP_SIZE_Z)\\r\\nfn main(@builtin(global_invocation_id) global_id : vec3<u32>) {\\r\\n    // 현재 타일의 인덱스를 계산합니다.\\r\\n    let tileIndex = global_id.x +\\r\\n                    global_id.y * pointLight_tileCount.x +\\r\\n                    global_id.z * pointLight_tileCount.x * pointLight_tileCount.y;\\r\\n    // 현재 클러스터의 라이트 수를 0으로 초기화합니다.\\r\\n    var clusterLightCount = 0u;\\r\\n    // 현재 클러스터의 라이트 인덱스를 담을 배열을 초기화합니다.\\r\\n    var clusterPointLightIndices : array<u32, REDGPU_DEFINE_MAX_LIGHTS_PER_CLUSTERu>;\\r\\n\\r\\n    // 각 라이트에 대해 반복합니다.\\r\\n    for (var i = 0u; i < u32(pointLightList.count[0]); i = i + 1u) {\\r\\n        // 현재 라이트가 클러스터 내부에 있는지 검사합니다.\\r\\n        let lightInCluster = pointLight_testSphereAABB(i,tileIndex);\\r\\n\\r\\n        // 라이트가 클러스터 안에 있다면\\r\\n        if (lightInCluster) {\\r\\n            // 라이트 인덱스를 배열에 추가하고\\r\\n            clusterPointLightIndices[clusterLightCount] = i;\\r\\n            // 라이트 수를 증가시킵니다.\\r\\n            clusterLightCount = clusterLightCount + 1u;\\r\\n        }\\r\\n\\r\\n        // 라이트의 수가 클러스터의 최대 용량에 도달하면 루프를 종료합니다.\\r\\n        if (clusterLightCount == REDGPU_DEFINE_MAX_LIGHTS_PER_CLUSTERu) {\\r\\n            break;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // 현재 클러스터의 라이트들을 전체 라이트 그룹에 추가합니다.\\r\\n    var offset = atomicAdd(&pointLight_clusterLightGroup.offset, clusterLightCount);\\r\\n\\r\\n    // 추가된 각 라이트에 대해\\r\\n    for(var i = 0u; i < clusterLightCount; i = i + 1u) {\\r\\n        // 그룹에 인덱스를 추가합니다.\\r\\n        pointLight_clusterLightGroup.indices[offset + i] = clusterPointLightIndices[i];\\r\\n    }\\r\\n\\r\\n    // 현재 클러스터의 라이트 정보를 업데이트합니다.\\r\\n    pointLight_clusterLightGroup.lights[tileIndex].offset = offset;\\r\\n    pointLight_clusterLightGroup.lights[tileIndex].count = clusterLightCount;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n@group(1) @binding(0) var<storage, read_write> pointLight_Clusters : PointLight_Clusters;\\r\\n\\r\\nfn lineIntersectionToZPlane(a : vec3<f32>, b : vec3<f32>, zDistance : f32) -> vec3<f32> {\\r\\n    let normal = vec3<f32>(0.0, 0.0, 0.5);\\r\\n    let ab = b - a;\\r\\n    let t = (zDistance - dot(normal, a)) / dot(normal, ab);\\r\\n    return a + t * ab;\\r\\n}\\r\\n\\r\\nfn clipToView(clip : vec4<f32>) -> vec4<f32> {\\r\\n    let view = systemUniforms.inverseProjectionMatrix * clip;\\r\\n    return view / vec4<f32>(view.w, view.w, view.w, view.w);\\r\\n}\\r\\n\\r\\nfn screen2View(screen : vec4<f32>) -> vec4<f32> {\\r\\n    let texCoord = screen.xy / systemUniforms.resolution.xy;\\r\\n    let clip = vec4<f32>(vec2<f32>(texCoord.x, 1.0 - texCoord.y) * 2.0 - vec2<f32>(1.0, 1.0), screen.z, screen.w );\\r\\n    return clipToView(clip);\\r\\n}\\r\\n\\r\\nconst eyePos = vec3<f32>(0.0);\\r\\n\\r\\n@compute @workgroup_size(REDGPU_DEFINE_WORKGROUP_SIZE_X,REDGPU_DEFINE_WORKGROUP_SIZE_Y, REDGPU_DEFINE_WORKGROUP_SIZE_Z)\\r\\n\\r\\nfn main(@builtin(global_invocation_id) global_id : vec3<u32>) {\\r\\n    // 전역 호출 ID에 기반한 현재 타일 인덱스를 계산합니다.\\r\\n    let tileIndex = global_id.x +\\r\\n                    global_id.y * pointLight_tileCount.x +\\r\\n                    global_id.z * pointLight_tileCount.x * pointLight_tileCount.y;\\r\\n\\r\\n    // 타일의 크기를 계산합니다.\\r\\n    let tileSize = vec2<f32>(\\r\\n              systemUniforms.resolution.x / f32(pointLight_tileCount.x),\\r\\n              systemUniforms.resolution.y / f32(pointLight_tileCount.y)\\r\\n          );\\r\\n\\r\\n    // 스크린 공간(Screen-Space)의 최대와 최소 좌표를 계산하고 View Space로 변환합니다.\\r\\n    let global_id_x_pos_one = vec2<f32>(f32(global_id.x + 1u), f32(global_id.y + 1u)) * tileSize;\\r\\n    let global_id_x_y = vec2<f32>(f32(global_id.x), f32(global_id.y)) * tileSize;\\r\\n\\r\\n    let maxPoint_sS = vec4<f32>(global_id_x_pos_one, 0.0, 1.0);\\r\\n    let minPoint_sS = vec4<f32>(global_id_x_y, 0.0, 1.0);\\r\\n\\r\\n    let maxPoint_vS = screen2View(maxPoint_sS).xyz;\\r\\n    let minPoint_vS = screen2View(minPoint_sS).xyz;\\r\\n\\r\\n    // 전역 Z 인덱스에 기반하여 Near 와 Far의 Z 평면을 계산합니다.\\r\\n    let nearFarX = systemUniforms.nearFar.x;\\r\\n    let nearFarY = systemUniforms.nearFar.y;\\r\\n\\r\\n    let tileZ = f32(global_id.z) / f32(pointLight_tileCount.z);\\r\\n    let tileZ_plus_one = f32(global_id.z + 1u) / f32(pointLight_tileCount.z);\\r\\n\\r\\n    let tileNear = -nearFarX * pow(nearFarY / nearFarX, tileZ);\\r\\n    let tileFar = -nearFarX * pow(nearFarY / nearFarX, tileZ_plus_one);\\r\\n\\r\\n    // View Space의 선들과 Near 와 Far의 Z 평면의 교점을 계산합니다.\\r\\n    let minPointNear = lineIntersectionToZPlane(eyePos, minPoint_vS, tileNear);\\r\\n    let minPointFar = lineIntersectionToZPlane(eyePos, minPoint_vS, tileFar);\\r\\n    let maxPointNear = lineIntersectionToZPlane(eyePos, maxPoint_vS, tileNear);\\r\\n    let maxPointFar = lineIntersectionToZPlane(eyePos, maxPoint_vS, tileFar);\\r\\n\\r\\n    // AABB(Axis-Aligned Bounding Box)의 최소 및 최대 좌표를 저장합니다.\\r\\n    let minAABB = min(min(minPointNear, minPointFar), min(maxPointNear, maxPointFar));\\r\\n    let maxAABB = max(max(minPointNear, minPointFar), max(maxPointNear, maxPointFar));\\r\\n\\r\\n    pointLight_Clusters.cubeList[tileIndex].minAABB = vec4<f32>(minAABB, 0.0);\\r\\n    pointLight_Clusters.cubeList[tileIndex].maxAABB = vec4<f32>(maxAABB, 0.0);\\r\\n}\\r\\n\";","export default \"@group(0) @binding(1) var _Sampler: sampler;\\r\\n@group(0) @binding(2) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n  return textureSample(_Texture,_Sampler, uv);\\r\\n}\\r\\n\";","export default \"// define Struct\\r\\nstruct Uniforms {\\r\\n  modelMatrix : mat4x4<f32>,\\r\\n};\\r\\n// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) uv: vec2<f32>,\\r\\n};\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) uv : vec2<f32>,\\r\\n};\\r\\n// define Uniform binding\\r\\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\\r\\n@vertex\\r\\n\\r\\nfn main(inputData : InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  outData.position = uniforms.modelMatrix * vec4<f32>(inputData.position,1.0);\\r\\n  outData.uv = inputData.uv;\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\nstruct InputData {\\r\\n    @location(0) vVertexColor : vec4<f32>,\\r\\n};\\r\\n@fragment\\r\\nfn main(inputData:InputData) -> @location(0) vec4<f32> {\\r\\n  return inputData.vVertexColor;\\r\\n}\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\n\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) vertexColor : vec4<f32>,\\r\\n};\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) vVertexColor: vec4<f32>,\\r\\n};\\r\\n\\r\\n@vertex\\r\\nfn main(inputData : InputData) -> OutData {\\r\\n    var outData : OutData;\\r\\n    outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n    outData.vVertexColor = inputData.vertexColor;\\r\\n    return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\nstruct InputData {\\r\\n    @location(0) vVertexColor : vec4<f32>,\\r\\n};\\r\\n@fragment\\r\\nfn main(inputData:InputData) -> @location(0) vec4<f32> {\\r\\n  return inputData.vVertexColor;\\r\\n}\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) vertexColor : vec4<f32>,\\r\\n};\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) vVertexColor: vec4<f32>,\\r\\n};\\r\\n\\r\\n@vertex\\r\\nfn main(inputData : InputData) -> OutData {\\r\\n    var outData : OutData;\\r\\n    outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n    outData.vVertexColor = inputData.vertexColor;\\r\\n    return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_SYSTEM_AMBIENT_DIRECTIONAL_LIGHTS\\r\\n#REDGPU_DEFINE_POINT_LIGHT_CLUSTER\\r\\n#REDGPU_DEFINE_POINT_LIGHT_CLUSTER_LIGHT_GROUP\\r\\n#REDGPU_DEFINE_SYSTEM_CALC_LIGHT_FUNCTIONS\\r\\nstruct MaterialUniforms {\\r\\n    alpha : f32,\\r\\n};\\r\\n\\r\\n@group(2) @binding(0) var<uniform> materialUniforms : MaterialUniforms;\\r\\n@group(2) @binding(1) var _sampler: sampler;\\r\\n@group(2) @binding(2) var _texture: texture_2d<f32>;\\r\\n\\r\\nstruct InputData {\\r\\n    @builtin(position) position : vec4<f32>,\\r\\n    @location(0) vertexPosition : vec3<f32>,\\r\\n    @location(1) vertexNormal : vec3<f32>,\\r\\n    @location(2) uv : vec2<f32>,\\r\\n};\\r\\n\\r\\n@fragment\\r\\n\\r\\nfn main(inputData:InputData) -> @location(0) vec4<f32> {\\r\\n    var diffuseColor:vec4<f32> = textureSample(_texture,_sampler, inputData.uv);\\r\\n    // result color\\r\\n    diffuseColor = vec4<f32>(diffuseColor.rgb, diffuseColor.a * materialUniforms.alpha);\\r\\n    if(diffuseColor.a == 0.0) {\\r\\n     discard;\\r\\n    }\\r\\n    return diffuseColor;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_VERTEX_BASE\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\n\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) vertexNormal : vec3<f32>,\\r\\n    @location(2) uv : vec2<f32>,\\r\\n};\\r\\n// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) vertexPosition: vec3<f32>,\\r\\n  @location(1) vertexNormal: vec3<f32>,\\r\\n  @location(2) uv: vec2<f32>,\\r\\n};\\r\\n@vertex\\r\\nfn main(inputData:InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  var position:vec4<f32> = modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n  outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * position;\\r\\n  outData.vertexPosition = position.xyz;\\r\\n  outData.vertexNormal = (modelUniforms.normalMatrix * vec4<f32>(inputData.vertexNormal, 1.0)).xyz;\\r\\n  outData.uv = inputData.uv;\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_SYSTEM_AMBIENT_DIRECTIONAL_LIGHTS\\r\\n#REDGPU_DEFINE_SYSTEM_CALC_LIGHT_FUNCTIONS\\r\\n\\r\\n\\r\\nstruct MaterialUniforms {\\r\\n    alpha : f32,\\r\\n    shininess : f32,\\r\\n    specularPower : f32,\\r\\n    specularColor : vec3<f32>,\\r\\n};\\r\\n\\r\\n@group(2) @binding(0) var<uniform> materialUniforms : MaterialUniforms;\\r\\n@group(2) @binding(1) var _sampler: sampler;\\r\\n@group(2) @binding(2) var _texture: texture_2d<f32>;\\r\\n\\r\\nstruct InputData {\\r\\n    @builtin(position) position : vec4<f32>,\\r\\n    @location(0) vertexPosition : vec3<f32>,\\r\\n    @location(1) vertexNormal : vec3<f32>,\\r\\n    @location(2) uv : vec2<f32>,\\r\\n};\\r\\n\\r\\n@fragment\\r\\n\\r\\nfn main(inputData:InputData) -> @location(0) vec4<f32> {\\r\\n    var diffuseColor:vec4<f32> = textureSample(_texture,_sampler, inputData.uv);\\r\\n    var lightColorSum = calcLights(\\r\\n        systemLightUniforms,\\r\\n        inputData.position,\\r\\n        normalize(inputData.vertexNormal),\\r\\n        inputData.vertexPosition,\\r\\n        //\\r\\n        materialUniforms.shininess,\\r\\n        materialUniforms.specularPower,\\r\\n        materialUniforms.specularColor\\r\\n      );\\r\\n    // result color\\r\\n    diffuseColor = vec4<f32>(diffuseColor.rgb * lightColorSum, diffuseColor.a * materialUniforms.alpha);\\r\\n    if(diffuseColor.a == 0.0) {\\r\\n     discard;\\r\\n    }\\r\\n    return diffuseColor;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_VERTEX_BASE\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\n\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) vertexNormal : vec3<f32>,\\r\\n    @location(2) uv : vec2<f32>,\\r\\n};\\r\\n// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) vertexPosition: vec3<f32>,\\r\\n  @location(1) vertexNormal: vec3<f32>,\\r\\n  @location(2) uv: vec2<f32>,\\r\\n};\\r\\n@vertex\\r\\nfn main(inputData:InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  var position:vec4<f32> = modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n  outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * position;\\r\\n  outData.vertexPosition = position.xyz;\\r\\n  outData.vertexNormal = (modelUniforms.normalMatrix * vec4<f32>(inputData.vertexNormal, 1.0)).xyz;\\r\\n  outData.uv = inputData.uv;\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\nstruct MaterialUniforms {\\r\\n  color : vec4<f32>,\\r\\n  alpha : f32,\\r\\n};\\r\\n@group(2) @binding(0) var<uniform> materialUniforms : MaterialUniforms;\\r\\n@fragment\\r\\nfn main() -> @location(0) vec4<f32> {\\r\\n  return materialUniforms.color;\\r\\n}\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\n\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>\\r\\n};\\r\\n// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n};\\r\\n\\r\\n\\r\\n\\r\\n@vertex\\r\\nfn main(inputData:InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\nstruct MaterialUniforms {\\r\\n    opacity : f32\\r\\n};\\r\\n@group(2) @binding(0) var<uniform> materialUniforms : MaterialUniforms;\\r\\n@group(2) @binding(1) var _sampler: sampler;\\r\\n@group(2) @binding(2) var _texture: texture_cube<f32>;\\r\\n\\r\\nstruct InputData {\\r\\n    @location(0) vertexNormal : vec3<f32>,\\r\\n    @location(1) uv : vec2<f32>,\\r\\n    @location(2) vPosition : vec4<f32>,\\r\\n};\\r\\n@fragment\\r\\nfn main(inputData:InputData) -> @location(0) vec4<f32> {\\r\\n  var cubemapVec = inputData.vPosition.xyz - vec3<f32>(0.5, 0.5, 0.5);\\r\\n  var outColor:vec4<f32> = textureSample(_texture,_sampler, cubemapVec);\\r\\n  if(outColor.a == 0.0) {\\r\\n    discard;\\r\\n  }\\r\\n  return outColor;\\r\\n}\";","export default \"#REDGPU_DEFINE_SYSTEM_UNIFORMS\\r\\n#REDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\r\\n\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) vertexNormal : vec3<f32>,\\r\\n    @location(2) uv : vec2<f32>,\\r\\n};\\r\\n// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) vertexNormal: vec3<f32>,\\r\\n  @location(1) uv: vec2<f32>,\\r\\n  @location(2) vPosition: vec4<f32>,\\r\\n};\\r\\n@vertex\\r\\nfn main(inputData:InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  outData.position = systemUniforms.projectionMatrix * systemUniforms.cameraMatrix * modelUniforms.modelMatrix * vec4<f32>(inputData.position, 1.0);\\r\\n  outData.uv = inputData.uv;\\r\\n  outData.vPosition = 0.5 * (vec4<f32>(inputData.position, 1.0) + vec4<f32>(1.0, 1.0, 1.0, 1.0));\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"struct ModelUniforms {\\r\\n  modelMatrix : mat4x4<f32>,\\r\\n  normalMatrix : mat4x4<f32>,\\r\\n};\\r\\n@group(1) @binding(0) var<uniform> modelUniforms : ModelUniforms;\\r\\n\";","export default \"struct DirectionalLightUniforms {\\r\\n  color : vec3<f32>,\\r\\n  intensity:f32,\\r\\n  direction : vec3<f32>,\\r\\n};\\r\\nstruct SystemLightUniforms {\\r\\n  ambientLight : vec4<f32>,\\r\\n  directionalLightCount : vec4<f32>,\\r\\n  directionalLight : array<DirectionalLightUniforms,REDGPU_CONST_MAX_DIRECTIONAL_LIGHT_NUM>,\\r\\n};\\r\\n@group(0) @binding(1) var<uniform> systemLightUniforms : SystemLightUniforms;\";","export default \"\\r\\nfn calcDirectionalLight(\\r\\n    light:DirectionalLightUniforms,normal:vec3<f32>,\\r\\n    ///\\r\\n    shininess:f32,\\r\\n    specularPower:f32,\\r\\n    specularColor:vec3<f32>,\\r\\n) -> vec3<f32> {\\r\\n    var direction:vec3<f32> = normalize(light.direction);\\r\\n    var ld:vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\\r\\n    var ls:vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\\r\\n    var lightDot:f32 ;\\r\\n    ld = vec3<f32>(light.color) * light.intensity;\\r\\n    lightDot = dot(normal,-direction);\\r\\n    if(lightDot>0.0){\\r\\n        var specularTextureValue:f32  = 1.0; // TODO\\r\\n        var specular:f32 = pow( max(dot(reflect(direction, normal), -direction), 0.0), shininess) * specularPower * specularTextureValue;\\r\\n        ls = specularColor * specular * light.intensity;\\r\\n    }\\r\\n    return  vec3<f32>(ld * lightDot) + ls;\\r\\n\\r\\n};\\r\\n\\r\\nfn calcPointLight(\\r\\n    light:PointLight, normal:vec3<f32>,\\r\\n    vertexPosition:vec3<f32>,\\r\\n    ///\\r\\n    shininess:f32,\\r\\n    specularPower:f32,\\r\\n    specularColor:vec3<f32>,\\r\\n)-> vec3<f32>{\\r\\n    //TODO specular, etc...\\r\\n    var lightPosition:vec3<f32> = light.position;\\r\\n    var vertexPosition2:vec3<f32> = vertexPosition.xyz;\\r\\n    var lightConstant:f32 = 1.0f;\\r\\n    var lightLinear:f32 = 0.4f;\\r\\n    var lightQuadratic:f32 = 0.07f;\\r\\n\\r\\n    var direction:vec3<f32>;\\r\\n    var lightDot:f32 ;\\r\\n    var radius:f32 = light.radius ;\\r\\n    var intensity:f32 = light.intensity ;\\r\\n    direction = normalize(-lightPosition + vertexPosition2);\\r\\n    lightDot = ((dot(normal,-direction)));\\r\\n    //\\r\\n    var distance:f32 = (length( -lightPosition + vertexPosition2) );\\r\\n    var lp:vec3<f32> ;\\r\\n    var ls:vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\\r\\n    if(radius> distance){\\r\\n        if(lightDot>0.0){\\r\\n            lp = vec3<f32>(light.color)  ;\\r\\n            var attenuation:f32 = 1.0 / (lightConstant + lightLinear * distance +\\r\\n            lightQuadratic * (distance * distance));\\r\\n            lp *= intensity;\\r\\n            lp *= lightDot;\\r\\n            lp *= attenuation;\\r\\n            var specularTextureValue:f32  = 1.0; // TODO\\r\\n            var specular:f32 = pow( max(dot(reflect(direction, normal), -direction), 0.0), shininess) * specularPower * specularTextureValue;\\r\\n            ls = specularColor * specular * light.intensity * attenuation;\\r\\n        }else{\\r\\n        }\\r\\n    }\\r\\n     return  vec3<f32>(lp) + ls;\\r\\n}\\r\\n\\r\\nfn calcLights(\\r\\n    systemLightUniforms : SystemLightUniforms,\\r\\n    position : vec4<f32>,\\r\\n    normal : vec3<f32>,\\r\\n    vertexPosition : vec3<f32>,\\r\\n    ///\\r\\n    shininess:f32,\\r\\n    specularPower:f32,\\r\\n    specularColor:vec3<f32>,\\r\\n    )->vec3<f32>{\\r\\n        var lightColorSum   = vec3<f32>(0.0,0.0,0.0);\\r\\n        // directional light\\r\\n        for (var i = 0u; i<u32(systemLightUniforms.directionalLightCount[0]); i = i + 1u) {\\r\\n            lightColorSum = lightColorSum + calcDirectionalLight(\\r\\n                systemLightUniforms.directionalLight[i],\\r\\n                normal,\\r\\n                shininess,\\r\\n                specularPower,\\r\\n                specularColor\\r\\n                );\\r\\n        }\\r\\n        // point light\\r\\n        let clusterIndex = getPointLightClusterIndex(position);\\r\\n        let lightOffset  = pointLight_clusterLightGroup.lights[clusterIndex].offset;\\r\\n        let lightCount:u32   = pointLight_clusterLightGroup.lights[clusterIndex].count;\\r\\n        for (var lightIndex = 0u; lightIndex < lightCount; lightIndex = lightIndex + 1u) {\\r\\n            let i = pointLight_clusterLightGroup.indices[lightOffset + lightIndex];\\r\\n            lightColorSum = lightColorSum + (calcPointLight(\\r\\n                pointLightList.lights[i],\\r\\n                normal,\\r\\n                vertexPosition,\\r\\n                shininess,\\r\\n                specularPower,\\r\\n                specularColor\\r\\n            ));\\r\\n        }\\r\\n        // ambient light\\r\\n        var ALIntensity:f32 = systemLightUniforms.ambientLight.a;\\r\\n        var ALColor:vec3<f32> = (systemLightUniforms.ambientLight.rgb) * ALIntensity;\\r\\n        lightColorSum = ALColor + lightColorSum;\\r\\n        return lightColorSum;\\r\\n    }\\r\\n\";","export default \"struct SystemUniforms {\\r\\n  projectionMatrix : mat4x4<f32>,\\r\\n  inverseProjectionMatrix: mat4x4<f32>,\\r\\n  cameraMatrix: mat4x4<f32>,\\r\\n  resolution: vec2<f32>,\\r\\n  nearFar: vec2<f32>,\\r\\n};\\r\\n\\r\\nconst pointLight_indicesLength:u32 = REDGPU_DEFINE_MAX_LIGHTS_PER_CLUSTER * REDGPU_DEFINE_TOTAL_TILES;\\r\\nconst pointLight_tileCount = vec3<u32>(REDGPU_DEFINE_TILE_COUNT_Xu, REDGPU_DEFINE_TILE_COUNT_Yu, REDGPU_DEFINE_TILE_COUNT_Zu);\\r\\n\\r\\nstruct PointLight_ClusterLights  {\\r\\n    offset : u32,\\r\\n    count : u32\\r\\n};\\r\\nstruct PointLight_ClusterLightsGroup {\\r\\n    offset : atomic<u32>,\\r\\n    lights : array<PointLight_ClusterLights , REDGPU_DEFINE_TOTAL_TILES>,\\r\\n    indices : array<u32, pointLight_indicesLength>\\r\\n};\\r\\nstruct PointLight_ClusterCube {\\r\\n    minAABB : vec4<f32>,\\r\\n    maxAABB : vec4<f32>\\r\\n  };\\r\\nstruct PointLight_Clusters {\\r\\n    cubeList : array<PointLight_ClusterCube, REDGPU_DEFINE_TOTAL_TILES>\\r\\n};\\r\\n\\r\\nfn linearDepth(depthSample : f32) -> f32 {\\r\\n    return systemUniforms.nearFar.y*systemUniforms.nearFar.x / fma(depthSample, systemUniforms.nearFar.x-systemUniforms.nearFar.y, systemUniforms.nearFar.y);\\r\\n}\\r\\nfn getPointLightClusterIndex(fragCoord : vec4<f32>) -> u32 {\\r\\n    let tile = getPointLightTile(fragCoord);\\r\\n    return tile.x +\\r\\n           tile.y * pointLight_tileCount.x +\\r\\n           tile.z * pointLight_tileCount.x * pointLight_tileCount.y;\\r\\n\\r\\n}\\r\\nfn getPointLightTile(fragCoord : vec4<f32>) -> vec3<u32> {\\r\\n    // TODO: scale and bias calculation can be moved outside the shader to save cycles.\\r\\n    let sliceScale = f32(pointLight_tileCount.z) / log2(systemUniforms.nearFar.y / systemUniforms.nearFar.x);\\r\\n    let sliceBias = -(f32(pointLight_tileCount.z) * log2(systemUniforms.nearFar.x) / log2(systemUniforms.nearFar.y / systemUniforms.nearFar.x));\\r\\n    let zTile = u32(max(log2(linearDepth(fragCoord.z)) * sliceScale + sliceBias, 0.0));\\r\\n    return vec3<u32>(u32(fragCoord.x / (systemUniforms.resolution.x / f32(pointLight_tileCount.x))),\\r\\n                     u32(fragCoord.y / (systemUniforms.resolution.y / f32(pointLight_tileCount.y))),\\r\\n                     zTile);\\r\\n}\\r\\n\\r\\nstruct PointLight {\\r\\n    position : vec3<f32>,\\r\\n    radius : f32,\\r\\n    color : vec3<f32>,\\r\\n    intensity : f32\\r\\n};\\r\\nstruct PointLightList {\\r\\n    count:vec4<f32>,\\r\\n    lights : array<PointLight>\\r\\n};\\r\\n\\r\\n@group(0) @binding(0) var<uniform> systemUniforms : SystemUniforms;\\r\\n@group(0) @binding(2) var<storage> pointLightList : PointLightList;\\r\\n@group(0) @binding(3) var<storage, read_write> pointLight_clusterLightGroup : PointLight_ClusterLightsGroup;\\r\\n\";","export default \"// define Struct\\r\\nstruct Uniforms {\\r\\n  brightness:f32,\\r\\n  contrast : f32\\r\\n};\\r\\n@group(0) @binding(0) var<uniform> uniforms : Uniforms;\\r\\n@group(0) @binding(1) var _Sampler: sampler;\\r\\n@group(0) @binding(2) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n    var diffuseColor:vec4<f32> = textureSample(_Texture,_Sampler, uv);\\r\\n\\r\\n\\r\\n    var t0:f32;\\r\\n    if (uniforms.contrast > 0.0) {\\r\\n        t0 = (1.0 - uniforms.contrast);\\r\\n        diffuseColor = vec4<f32>(\\r\\n            diffuseColor.r + (diffuseColor.r - 0.5) / t0 + 0.5,\\r\\n            diffuseColor.g + (diffuseColor.g - 0.5) / t0 + 0.5,\\r\\n            diffuseColor.b + (diffuseColor.b - 0.5) / t0 + 0.5,\\r\\n            diffuseColor.a\\r\\n        );\\r\\n    } else {\\r\\n        t0 = (1.0 + uniforms.contrast);\\r\\n        diffuseColor = vec4<f32>(\\r\\n            diffuseColor.r + (diffuseColor.r - 0.5) * t0 + 0.5,\\r\\n            diffuseColor.g + (diffuseColor.g - 0.5) * t0 + 0.5,\\r\\n            diffuseColor.b + (diffuseColor.b - 0.5) * t0 + 0.5,\\r\\n            diffuseColor.a\\r\\n        );\\r\\n    }\\r\\n    diffuseColor.r += uniforms.brightness;\\r\\n    diffuseColor.g += uniforms.brightness;\\r\\n    diffuseColor.b += uniforms.brightness;\\r\\n  return diffuseColor;\\r\\n}\\r\\n\";","export default \"@group(0) @binding(0) var _Sampler: sampler;\\r\\n@group(0) @binding(1) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n  let diffuseColor:vec4<f32> = textureSample(_Texture,_Sampler, uv);\\r\\n  let gray:f32 = (diffuseColor.r  + diffuseColor.g + diffuseColor.b)/3.0;\\r\\n  return vec4<f32>(gray,gray,gray, diffuseColor.a);\\r\\n}\\r\\n\";","export default \"// define Struct\\r\\nstruct Uniforms {\\r\\n  hue : f32,\\r\\n  saturation:f32\\r\\n};\\r\\n@group(0) @binding(0) var<uniform> uniforms : Uniforms;\\r\\n@group(0) @binding(1) var _Sampler: sampler;\\r\\n@group(0) @binding(2) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n    var diffuseColor:vec4<f32> = textureSample(_Texture,_Sampler, uv);\\r\\n\\r\\n    let angle:f32 = uniforms.hue * 3.1415926535897932384626433832795;\\r\\n    let s:f32  = sin(angle);\\r\\n    let c:f32 = cos(angle);\\r\\n    let weights:vec3<f32> = (vec3<f32>(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\r\\n    let len:f32 = length(diffuseColor.rgb);\\r\\n\\r\\n    diffuseColor = vec4<f32>(\\r\\n        dot(diffuseColor.rgb, weights.xyz),\\r\\n        dot(diffuseColor.rgb, weights.zxy),\\r\\n        dot(diffuseColor.rgb, weights.yzx),\\r\\n        diffuseColor.a\\r\\n    );\\r\\n\\r\\n    let average:f32 = (diffuseColor.r + diffuseColor.g + diffuseColor.b) / 3.0;\\r\\n    if (uniforms.saturation > 0.0) {\\r\\n        let t0:f32 = (1.0 - 1.0 / (1.001 - uniforms.saturation));\\r\\n        diffuseColor = vec4<f32>(\\r\\n           diffuseColor.r + (average - diffuseColor.r) * t0,\\r\\n           diffuseColor.g + (average - diffuseColor.g) * t0,\\r\\n           diffuseColor.b + (average - diffuseColor.b) * t0,\\r\\n           diffuseColor.a\\r\\n        );\\r\\n    } else {\\r\\n        diffuseColor = vec4<f32>(\\r\\n            diffuseColor.r + (average - diffuseColor.r) * -uniforms.saturation,\\r\\n            diffuseColor.g + (average - diffuseColor.g) * -uniforms.saturation,\\r\\n            diffuseColor.b + (average - diffuseColor.b) * -uniforms.saturation,\\r\\n            diffuseColor.a\\r\\n        );\\r\\n    }\\r\\n  return diffuseColor;\\r\\n}\\r\\n\";","export default \"@group(0) @binding(0) var _Sampler: sampler;\\r\\n@group(0) @binding(1) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n  let diffuseColor:vec4<f32> = textureSample(_Texture,_Sampler, uv);\\r\\n  return vec4<f32>(1.0 - diffuseColor.rgb, diffuseColor.a);\\r\\n}\\r\\n\";","export default \"// define Struct\\r\\nstruct Uniforms {\\r\\n  resolution:vec2<f32>,\\r\\n  width:f32,\\r\\n  height : f32\\r\\n};\\r\\n@group(0) @binding(0) var<uniform> uniforms : Uniforms;\\r\\n@group(0) @binding(1) var _Sampler: sampler;\\r\\n@group(0) @binding(2) var _Texture: texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) uv: vec2<f32>) -> @location(0) vec4<f32> {\\r\\n    let dx:f32 = 1.0/uniforms.resolution.x * uniforms.width;\\r\\n    let dy:f32 = 1.0/uniforms.resolution.y * uniforms.height;\\r\\n    let coord:vec2<f32> = vec2<f32>(\\r\\n        dx * (floor(uv.x / dx) + 0.5),\\r\\n        dy * (floor(uv.y / dy) + 0.5)\\r\\n    );\\r\\n    var diffuseColor:vec4<f32> = textureSample(_Texture, _Sampler,coord);\\r\\n    return diffuseColor;\\r\\n}\\r\\n\";","export default \"// define Struct OutData\\r\\nstruct OutData {\\r\\n  @builtin(position) position : vec4<f32>,\\r\\n  @location(0) uv: vec2<f32>,\\r\\n};\\r\\n// define Struct InputData\\r\\nstruct InputData {\\r\\n    @location(0) position : vec3<f32>,\\r\\n    @location(1) uv : vec2<f32>,\\r\\n};\\r\\n@vertex\\r\\n\\r\\nfn main(inputData : InputData) -> OutData {\\r\\n  var outData : OutData;\\r\\n  outData.position = vec4<f32>(inputData.position,1.0);\\r\\n  outData.uv = inputData.uv;\\r\\n  return outData;\\r\\n}\\r\\n\";","export default \"@binding(0) @group(0) var imgSampler : sampler;\\r\\n@binding(1) @group(0) var img : texture_2d<f32>;\\r\\n@fragment\\r\\nfn main(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {\\r\\n    return textureSample(img, imgSampler, texCoord);\\r\\n}\";","export default \"var<private> pos:array<vec2<f32>,4> = array<vec2<f32>,4>(\\r\\n    vec2<f32>(-1.0, 1.0), vec2<f32>(1.0, 1.0),\\r\\n    vec2<f32>(-1.0, -1.0), vec2<f32>(1.0, -1.0)\\r\\n);\\r\\n\\r\\nstruct VertexOutput {\\r\\n    @builtin(position) position : vec4<f32>,\\r\\n    @location(0) texCoord : vec2<f32>,\\r\\n};\\r\\n\\r\\n@vertex\\r\\nfn main(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {\\r\\n    var output : VertexOutput;\\r\\n    output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);\\r\\n    output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);\\r\\n    return output;\\r\\n}\\r\\n\";","export default \"@fragment\\r\\nfn main() -> @location(0) vec4<f32> {\\r\\n  return vec4<f32>(1.0, 0.0, 0.0, 0.5);\\r\\n}\";","export default \"@vertex\\r\\nfn main(\\r\\n  @builtin(vertex_index) VertexIndex : u32\\r\\n) -> @builtin(position) vec4<f32> {\\r\\n  var pos = array<vec2<f32>, 6>(\\r\\n    vec2<f32>(-1, 1),\\r\\n    vec2<f32>(-1, -1),\\r\\n    vec2<f32>(1, 1),\\r\\n    //\\r\\n   vec2<f32>(1, 1),\\r\\n   vec2<f32>(1, -1),\\r\\n   vec2<f32>(-1, -1),\\r\\n  );\\r\\n\\r\\n  return vec4<f32>(pos[VertexIndex], 0.0, 1.0);\\r\\n}\\r\\n\";","import BaseObject3DTransform from \"../object3d/base/BaseObject3DTransform\";\r\nimport CONST_DIRTY_TRANSFORM_STATE from \"../object3d/base/CONST_DIRTY_TRANSFORM_STATE\";\r\nimport throwError from \"../util/errorFunc/throwError\";\r\nimport getConstructorName from \"../util/getConstructorName\";\r\nimport { mat4 } from \"../util/gl-matrix\";\r\nclass BasicCamera extends BaseObject3DTransform {\r\n    static MODE_3D = '3d';\r\n    static MODE_2D = '2d';\r\n    #mode = BasicCamera.MODE_3D;\r\n    #farClipping = 100000;\r\n    #nearClipping = 0.1;\r\n    #fov = 60;\r\n    constructor(x = 0, y = 0, z = 10, mode = BasicCamera.MODE_3D) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.mode = mode;\r\n    }\r\n    get farClipping() {\r\n        return this.#farClipping;\r\n    }\r\n    set farClipping(value) {\r\n        this.#farClipping = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get nearClipping() {\r\n        return this.#nearClipping;\r\n    }\r\n    set nearClipping(value) {\r\n        this.#nearClipping = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get fov() {\r\n        return this.#fov;\r\n    }\r\n    set fov(value) {\r\n        this.#fov = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get mode() {\r\n        return this.#mode;\r\n    }\r\n    set mode(value) {\r\n        if (value === BasicCamera.MODE_2D || value === BasicCamera.MODE_3D)\r\n            this.#mode = value;\r\n        else\r\n            throwError(getConstructorName(value), 'only allow BasicCamera.MODE_2D or BasicCamera.MODE_3D');\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    update() {\r\n        const eye = [this.x, this.y, this.z];\r\n        const center = [0, 0, 0];\r\n        const up = [0, 1, 0];\r\n        mat4.identity(this.matrix);\r\n        mat4.translate(this.matrix, this.matrix, [this.x, this.y, this.z]);\r\n        mat4.rotateX(this.matrix, this.matrix, this.rotationX);\r\n        mat4.rotateY(this.matrix, this.matrix, this.rotationY);\r\n        mat4.rotateZ(this.matrix, this.matrix, this.rotationZ);\r\n        mat4.lookAt(this.matrix, eye, center, up);\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.NONE;\r\n    }\r\n}\r\nexport default BasicCamera;\r\n","import BasicCamera from \"./BasicCamera\";\r\nexport { BasicCamera };\r\n","import View from \"../main/view/View\";\r\nimport RedGPUContextResourceManager from \"../resource/resourceManager/RedGPUContextResourceManager\";\r\nimport throwError from \"../util/errorFunc/throwError\";\r\nimport throwErrorInstanceOf from \"../util/errorFunc/throwErrorInstanceOf\";\r\nimport getConstructorName from \"../util/getConstructorName\";\r\nimport RedGPUContextDebugger from \"./debugger/RedGPUContextDebugger\";\r\n/**\r\n * RedGPU.initialize 초기화 이후 성공했을때 생성되는 Context\r\n */\r\nclass RedGPUContext {\r\n    dirtyMultiSample = false;\r\n    // --------------------------------------------------\r\n    #gpuAdapter;\r\n    #gpuContext;\r\n    #gpuDevice;\r\n    #configurationDescription;\r\n    #alphaMode;\r\n    // --------------------------------------------------\r\n    #debugger;\r\n    #useMultiSample = true;\r\n    #resourceManager;\r\n    #htmlCanvas;\r\n    // --------------------------------------------------\r\n    #renderScale = 1;\r\n    #width = '100%';\r\n    #height = '100%';\r\n    #pixelSizeInt = { width: 0, height: 0 };\r\n    // --------------------------------------------------\r\n    #viewList = [];\r\n    /**\r\n     * @param {HTMLCanvasElement} htmlCanvas\r\n     * @param {GPUAdapter} gpuAdapter\r\n     * @param {GPUDevice} gpuDevice\r\n     * @param {GPUCanvasContext} gpuContext\r\n     * @param {GPUCanvasAlphaMode=} alphaMode\r\n     */\r\n    constructor(htmlCanvas, gpuAdapter, gpuDevice, gpuContext, alphaMode = 'premultiplied') {\r\n        this.#gpuAdapter = gpuAdapter;\r\n        this.#gpuDevice = gpuDevice;\r\n        this.#gpuContext = gpuContext;\r\n        this.#debugger = new RedGPUContextDebugger(this);\r\n        this.#resourceManager = new RedGPUContextResourceManager(this);\r\n        this.#alphaMode = alphaMode;\r\n        this.#htmlCanvas = htmlCanvas;\r\n        window.addEventListener('resize', this.#resize);\r\n        this.#configure();\r\n        this.#resize();\r\n    }\r\n    /**\r\n     * @category gpu\r\n     */\r\n    get gpuAdapter() {\r\n        return this.#gpuAdapter;\r\n    }\r\n    /**\r\n     * @category gpu\r\n     */\r\n    get gpuContext() {\r\n        return this.#gpuContext;\r\n    }\r\n    /**\r\n     * @category gpu\r\n     */\r\n    get gpuDevice() {\r\n        return this.#gpuDevice;\r\n    }\r\n    /**\r\n     * @category gpu\r\n     */\r\n    get configurationDescription() {\r\n        return this.#configurationDescription;\r\n    }\r\n    /**\r\n     * @category gpu\r\n     */\r\n    get alphaMode() {\r\n        return this.#alphaMode;\r\n    }\r\n    get debugger() {\r\n        return this.#debugger;\r\n    }\r\n    get useMultiSample() {\r\n        return this.#useMultiSample;\r\n    }\r\n    set useMultiSample(value) {\r\n        if (this.#useMultiSample !== value)\r\n            this.dirtyMultiSample = true;\r\n        this.#useMultiSample = value;\r\n    }\r\n    get resourceManager() {\r\n        return this.#resourceManager;\r\n    }\r\n    get htmlCanvas() {\r\n        return this.#htmlCanvas;\r\n    }\r\n    get renderScale() {\r\n        return this.#renderScale;\r\n    }\r\n    set renderScale(value) {\r\n        if (value <= 0)\r\n            value = 0.01;\r\n        this.#renderScale = value;\r\n        this.setSize();\r\n    }\r\n    /**\r\n     * @category size\r\n     * @defaultValue 100%\r\n     */\r\n    get width() {\r\n        return this.#width;\r\n    }\r\n    /**\r\n     * @category size\r\n     * @defaultValue 100%\r\n     */\r\n    get height() {\r\n        return this.#height;\r\n    }\r\n    /**\r\n     * @category size\r\n     */\r\n    get pixelSizeInt() {\r\n        return this.#pixelSizeInt;\r\n    }\r\n    get label() {\r\n        return this.#gpuDevice.label;\r\n    }\r\n    /**\r\n     * 소유한 View List 반환\r\n     * @readonly\r\n     */\r\n    get viewList() {\r\n        return this.#viewList;\r\n    }\r\n    /**\r\n     * destroy WebGPU device\r\n     * @example\r\n     * (RedGPUContext Instance).destroy()\r\n     */\r\n    destroy() {\r\n        this.#gpuContext.unconfigure();\r\n        this.#gpuDevice.destroy();\r\n    }\r\n    /**\r\n     * addView\r\n     * RedGPU에서 렌더링할 View를 추가합니다.\r\n     *\r\n     * @example\r\n     * (RedGPUContext Instance).addView(View Instance)\r\n     *\r\n     * @category view management\r\n     * @param view\r\n     */\r\n    addView(view) {\r\n        if (!(view instanceof View))\r\n            throwErrorInstanceOf(this, 'view', 'View');\r\n        this.#viewList.push(view);\r\n        this.#setDirtyMultiSample();\r\n    }\r\n    /**\r\n     * TODO addViewAt\r\n     * @param view\r\n     * @param index\r\n     */\r\n    addViewAt(view, index) {\r\n        this.#setDirtyMultiSample();\r\n    }\r\n    /**\r\n     * RedGPU에서 View를 제거합니다.\r\n     *\r\n     * @example\r\n     * (RedGPUContext Instance).removeView(View Instance)\r\n     * @category view management\r\n     * @param view\r\n     */\r\n    removeView(view) {\r\n        if (!(view instanceof View))\r\n            throwErrorInstanceOf(this, 'view', 'View');\r\n        const index = this.#viewList.indexOf(view);\r\n        if (index > -1)\r\n            this.#viewList.splice(index, 1);\r\n        else {\r\n            console.log('viewList 에 존재하지 않는 view 입니다.');\r\n        }\r\n        this.#setDirtyMultiSample();\r\n    }\r\n    /**\r\n     * TODO removeViewAt\r\n     * @param label\r\n     */\r\n    removeViewAt(index) {\r\n        //TODO\r\n        this.#setDirtyMultiSample();\r\n    }\r\n    /**\r\n     * TODO removeViewByLabel\r\n     * @param label\r\n     */\r\n    removeViewByLabel(label) {\r\n        //TODO\r\n        this.#setDirtyMultiSample();\r\n    }\r\n    /**\r\n     * setSize\r\n     * @param w\r\n     * @param h\r\n     */\r\n    setSize(w = this.#width, h = this.#height) {\r\n        this.#width = w;\r\n        this.#height = h;\r\n        let tW, tH;\r\n        let rect = (this.#htmlCanvas.parentNode || document.body)['getBoundingClientRect']();\r\n        // const devicePixelRatio = window['devicePixelRatio'] || 1;\r\n        tW = this.#checkAbleValue('width', w, rect);\r\n        tH = this.#checkAbleValue('height', h, rect);\r\n        this.#htmlCanvas.width = tW * this.#renderScale;\r\n        this.#htmlCanvas.height = tH * this.#renderScale;\r\n        this.#htmlCanvas.style.width = tW + 'px';\r\n        this.#htmlCanvas.style.height = tH + 'px';\r\n        this.#pixelSizeInt.width = Math.floor(tW * this.#renderScale);\r\n        this.#pixelSizeInt.height = Math.floor(tH * this.#renderScale);\r\n        this.viewList.forEach(view => {\r\n            view.setSize();\r\n            // redView.setLocation();\r\n        });\r\n        console.log(`${getConstructorName(this)}.setSize - input : ${w},${h} / result : ${tW}, ${tH}`);\r\n    }\r\n    /**\r\n     * gpuContext configure method\r\n     * @private\r\n     */\r\n    #configure() {\r\n        const presentationFormat = navigator.gpu.getPreferredCanvasFormat();\r\n        this.#configurationDescription = {\r\n            device: this.#gpuDevice,\r\n            format: presentationFormat,\r\n            alphaMode: this.#alphaMode\r\n        };\r\n        console.log(`${getConstructorName(this)}.configurationDescription`, this.#configurationDescription);\r\n        this.#gpuContext.configure(this.#configurationDescription);\r\n    }\r\n    /**\r\n     * window resize handler\r\n     * @private\r\n     */\r\n    #resize = () => {\r\n        this.setSize();\r\n    };\r\n    /**\r\n     * parameter value verification of setsize method.\r\n     * @param key\r\n     * @param value\r\n     * @param rect\r\n     * @private\r\n     */\r\n    #checkAbleValue(key, value, rect) {\r\n        let result;\r\n        const fireError = () => {\r\n            this.setSize(0, 0);\r\n            throwError(`${value}는 ${key}값으로 사용 될수 없습니다.`);\r\n        };\r\n        switch (typeof value) {\r\n            case 'number':\r\n                if (value >= 0) {\r\n                    result = value;\r\n                    break;\r\n                }\r\n                fireError();\r\n                break;\r\n            case 'string':\r\n                if (value.includes('%')) {\r\n                    result = Math.floor(rect[key] * (+value.replace('%', '')) / 100);\r\n                    break;\r\n                }\r\n                if (value.includes('px')) {\r\n                    result = +value.replace('px', '');\r\n                    break;\r\n                }\r\n                fireError();\r\n                break;\r\n            default:\r\n                fireError();\r\n                break;\r\n        }\r\n        if (result < 0)\r\n            result = 0;\r\n        return result;\r\n    }\r\n    ;\r\n    #setDirtyMultiSample() {\r\n        this.dirtyMultiSample = true;\r\n        window.dispatchEvent(new Event('changeViewList'));\r\n    }\r\n}\r\nexport default RedGPUContext;\r\n","import throwErrorInstanceOf from \"../util/errorFunc/throwErrorInstanceOf\";\r\nimport RedGPUContext from \"./RedGPUContext\";\r\nclass RedGPUContextBase {\r\n    #redGPUContext;\r\n    constructor(redGPUContext) {\r\n        if (!(redGPUContext instanceof RedGPUContext))\r\n            throwErrorInstanceOf(this, 'redGPUContext', 'RedGPUContext');\r\n        this.#redGPUContext = redGPUContext;\r\n    }\r\n    get redGPUContext() {\r\n        return this.#redGPUContext;\r\n    }\r\n}\r\nexport default RedGPUContextBase;\r\n","import * as dat from \"dat.gui\";\r\nimport RedGPUContextBase from \"../RedGPUContextBase\";\r\nimport setActiveDebugger from \"./category/systemStatePanels/setActiveDebugger\";\r\nimport setStatePanels from \"./category/systemStatePanels/setStatePanels\";\r\nimport debuggerRenderResourceManager from \"./draw/debuggerRenderResourceManager\";\r\nimport debuggerRenderViewList from \"./draw/debuggerRenderViewList\";\r\nimport gui_setItem from \"./funcs/gui_setItem\";\r\nimport gui_setItemBooleanNameSize from \"./funcs/gui_setItemBooleanNameSize\";\r\nimport gui_setItemDisableInput from \"./funcs/gui_setItemDisableInput\";\r\nclass RedGPUContextDebugger extends RedGPUContextBase {\r\n    __gui_setItemDisableInput = gui_setItemDisableInput;\r\n    __gui_setItemBooleanNameSize = gui_setItemBooleanNameSize;\r\n    __gui_setItem = gui_setItem;\r\n    #gui;\r\n    #activeViewDebugger = false;\r\n    #activeResourceDebugger = false;\r\n    #useDebugger = false;\r\n    #__temp_HD_ViewList;\r\n    #userDebugSet;\r\n    #adapterInfo = {};\r\n    #dat = dat;\r\n    constructor(context) {\r\n        super(context);\r\n        this.#update();\r\n    }\r\n    get activeViewDebugger() {\r\n        return this.#activeViewDebugger;\r\n    }\r\n    set activeViewDebugger(value) {\r\n        this.#activeViewDebugger = value;\r\n        let debugView = document.getElementById('___debugView___');\r\n        if (value) {\r\n            if (!debugView) {\r\n                debugView = document.createElement('div');\r\n                debugView.setAttribute('id', '___debugView___');\r\n                debugView.style.cssText = `\r\n                        position: absolute;\r\n                        max-height: 100%;\r\n                        bottom: 0;\r\n                        left:0;\r\n                        box-sizing: border-box;\r\n                        background: rgba(0,0,0,0.5);\r\n                        color : #fff;\r\n                        font-size: 10px;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        gap : 4px;\r\n                        overflow: hidden;\r\n                        overflow-y:auto;\r\n                    `;\r\n                document.body.appendChild(debugView);\r\n            }\r\n        }\r\n        else {\r\n            if (debugView)\r\n                document.body.removeChild(debugView);\r\n        }\r\n    }\r\n    get activeResourceDebugger() {\r\n        return this.#activeResourceDebugger;\r\n    }\r\n    set activeResourceDebugger(value) {\r\n        this.#activeResourceDebugger = value;\r\n        let debugResource = document.getElementById('___debugResource___');\r\n        if (value) {\r\n            {\r\n                if (!debugResource) {\r\n                    debugResource = document.createElement('div');\r\n                    debugResource.setAttribute('id', '___debugResource___');\r\n                    debugResource.style.cssText = `\r\n                         position: absolute;\r\n                    bottom: 0;\r\n                    right: 0;\r\n                    padding:16px;\r\n                    background: rgba(0,0,0,0.5);\r\n                    color : #fff;\r\n                    font-size: 10px;\r\n                    overflow-y: auto;\r\n                    `;\r\n                    document.body.appendChild(debugResource);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (debugResource)\r\n                document.body.removeChild(debugResource);\r\n        }\r\n    }\r\n    get useDebugger() {\r\n        return this.#useDebugger;\r\n    }\r\n    set useDebugger(value) {\r\n        const redGPUContext = this.redGPUContext;\r\n        this.#useDebugger = value;\r\n        if (value) {\r\n            if (!this.#gui) {\r\n                console.log(redGPUContext);\r\n                const gui = this.#gui = new dat.GUI();\r\n                this.#userDebugSet?.(gui, redGPUContext, this);\r\n                setActiveDebugger(gui, this);\r\n                setStatePanels(gui, redGPUContext, this, !this.userDebugSet);\r\n                this.#gui.show();\r\n            }\r\n        }\r\n        else {\r\n            this.temp_HD_ViewList = null;\r\n            this.#gui.hide();\r\n        }\r\n        /////\r\n    }\r\n    get userDebugSet() {\r\n        return this.#userDebugSet;\r\n    }\r\n    set userDebugSet(value) {\r\n        this.#userDebugSet = value;\r\n        if (this.#gui) {\r\n            this.temp_HD_ViewList = null;\r\n            this.#gui.destroy();\r\n            this.#gui = null;\r\n        }\r\n        if (value && this.#useDebugger)\r\n            this.useDebugger = true;\r\n    }\r\n    set temp_HD_ViewList(value) {\r\n        if (this.#__temp_HD_ViewList)\r\n            window.removeEventListener('changeViewList', this.#__temp_HD_ViewList);\r\n        this.#__temp_HD_ViewList = value;\r\n    }\r\n    get adapterInfo() {\r\n        return this.#adapterInfo;\r\n    }\r\n    get limit() {\r\n        return this.redGPUContext.gpuAdapter.limits;\r\n    }\r\n    get dat() {\r\n        return this.#dat;\r\n    }\r\n    render() {\r\n        if (!this.#useDebugger)\r\n            return;\r\n        const redGPUContext = this.redGPUContext;\r\n        if (this.#activeViewDebugger) {\r\n            debuggerRenderViewList(redGPUContext.viewList);\r\n        }\r\n        if (this.#activeResourceDebugger) {\r\n            debuggerRenderResourceManager(redGPUContext.resourceManager);\r\n        }\r\n    }\r\n    #update() {\r\n        this.redGPUContext.gpuAdapter.requestAdapterInfo().then(v => {\r\n            console.log('requestAdapterInfo', v);\r\n            this.#adapterInfo = v;\r\n        });\r\n    }\r\n}\r\nexport default RedGPUContextDebugger;\r\n","import gui_setItemBooleanNameSize from \"../../funcs/gui_setItemBooleanNameSize\";\r\nconst setActiveDebugger = (gui, targetDebugger) => {\r\n    const activeDebuggerFolder = gui.addFolder('Active Debugger');\r\n    gui_setItemBooleanNameSize(activeDebuggerFolder.add(targetDebugger, 'activeViewDebugger'));\r\n    gui_setItemBooleanNameSize(activeDebuggerFolder.add(targetDebugger, 'activeResourceDebugger'));\r\n    activeDebuggerFolder.open();\r\n};\r\nexport default setActiveDebugger;\r\n","import gui_setItemDisableInput from \"../../funcs/gui_setItemDisableInput\";\r\nconst setAdapterInfo = (gui, targetDebugger) => {\r\n    const { adapterInfo } = targetDebugger;\r\n    const tFolder = gui.addFolder('Adapter Info');\r\n    tFolder.open();\r\n    for (const key in adapterInfo)\r\n        gui_setItemDisableInput(tFolder.add(adapterInfo, key));\r\n};\r\nexport default setAdapterInfo;\r\n","import { PassLightClustersHelper } from \"../../../../light/pointLightCluster\";\r\nimport gui_setItemDisableInput from \"../../funcs/gui_setItemDisableInput\";\r\nconst setLightClusterInfo = (gui) => {\r\n    const tFolder = gui.addFolder('light Cluster Info');\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'TILE_COUNT_X'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'TILE_COUNT_Y'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'TILE_COUNT_Z'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'WORKGROUP_SIZE_X'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'WORKGROUP_SIZE_Y'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'WORKGROUP_SIZE_Z'));\r\n    gui_setItemDisableInput(tFolder.add(PassLightClustersHelper, 'MAX_POINT_LIGHTS_PER_CLUSTER'));\r\n};\r\nexport default setLightClusterInfo;\r\n","import gui_setItem from \"../../funcs/gui_setItem\";\r\nimport gui_setItemDisableInput from \"../../funcs/gui_setItemDisableInput\";\r\nconst setRedGPUContext = (gui, redGPUContext) => {\r\n    const redGPUContextFolder = gui.addFolder('redGPUContext');\r\n    {\r\n        const configurationDescriptionFolder = redGPUContextFolder.addFolder('configurationDescription');\r\n        const t0 = redGPUContext.configurationDescription;\r\n        for (const key in t0) {\r\n            if (typeof t0[key] === 'string')\r\n                gui_setItemDisableInput(configurationDescriptionFolder.add(t0, key));\r\n        }\r\n    }\r\n    gui_setItem(redGPUContextFolder.add(redGPUContext, 'renderScale', 0.01, 1, 0.01));\r\n    gui_setItem(redGPUContextFolder.add(redGPUContext, 'useMultiSample'));\r\n    // size\r\n    gui_setItemDisableInput(redGPUContextFolder.add(redGPUContext, 'width'));\r\n    gui_setItemDisableInput(redGPUContextFolder.add(redGPUContext, 'height'));\r\n    gui_setItemDisableInput(redGPUContextFolder.add(redGPUContext.pixelSizeInt, 'width').name('pixelSizeInt.width'));\r\n    gui_setItemDisableInput(redGPUContextFolder.add(redGPUContext.pixelSizeInt, 'height').name('pixelSizeInt.height'));\r\n    redGPUContextFolder.open();\r\n};\r\nexport default setRedGPUContext;\r\n","import setAdapterInfo from \"./setAdapterInfo\";\r\nimport setLightClusterInfo from \"./setLightClusterInfo\";\r\nimport setRedGPUContext from \"./setRedGPUContext\";\r\nconst setStatePanels = (gui, redGPUContext, targetDebugger, openYn = true) => {\r\n    const tFolder = gui.addFolder('System State Panel');\r\n    if (openYn)\r\n        tFolder.open();\r\n    setAdapterInfo(tFolder, targetDebugger);\r\n    setRedGPUContext(tFolder, redGPUContext);\r\n    setLightClusterInfo(tFolder);\r\n};\r\nexport default setStatePanels;\r\n","const debuggerRenderResourceManager = (resourceManager) => {\r\n    // resource debug\r\n    const debugResource = document.getElementById('___debugResource___');\r\n    const { textureTable, cubeTextureTable, samplerTable } = resourceManager;\r\n    let debugStr = '';\r\n    const map = {\r\n        textureTable,\r\n        cubeTextureTable,\r\n        samplerTable\r\n    };\r\n    const renderTitle = (title) => debugStr += `<div><b>${title}</b></div>`;\r\n    {\r\n        // samplerTable\r\n        renderTitle('samplerTable');\r\n        debugStr += `<div style=\"padding: 4px;font-size: 10px;background: rgba(0,0,0,0.5);max-width: 200px\">`;\r\n        Object.entries(samplerTable).forEach(v => {\r\n            const key = v[0];\r\n            const value = v[1];\r\n            debugStr += `\r\n                    <div>\r\n<!--                        <b>${key}</b>-->\r\n                        <div style=\"white-space: nowrap;text-overflow: ellipsis;overflow: hidden\">\r\n                            ${value['optionString']}\r\n                        </div>\r\n                    </div>`;\r\n        });\r\n        debugStr += `</div>`;\r\n        debugStr += `<div style=\"margin:6px 0px;height:1px;background: rgba(255,255,255,0.2)\"></div>`;\r\n    }\r\n    {\r\n        // textureTable\r\n        renderTitle('textureTable');\r\n        debugStr += `<div style=\"display:flex;flex-direction:column;gap:4px;padding: 4px;font-size: 10px;background: rgba(0,0,0,0.5);max-width: 200px\">`;\r\n        Object.entries(textureTable).forEach(v => {\r\n            const key = v[0];\r\n            const value = v[1];\r\n            const { resource, textureView } = value;\r\n            const info = {\r\n                src: resource.src,\r\n                // label: textureView?.label,\r\n                size: resource.imgBitmap ? `${resource.imgBitmap?.width} x ${resource.imgBitmap?.height}` : '-'\r\n            };\r\n            debugStr += '<div style=\"display:flex;justify-content:space-between;gap:4px;align-category:center;white-space: nowrap;text-overflow: ellipsis;overflow: hidden\">';\r\n            debugStr += `<div style=\"background:${textureView?.label ? '#00ff00' : '#ff0000'};border-radius: 50%;min-width: 10px;height:10px\"></div>`;\r\n            for (const key in info) {\r\n                const value = info[key];\r\n                const style = key === 'src' ? 'white-space: nowrap;text-overflow: ellipsis;overflow: hidden' : 'line-height:1;color:#000;background : rgba(255,255,255,1);padding:2px 4px 3px;border-radius:4px';\r\n                if (value)\r\n                    debugStr += `<span style=\"${style}\">${key} : ${value}</span>`;\r\n            }\r\n            debugStr += '</div>';\r\n        });\r\n        debugStr += `</div>`;\r\n        debugStr += `<div style=\"margin:6px 0px;height:1px;background: rgba(255,255,255,0.2)\"></div>`;\r\n    }\r\n    {\r\n        // textureTable\r\n        renderTitle('cubeTextureTable');\r\n        debugStr += `<div style=\"padding: 4px;font-size: 10px;background: rgba(0,0,0,0.5);max-width: 200px\">`;\r\n        Object.entries(cubeTextureTable).forEach(v => {\r\n            const key = v[0];\r\n            const value = v[1];\r\n            const { resource, textureView } = value;\r\n            const sizeList = [];\r\n            if (resource.imgBitmapList) {\r\n                resource.imgBitmapList.forEach(v => {\r\n                    const t0 = `${v.width} x ${v.height}`;\r\n                    if (sizeList.indexOf(t0) === -1)\r\n                        sizeList.push(t0);\r\n                });\r\n            }\r\n            const info = {\r\n                src: resource.srcList,\r\n                // label: textureView?.label,\r\n                size: resource.imgBitmapList ? sizeList.toString() : '-'\r\n            };\r\n            debugStr += '<div style=\"display:flex;justify-content:space-between;gap:4px;align-category:center;white-space: nowrap;text-overflow: ellipsis;overflow: hidden\">';\r\n            debugStr += `<div style=\"background:${textureView?.label ? '#00ff00' : '#ff0000'};border-radius: 50%;min-width: 10px;height:10px\"></div>`;\r\n            for (const key in info) {\r\n                const value = info[key];\r\n                const style = key === 'src' ? 'white-space: nowrap;text-overflow: ellipsis;overflow: hidden' : 'line-height:1;color:#000;background : rgba(255,255,255,1);padding:2px 4px 3px;border-radius:4px';\r\n                if (value)\r\n                    debugStr += `<span style=\"${style}\">${key} : ${value}</span>`;\r\n            }\r\n            debugStr += '</div>';\r\n        });\r\n        debugStr += `</div>`;\r\n        debugStr += `<div style=\"margin:6px 0px;height:1px;background: rgba(255,255,255,0.2)\"></div>`;\r\n    }\r\n    debugResource.innerHTML = debugStr;\r\n};\r\nexport default debuggerRenderResourceManager;\r\n","const debuggerRenderViewList = (viewList) => {\r\n    const debugView = document.getElementById('___debugView___');\r\n    let debugStr = '';\r\n    viewList.forEach(view => {\r\n        //TODO - 정리\r\n        let debugStr2 = '';\r\n        {\r\n            // view debug\r\n            const { viewDebugger, scene } = view;\r\n            for (const k in viewDebugger) {\r\n                const tData = viewDebugger[k];\r\n                if (typeof tData === 'string') {\r\n                    debugStr2 += `<div><b>${k} : ${tData}</b></div>`;\r\n                }\r\n                else {\r\n                    debugStr2 += `<div><b>${k}</b></div>`;\r\n                    for (const key in tData) {\r\n                        const value = tData[key];\r\n                        const fontSize = (key === 'AVG FPS' || key === 'Frame FPS' || key === 'Render PointLight') ? '14px' : '';\r\n                        const color = (key === 'AVG FPS' || key === 'Frame FPS' || key === 'Render PointLight') ? 'rgba(255,255,255,1)' : 'rgba(255,255,255,0.5)';\r\n                        debugStr2 += `<div style=\"font-size:${fontSize};color:${color}\">${key} : ${typeof value === 'number' ? (+value.toFixed(2)).toLocaleString() : value}</div>`;\r\n                    }\r\n                    debugStr2 += `<div style=\"margin:6px 0px;height:1px;background: rgba(255,255,255,0.2)\"></div>`;\r\n                }\r\n            }\r\n            //             const renderChild = target => {\r\n            //                 const {children} = target\r\n            //                 return children.map(v => {\r\n            //                     // console.log(v)\r\n            //                     return `\r\n            // <div>\r\n            // \t${v.constructor.name}\r\n            // \t<div style=\"padding-left: 10px\">\r\n            // \t\t<div>${v.geometry ? v.geometry.constructor.name : ''}</div>\r\n            // \t\t<div>${v.material?.constructor.name}</div>\r\n            // \t\t${v.children.length ? `<div style=\"padding-left: 10px\">${renderChild(v.children)}</div>` : ''}\r\n            // \t</div>\r\n            // </div>`\r\n            //                 }).flat().join('').trim()\r\n            //             }\r\n            //             // console.log(renderChild(scene))\r\n            //             //TODO\r\n            //             debugStr2 += `${renderChild(scene)}`\r\n        }\r\n        debugStr += `<div style=\"background: rgba(0,0,0,0.5);padding: 16px;\">${debugStr2}</div>`;\r\n    });\r\n    debugView.innerHTML = `${debugStr}`;\r\n};\r\nexport default debuggerRenderViewList;\r\n","const gui_setItem = (controller) => {\r\n    controller.listen();\r\n    controller.domElement.parentNode.style.cssText = 'display:flex;justify-content: space-between;';\r\n    controller.domElement.parentNode.querySelector('span').style.cssText = 'width:100%';\r\n    return controller;\r\n};\r\nexport default gui_setItem;\r\n","const gui_setItemBooleanNameSize = (controller) => {\r\n    controller.listen();\r\n    controller.domElement.parentNode.style.cssText = 'display:flex;justify-content: space-between;';\r\n    controller.domElement.parentNode.querySelector('span').style.cssText = 'width:100%';\r\n    controller.domElement.style.width = '40px';\r\n    return controller;\r\n};\r\nexport default gui_setItemBooleanNameSize;\r\n","const gui_setItemDisableInput = (controller, width, fontSize) => {\r\n    const rightModeYn = width === 'auto';\r\n    console.log(controller);\r\n    const { domElement, __input, __li } = controller;\r\n    controller.listen();\r\n    domElement.parentNode.style.cssText = 'display:flex;justify-content: space-between;';\r\n    domElement.parentNode.querySelector('span').style.cssText = `max-width:100%;width:auto;${rightModeYn ? 'overflow:initial;text-overflow:initial;' : ''}`;\r\n    domElement.style.width = rightModeYn ? '100%' : (width || '40px');\r\n    __li.style.color = '#888';\r\n    if (__input) {\r\n        __input.disabled = true;\r\n        __input.style.background = 'transparent';\r\n        __input.style.opacity = 0.75;\r\n        __input.style.fontSize = fontSize || '10px';\r\n        __input.style.textAlign = 'right';\r\n    }\r\n    return controller;\r\n};\r\nexport default gui_setItemDisableInput;\r\n","import RedGPUContext from \"./RedGPUContext\";\r\nimport RedGPUContextBase from \"./RedGPUContextBase\";\r\nexport { RedGPUContext, RedGPUContextBase };\r\n","import TypeSize from \"../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport BaseLight from \"./BaseLight\";\r\nconst bufferDefine = new UniformBufferDescriptor([\r\n    { size: TypeSize.float32x3, valueName: 'color' },\r\n    { size: TypeSize.float32, valueName: 'intensity' },\r\n]);\r\nclass AmbientLight extends BaseLight {\r\n    constructor(redGPUContext, color = 0x404040, intensity = 1) {\r\n        super(redGPUContext, bufferDefine, color, intensity);\r\n    }\r\n}\r\nexport default AmbientLight;\r\n","import RedGPUContext from \"../context/RedGPUContext\";\r\nimport BaseObject3DTransform from \"../object3d/base/BaseObject3DTransform\";\r\nimport UniformBufferFloat32 from \"../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport hexadecimalToRgb from \"../util/color/hexadecimalToRgb\";\r\nimport throwErrorInstanceOf from \"../util/errorFunc/throwErrorInstanceOf\";\r\nclass BaseLight extends BaseObject3DTransform {\r\n    // TODO - dirtyLight를 매쉬와 같이 dirtyPipeline 으로 통일 할지 결정해야함\r\n    dirtyLight = false;\r\n    #r;\r\n    #g;\r\n    #b;\r\n    #a;\r\n    #color;\r\n    #intensity;\r\n    #uniformBufferDescriptor;\r\n    #uniformBuffer;\r\n    #redGPUContext;\r\n    constructor(redGPUContext, uniformBufferDescriptor, color = 0x404040, intensity = 1) {\r\n        super();\r\n        if (!(redGPUContext instanceof RedGPUContext))\r\n            throwErrorInstanceOf(this, 'redGPUContext', 'RedGPUContext');\r\n        this.#redGPUContext = redGPUContext;\r\n        this.#uniformBufferDescriptor = uniformBufferDescriptor;\r\n        this.#uniformBuffer = new UniformBufferFloat32(this.redGPUContext, uniformBufferDescriptor);\r\n        //\r\n        this.color = color;\r\n        this.#intensity = intensity;\r\n        this.dirtyLight = true;\r\n    }\r\n    get r() {\r\n        return this.#r;\r\n    }\r\n    get g() {\r\n        return this.#g;\r\n    }\r\n    get b() {\r\n        return this.#b;\r\n    }\r\n    get a() {\r\n        return this.#a;\r\n    }\r\n    get color() {\r\n        return this.#color;\r\n    }\r\n    set color(value) {\r\n        this.#color = value;\r\n        this.dirtyLight = true;\r\n        const rgb = hexadecimalToRgb(value);\r\n        this.#r = rgb.r;\r\n        this.#g = rgb.g;\r\n        this.#b = rgb.b;\r\n        this.#a = 1;\r\n    }\r\n    get intensity() {\r\n        return this.#intensity;\r\n    }\r\n    set intensity(value) {\r\n        this.#intensity = value;\r\n        this.dirtyLight = true;\r\n    }\r\n    get uniformBufferDescriptor() {\r\n        return this.#uniformBufferDescriptor;\r\n    }\r\n    get uniformBuffer() {\r\n        return this.#uniformBuffer;\r\n    }\r\n    get redGPUContext() {\r\n        return this.#redGPUContext;\r\n    }\r\n}\r\nexport default BaseLight;\r\n","import TypeSize from \"../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport BaseLight from \"./BaseLight\";\r\nconst bufferDefine = new UniformBufferDescriptor([\r\n    { size: TypeSize.float32x3, valueName: 'color' },\r\n    { size: TypeSize.float32, valueName: 'intensity' },\r\n]);\r\nclass DirectionalLight extends BaseLight {\r\n    #targetX = 0;\r\n    #targetY = 0;\r\n    #targetZ = 0;\r\n    constructor(redGPUContext, color = 0x404040, intensity = 1) {\r\n        super(redGPUContext, bufferDefine, color, intensity);\r\n        this.x = 0;\r\n        this.y = 1;\r\n        this.z = 0;\r\n    }\r\n    get targetX() {\r\n        return this.#targetX;\r\n    }\r\n    set targetX(value) {\r\n        this.#targetX = value;\r\n    }\r\n    get targetY() {\r\n        return this.#targetY;\r\n    }\r\n    set targetY(value) {\r\n        this.#targetY = value;\r\n    }\r\n    get targetZ() {\r\n        return this.#targetZ;\r\n    }\r\n    set targetZ(value) {\r\n        this.#targetZ = value;\r\n    }\r\n    get targetPosition() {\r\n        return [this.#targetX, this.#targetY, this.#targetZ];\r\n    }\r\n    setTargetPosition(x, y, z) {\r\n        this.#targetX = x;\r\n        this.#targetY = y;\r\n        this.#targetZ = z;\r\n    }\r\n}\r\nexport default DirectionalLight;\r\n","import throwError from \"../util/errorFunc/throwError\";\r\nimport AmbientLight from \"./AmbientLight\";\r\nimport DirectionalLight from \"./DirectionalLight\";\r\nimport PointLight from \"./PointLight\";\r\nclass LightManager {\r\n    static #MAX_DIRECTIONAL_LIGHT_NUM = 3;\r\n    static #MAX_POINT_LIGHT_NUM = 512;\r\n    #ambientLight;\r\n    #directionalLightList = [];\r\n    #pointLightList = [];\r\n    constructor() {\r\n    }\r\n    static get MAX_DIRECTIONAL_LIGHT_NUM() {\r\n        return this.#MAX_DIRECTIONAL_LIGHT_NUM;\r\n    }\r\n    static get MAX_POINT_LIGHT_NUM() {\r\n        return this.#MAX_POINT_LIGHT_NUM;\r\n    }\r\n    get ambientLight() {\r\n        return this.#ambientLight;\r\n    }\r\n    get directionalLightList() {\r\n        return this.#directionalLightList;\r\n    }\r\n    get pointLightList() {\r\n        return this.#pointLightList;\r\n    }\r\n    addLight(light) {\r\n        if (light instanceof AmbientLight)\r\n            this.#ambientLight = light;\r\n        else if (light instanceof DirectionalLight) {\r\n            if (this.#directionalLightList.length === LightManager.MAX_DIRECTIONAL_LIGHT_NUM) {\r\n                throwError('MAX_DIRECTIONAL_LIGHT_NUM :', LightManager.MAX_DIRECTIONAL_LIGHT_NUM);\r\n            }\r\n            this.#directionalLightList.push(light);\r\n        }\r\n        else if (light instanceof PointLight) {\r\n            if (this.#pointLightList.length === LightManager.MAX_POINT_LIGHT_NUM) {\r\n                throwError('MAX_POINT_LIGHT_NUM :', LightManager.MAX_POINT_LIGHT_NUM);\r\n            }\r\n            this.#pointLightList.push(light);\r\n        }\r\n    }\r\n}\r\nexport default LightManager;\r\n","import TypeSize from \"../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport BaseLight from \"./BaseLight\";\r\nconst bufferDefine = new UniformBufferDescriptor([\r\n    { size: TypeSize.float32x3, valueName: 'color' },\r\n    { size: TypeSize.float32, valueName: 'intensity' },\r\n]);\r\nclass PointLight extends BaseLight {\r\n    #radius = 1;\r\n    constructor(redGPUContext, color = 0x404040, intensity = 1) {\r\n        super(redGPUContext, bufferDefine, color, intensity);\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n    }\r\n    get radius() {\r\n        return this.#radius;\r\n    }\r\n    set radius(value) {\r\n        this.#radius = value;\r\n    }\r\n}\r\nexport default PointLight;\r\n","import AmbientLight from \"./AmbientLight\";\r\nimport BaseLight from \"./BaseLight\";\r\nimport DirectionalLight from \"./DirectionalLight\";\r\nimport LightManager from \"./LightManager\";\r\nimport PointLight from \"./PointLight\";\r\nexport { BaseLight, AmbientLight, DirectionalLight, PointLight, LightManager, };\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport shaderDefineReplace from \"../../systemShaderDefine/shaderDefineReplace\";\r\nimport PassLightClustersSource from \"./PassLightClusters.wgsl\";\r\nimport PassLightClustersHelper from \"./PassLightClustersHelper\";\r\n// Initialize empty array with 4 zeros\r\nconst emptyArray = new Uint32Array([0, 0, 0, 0]);\r\n// Class for creating 3D pointLight_Clusters\r\nclass PassLightClusters extends RedGPUContextBase {\r\n    #targetView;\r\n    #clusterLightBindGroup;\r\n    #clusterLightPipeline;\r\n    #clusterLightsBuffer;\r\n    // Constructor for initializing class instances\r\n    constructor(redGPUContext, targetView) {\r\n        super(redGPUContext);\r\n        this.#targetView = targetView;\r\n        this.#initPipeLine();\r\n        console.log('PassLightClusters', this);\r\n    }\r\n    // Getter method for clusterLightsBuffer\r\n    get clusterLightsBuffer() {\r\n        return this.#clusterLightsBuffer;\r\n    }\r\n    // Render method for computing pass encoder and command encoder\r\n    render(commandEncoder, passEncoder) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        const systemUniformBindGroup = this.#targetView.renderInfo_SystemUniformBindGroup;\r\n        if (systemUniformBindGroup) {\r\n            const DISPATCH_SIZE = PassLightClustersHelper.getDispatchSize();\r\n            this.redGPUContext.gpuDevice.queue.writeBuffer(this.clusterLightsBuffer, 0, emptyArray);\r\n            passEncoder.setPipeline(this.#clusterLightPipeline);\r\n            passEncoder.setBindGroup(0, systemUniformBindGroup);\r\n            passEncoder.setBindGroup(1, this.#clusterLightBindGroup);\r\n            passEncoder.dispatchWorkgroups(DISPATCH_SIZE[0], DISPATCH_SIZE[1], DISPATCH_SIZE[2]);\r\n        }\r\n    }\r\n    // Method for initializing pipeline\r\n    #initPipeLine() {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        const source = shaderDefineReplace(PassLightClustersSource);\r\n        this.#clusterLightsBuffer = gpuDevice.createBuffer({\r\n            size: PassLightClustersHelper.getPointLight_ClusterLightsBufferSize(),\r\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\r\n        });\r\n        var clusterLightBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.COMPUTE,\r\n                    buffer: { type: 'read-only-storage' }\r\n                }\r\n            ]\r\n        });\r\n        this.#clusterLightBindGroup = gpuDevice.createBindGroup({\r\n            label: 'clusterLightBindGroup',\r\n            layout: clusterLightBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.#targetView.passLightClustersBound.clusterBoundBuffer\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        this.#clusterLightPipeline = gpuDevice.createComputePipeline({\r\n            label: 'clusterLightPipeline',\r\n            layout: gpuDevice.createPipelineLayout({\r\n                bindGroupLayouts: [\r\n                    this.#targetView.systemUniformsBindGroupLayout,\r\n                    clusterLightBindGroupLayout\r\n                ]\r\n            }),\r\n            compute: {\r\n                module: gpuDevice.createShaderModule({\r\n                    code: source,\r\n                    label: \"Cluster Light\"\r\n                }),\r\n                entryPoint: 'main'\r\n            }\r\n        });\r\n    }\r\n}\r\n// Export the class as a default module\r\nexport default PassLightClusters;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport shaderDefineReplace from \"../../systemShaderDefine/shaderDefineReplace\";\r\nimport PassLightClustersBoundSource from \"./PassLightClustersBound.wgsl\";\r\nimport PassLightClustersHelper from \"./PassLightClustersHelper\";\r\nclass PassLightClustersBound extends RedGPUContextBase {\r\n    #targetView;\r\n    #clusterBoundBuffer;\r\n    #clusterBoundBindGroupLayout;\r\n    #clusterBoundBindGroup;\r\n    #clusterBoundPipeline;\r\n    constructor(redGPUContext, targetView) {\r\n        super(redGPUContext);\r\n        this.#targetView = targetView;\r\n        this.#initPipeLine();\r\n    }\r\n    // Getter for clusterBoundBuffer\r\n    get clusterBoundBuffer() {\r\n        return this.#clusterBoundBuffer;\r\n    }\r\n    render(commandEncoder, passEncoder) {\r\n        const sysUniformBindGroup = this.#targetView.renderInfo_SystemUniformBindGroup;\r\n        if (sysUniformBindGroup) {\r\n            const DISPATCH_SIZE = PassLightClustersHelper.getDispatchSize();\r\n            passEncoder.setPipeline(this.#clusterBoundPipeline);\r\n            passEncoder.setBindGroup(0, sysUniformBindGroup);\r\n            passEncoder.setBindGroup(1, this.#clusterBoundBindGroup);\r\n            passEncoder.dispatchWorkgroups(DISPATCH_SIZE[0], DISPATCH_SIZE[1], DISPATCH_SIZE[2]);\r\n        }\r\n    }\r\n    #initPipeLine() {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        const source = shaderDefineReplace(PassLightClustersBoundSource);\r\n        this.#clusterBoundBuffer = gpuDevice.createBuffer({\r\n            size: PassLightClustersHelper.getTotalTileSize() * 32,\r\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\r\n        });\r\n        this.#clusterBoundBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.COMPUTE,\r\n                    buffer: { type: 'storage' }\r\n                }\r\n            ]\r\n        });\r\n        this.#clusterBoundBindGroup = gpuDevice.createBindGroup({\r\n            label: 'clusterBoundBindGroup',\r\n            layout: this.#clusterBoundBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.#clusterBoundBuffer,\r\n                    }\r\n                }\r\n            ],\r\n        });\r\n        this.#clusterBoundPipeline = gpuDevice.createComputePipeline({\r\n            label: 'clusterBoundPipeline',\r\n            layout: gpuDevice.createPipelineLayout({\r\n                bindGroupLayouts: [\r\n                    this.#targetView.systemUniformsBindGroupLayout,\r\n                    this.#clusterBoundBindGroupLayout,\r\n                ]\r\n            }),\r\n            compute: {\r\n                module: gpuDevice.createShaderModule({\r\n                    code: source,\r\n                    label: \"Cluster Bounds\"\r\n                }),\r\n                entryPoint: 'main',\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default PassLightClustersBound;\r\n","const PassLightClustersHelper = {\r\n    TILE_COUNT_X: 32,\r\n    TILE_COUNT_Y: 32,\r\n    TILE_COUNT_Z: 128,\r\n    WORKGROUP_SIZE_X: 4,\r\n    WORKGROUP_SIZE_Y: 4,\r\n    WORKGROUP_SIZE_Z: 16,\r\n    MAX_POINT_LIGHTS_PER_CLUSTER: 32,\r\n    getTotalTileSize: () => PassLightClustersHelper.TILE_COUNT_X * PassLightClustersHelper.TILE_COUNT_Y * PassLightClustersHelper.TILE_COUNT_Z,\r\n    getPointLight_ClusterLightsBufferSize: () => {\r\n        const totalTileSize = PassLightClustersHelper.getTotalTileSize();\r\n        return (8 * totalTileSize) + (8 * PassLightClustersHelper.MAX_POINT_LIGHTS_PER_CLUSTER * totalTileSize) + 4;\r\n    },\r\n    getDispatchSize: () => [\r\n        Math.ceil(PassLightClustersHelper.TILE_COUNT_X / PassLightClustersHelper.WORKGROUP_SIZE_X),\r\n        Math.ceil(PassLightClustersHelper.TILE_COUNT_Y / PassLightClustersHelper.WORKGROUP_SIZE_Y),\r\n        Math.ceil(PassLightClustersHelper.TILE_COUNT_Z / PassLightClustersHelper.WORKGROUP_SIZE_Z)\r\n    ]\r\n};\r\nObject.freeze(PassLightClustersHelper);\r\nexport default PassLightClustersHelper;\r\n","import PassLightClusters from \"./PassLightClusters\";\r\nimport PassLightClustersBound from \"./PassLightClustersBound\";\r\nimport PassLightClustersHelper from \"./PassLightClustersHelper\";\r\nexport { PassLightClustersHelper, PassLightClustersBound, PassLightClusters };\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport FinalRenderer from \"./renderFinal/FinalRenderer\";\r\nclass Renderer extends RedGPUContextBase {\r\n    #prevViewNum = 0;\r\n    #prevTime;\r\n    #requestID;\r\n    #prevUseMultiSample;\r\n    #finalRenderer;\r\n    #mainRender;\r\n    #afterRender;\r\n    #beforeRender;\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext);\r\n        this.#finalRenderer = new FinalRenderer(redGPUContext);\r\n    }\r\n    get mainRender() {\r\n        return this.#mainRender;\r\n    }\r\n    set mainRender(value) {\r\n        this.#mainRender = value;\r\n    }\r\n    get afterRender() {\r\n        return this.#afterRender;\r\n    }\r\n    set afterRender(value) {\r\n        this.#afterRender = value;\r\n    }\r\n    get beforeRender() {\r\n        return this.#beforeRender;\r\n    }\r\n    set beforeRender(value) {\r\n        this.#beforeRender = value;\r\n    }\r\n    startRender() {\r\n        this.#prevTime = performance.now();\r\n        this.renderFrame();\r\n    }\r\n    stopRender() {\r\n        this.#prevTime = performance.now();\r\n        cancelAnimationFrame(this.#requestID);\r\n    }\r\n    renderFrame(nowTime = 0) {\r\n        // nowTime = performance.now()\r\n        const redGPUContext = this.redGPUContext;\r\n        const targetDebugger = redGPUContext.debugger;\r\n        const soloRenderYn = redGPUContext.viewList.length === 1;\r\n        if (nowTime - this.#prevTime > 8) {\r\n            let hasPostEffect = false;\r\n            redGPUContext.viewList.forEach(view => {\r\n                this.#renderView(view, nowTime, redGPUContext, soloRenderYn);\r\n            });\r\n            redGPUContext.viewList.forEach(view => {\r\n                if (view.postEffectManager.children.length)\r\n                    hasPostEffect = true;\r\n            });\r\n            if (!soloRenderYn || hasPostEffect) {\r\n                this.#finalRenderer.render(redGPUContext.viewList);\r\n            }\r\n            this.#prevTime = nowTime;\r\n            targetDebugger.render();\r\n            redGPUContext.dirtyMultiSample = false;\r\n        }\r\n        this.#requestID = requestAnimationFrame((time) => {\r\n            this.renderFrame(time);\r\n        });\r\n    }\r\n    #renderView(view, nowTime, redGPUContext, soloRender = true) {\r\n        const { scene, pixelViewRectInt } = view;\r\n        let beforeTime = 0;\r\n        let mainTime = 0;\r\n        let afterTime = 0;\r\n        let checkStartTime = nowTime;\r\n        if (this.#beforeRender) {\r\n            this.#beforeRender(nowTime, view, scene);\r\n        }\r\n        beforeTime = performance.now() - checkStartTime;\r\n        checkStartTime = performance.now();\r\n        if (this.#mainRender) {\r\n            this.#mainRender(nowTime, view, scene);\r\n        }\r\n        if (view.camera.dirtyTransformState)\r\n            view.camera.update();\r\n        let renderMeshNum = 0;\r\n        let triangleNum = 0;\r\n        const { gpuDevice, gpuContext } = redGPUContext;\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const hasPostEffect = !!view.postEffectManager.children.length;\r\n        if (soloRender && !hasPostEffect) {\r\n            view.resolveTexture = gpuContext.getCurrentTexture();\r\n            view.resolveTextureView = view.resolveTexture.createView();\r\n        }\r\n        if (redGPUContext.dirtyMultiSample\r\n            || !view.resultTexture\r\n            || view.resultTexture.width !== pixelViewRectInt[2]\r\n            || view.resultTexture.height !== pixelViewRectInt[3]) {\r\n            console.log('reset view.resultTexture');\r\n            const size = [pixelViewRectInt[2], pixelViewRectInt[3]];\r\n            const sampleCount = redGPUContext.useMultiSample ? 4 : 1;\r\n            const usage = hasPostEffect ? (GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING) : soloRender ? GPUTextureUsage.RENDER_ATTACHMENT : (GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING);\r\n            const format = navigator.gpu.getPreferredCanvasFormat();\r\n            view.resultTexture = gpuDevice.createTexture({\r\n                size,\r\n                sampleCount,\r\n                format,\r\n                usage\r\n            });\r\n            view.resultTextureView = view.resultTexture.createView({ label: `${view.label}_resultTextureView` });\r\n            ///////////\r\n            if (soloRender && !hasPostEffect) {\r\n            }\r\n            else {\r\n                view.resolveTexture = gpuDevice.createTexture({\r\n                    size,\r\n                    sampleCount: 1,\r\n                    format,\r\n                    usage,\r\n                });\r\n                view.resolveTextureView = view.resolveTexture.createView({ label: `${view.label}_resolveTextureView` });\r\n            }\r\n            ///////////\r\n            view.depthTexture = gpuDevice.createTexture({\r\n                size,\r\n                sampleCount,\r\n                format: 'depth24plus-stencil8',\r\n                usage,\r\n            });\r\n            view.depthTextureView = view.depthTexture.createView();\r\n            console.log('뷰렌더텍스쳐갱신');\r\n        }\r\n        const { backgroundColorRGB, backgroundAlpha } = scene;\r\n        const renderPassDescriptor = {\r\n            /**\r\n             * @typedef {GPURenderPassColorAttachment}\r\n             */\r\n            colorAttachments: [\r\n                {\r\n                    view: redGPUContext.useMultiSample ? view.resultTextureView : view.resolveTextureView,\r\n                    resolveTarget: redGPUContext.useMultiSample ? view.resolveTextureView : undefined,\r\n                    // TODO - Scene의 색상을 받도록 수정\r\n                    clearValue: {\r\n                        r: backgroundColorRGB[0],\r\n                        g: backgroundColorRGB[1],\r\n                        b: backgroundColorRGB[2],\r\n                        a: backgroundAlpha\r\n                    },\r\n                    loadOp: 'clear',\r\n                    storeOp: 'store',\r\n                },\r\n            ],\r\n            depthStencilAttachment: {\r\n                view: view.depthTextureView,\r\n                depthClearValue: 1.0,\r\n                depthLoadOp: \"clear\",\r\n                depthStoreOp: \"store\",\r\n                stencilClearValue: 0,\r\n                stencilLoadOp: \"load\",\r\n                stencilStoreOp: \"store\",\r\n            }\r\n        };\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setBindGroup(0, view.renderInfo_SystemUniformBindGroup);\r\n        passEncoder.setViewport(0, 0, pixelViewRectInt[2], pixelViewRectInt[3], 0, 1);\r\n        passEncoder.setScissorRect(0, 0, pixelViewRectInt[2], pixelViewRectInt[3]);\r\n        view.updateSystemUniform();\r\n        view.updateClusters();\r\n        /////////\r\n        scene.skyBox?.render(view, passEncoder, nowTime);\r\n        scene.grid?.render(view, passEncoder, nowTime);\r\n        scene.axis?.render(view, passEncoder, nowTime);\r\n        /////////\r\n        {\r\n            const list = view.scene.children;\r\n            let i = view.scene.children.length;\r\n            while (i--) {\r\n                const t0 = list[i].render(view, passEncoder, nowTime);\r\n                renderMeshNum += t0 ? 1 : 0;\r\n                if (t0.geometry)\r\n                    triangleNum += t0.geometry.indexBuffer.indexNum / 3;\r\n            }\r\n        }\r\n        //\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        {\r\n            if (view.postEffectManager.children.length) {\r\n                view.resolveTextureView = view.postEffectManager.render();\r\n            }\r\n        }\r\n        mainTime = performance.now() - checkStartTime;\r\n        checkStartTime = performance.now();\r\n        if (this.#afterRender) {\r\n            this.#afterRender(nowTime, view, scene);\r\n        }\r\n        afterTime = performance.now() - checkStartTime;\r\n        {\r\n            view.viewDebugger.update(view, scene, nowTime, this.#prevTime, beforeTime, mainTime, afterTime, renderMeshNum, triangleNum);\r\n        }\r\n    }\r\n}\r\nexport default Renderer;\r\n","import Renderer from \"./Renderer\";\r\nexport { Renderer };\r\n","import RedGPUContextBase from \"../../../context/RedGPUContextBase\";\r\nimport VertexBuffer from \"../../../resource/buffers/buffer/VertexBuffer\";\r\nimport InterleaveInfo from \"../../../resource/buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../../../resource/buffers/interleaveInfo/InterleaveUnit\";\r\nimport makeShaderModule from \"../../../resource/makeShaderModule\";\r\nimport { TextureSampler } from \"../../../resource/texture\";\r\nimport { mat4 } from \"../../../util/gl-matrix\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nclass FinalRenderer extends RedGPUContextBase {\r\n    vertexBuffer;\r\n    sampler;\r\n    uniformsBindGroupLayout;\r\n    uniformBindGroup;\r\n    pipeline;\r\n    #matrix;\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext);\r\n        const { gpuDevice } = redGPUContext;\r\n        const vShaderModule = makeShaderModule(gpuDevice, vertexSource, 'FinalRenderer_vShaderModule');\r\n        const fShaderModule = makeShaderModule(gpuDevice, fragmentSource, 'FinalRenderer_fShaderModule');\r\n        console.log(vShaderModule, fShaderModule);\r\n        this.#matrix = mat4.create();\r\n        ////////////////////////////////////////////////////////////////////////\r\n        // make vertexBuffer\r\n        this.vertexBuffer = new VertexBuffer(redGPUContext, new Float32Array([\r\n            //x,y,z, u,v\r\n            -1.0, -1.0, 0.0, 0.0, 1.0,\r\n            1.0, -1.0, 0.0, 1.0, 1.0,\r\n            -1.0, 1.0, 0.0, 0.0, 0.0,\r\n            -1.0, 1.0, 0.0, 0.0, 0.0,\r\n            1.0, -1.0, 0.0, 1.0, 1.0,\r\n            1.0, 1.0, 0.0, 1.0, 0.0\r\n        ]), new InterleaveInfo([\r\n            new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, \"float32x3\"),\r\n            new InterleaveUnit(InterleaveUnit.TEXCOORD, 'float32x2')\r\n        ]));\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.VERTEX,\r\n                    buffer: {\r\n                        type: 'uniform',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.sampler = new TextureSampler(redGPUContext, {\r\n            magFilter: \"linear\",\r\n            minFilter: \"linear\",\r\n            mipmapFilter: \"nearest\"\r\n        });\r\n        /////\r\n        console.log(this.vertexBuffer);\r\n        const presentationFormat = navigator.gpu.getPreferredCanvasFormat();\r\n        const pipeLineDescriptor = {\r\n            // set bindGroupLayouts\r\n            layout: gpuDevice.createPipelineLayout({ bindGroupLayouts: [this.uniformsBindGroupLayout] }),\r\n            vertex: {\r\n                module: vShaderModule,\r\n                entryPoint: 'main',\r\n                buffers: [\r\n                    {\r\n                        arrayStride: this.vertexBuffer.arrayStride,\r\n                        attributes: this.vertexBuffer.attributes.map((v, index) => {\r\n                            return {\r\n                                // position\r\n                                shaderLocation: index,\r\n                                offset: v.offset,\r\n                                format: v.format\r\n                            };\r\n                        })\r\n                    }\r\n                ]\r\n            },\r\n            fragment: {\r\n                module: fShaderModule,\r\n                entryPoint: 'main',\r\n                targets: [\r\n                    {\r\n                        format: presentationFormat,\r\n                        blend: {\r\n                            color: {\r\n                                srcFactor: \"src-alpha\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            },\r\n                            alpha: {\r\n                                srcFactor: \"one\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            }\r\n                        }\r\n                    },\r\n                ],\r\n            },\r\n        };\r\n        this.pipeline = gpuDevice.createRenderPipeline(pipeLineDescriptor);\r\n        /////\r\n    }\r\n    render(viewList) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice, gpuContext, pixelSizeInt } = redGPUContext;\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const textureView = gpuContext.getCurrentTexture().createView();\r\n        const renderPassDescriptor = {\r\n            /**\r\n             * @typedef {GPURenderPassColorAttachment}\r\n             */\r\n            colorAttachments: [\r\n                {\r\n                    view: textureView,\r\n                    clearValue: { r: 0.0, g: 0.0, b: 0.0, a: 0.0 },\r\n                    loadOp: 'clear',\r\n                    storeOp: 'store',\r\n                },\r\n            ],\r\n            // depthStencilAttachment: {\r\n            //     view: this.depthTextureView,\r\n            //     depthClearValue: 1.0,\r\n            //     depthLoadOp: \"clear\",\r\n            //     depthStoreOp: \"store\",\r\n            //     stencilClearValue: 0,\r\n            //     stencilLoadOp: \"load\",\r\n            //     stencilStoreOp: \"store\",\r\n            // }\r\n        };\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        //\r\n        passEncoder.setViewport(0, 0, pixelSizeInt.width, pixelSizeInt.height, 0, 1);\r\n        passEncoder.setScissorRect(0, 0, pixelSizeInt.width, pixelSizeInt.height);\r\n        viewList.forEach((view) => {\r\n            const { pixelViewRect } = view;\r\n            // console.log(view.resolveTextureView,view.resultTextureView.label)\r\n            const uniformBindGroupDescriptor = {\r\n                layout: this.uniformsBindGroupLayout,\r\n                entries: [\r\n                    {\r\n                        binding: 0,\r\n                        resource: {\r\n                            buffer: view.finalRenderUniformBuffer,\r\n                            offset: 0,\r\n                            size: 4 * 4 * Float32Array.BYTES_PER_ELEMENT\r\n                        }\r\n                    },\r\n                    {\r\n                        binding: 1,\r\n                        resource: this.sampler.gpuSampler,\r\n                    },\r\n                    {\r\n                        binding: 2,\r\n                        resource: view.resolveTextureView,\r\n                    }\r\n                ]\r\n            };\r\n            this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n            passEncoder.setVertexBuffer(0, this.vertexBuffer.gpuBuffer);\r\n            passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n            mat4.identity(this.#matrix);\r\n            mat4.ortho(this.#matrix, 0., // left\r\n            1., // right\r\n            0., // bottom\r\n            1., // top,\r\n            -1000, 1000);\r\n            mat4.scale(this.#matrix, this.#matrix, [\r\n                1 / pixelSizeInt.width,\r\n                1 / pixelSizeInt.height,\r\n                1\r\n            ]);\r\n            mat4.translate(this.#matrix, this.#matrix, [\r\n                (pixelViewRect[2] / 2),\r\n                (pixelSizeInt.height - pixelViewRect[3] / 2),\r\n                0\r\n            ]);\r\n            const temp = mat4.create();\r\n            mat4.scale(temp, temp, [\r\n                pixelViewRect[2] / 2,\r\n                pixelViewRect[3] / 2,\r\n                1\r\n            ]);\r\n            mat4.translate(this.#matrix, this.#matrix, [\r\n                (pixelViewRect[0]),\r\n                (-pixelViewRect[1]),\r\n                0\r\n            ]);\r\n            mat4.multiply(this.#matrix, this.#matrix, temp);\r\n            gpuDevice.queue.writeBuffer(view.finalRenderUniformBuffer, 0, this.#matrix);\r\n            ///////////////////////////////////////////////////////////////////\r\n            // setVertexBuffer\r\n            passEncoder.draw(6, 1, 0, 0);\r\n        });\r\n        passEncoder.setViewport(0, 0, pixelSizeInt.width, pixelSizeInt.height, 0, 1);\r\n        passEncoder.setScissorRect(0, 0, pixelSizeInt.width, pixelSizeInt.height);\r\n        //\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n    }\r\n}\r\nexport default FinalRenderer;\r\n","import LightManager from \"../../light/LightManager\";\r\nimport DisplayContainer from \"../../object3d/base/DisplayContainer\";\r\nimport hexadecimalToRgb from \"../../util/color/hexadecimalToRgb\";\r\nlet UUID = 0;\r\n/**\r\n * @description\r\n * - 장면을 구상하는 Scene 객체입니다.\r\n * - 메쉬와 같은 각종 오브젝트를 설정하고 배치하는 공간입니다.\r\n */\r\nclass Scene extends DisplayContainer {\r\n    /**\r\n     * Scene의 axis 값\r\n     * @private\r\n     */\r\n    #axis;\r\n    /**\r\n     * Scene의 skyBox 값\r\n     * @private\r\n     */\r\n    #skyBox;\r\n    /**\r\n     * Scene의 grid 값\r\n     * @private\r\n     */\r\n    #grid;\r\n    /**\r\n     * Scene의 label 값\r\n     * @private\r\n     */\r\n    #label;\r\n    /**\r\n     * lightManager\r\n     * Scene에 사용되는 Light 객체를 관리하는 매니저 객체\r\n     * @private\r\n     */\r\n    #lightManager;\r\n    #backgroundColorRGB = [0, 0, 0];\r\n    /**\r\n     * Scene의 배경 색상\r\n     * @private\r\n     */\r\n    #backgroundColor = 0x000000;\r\n    /**\r\n     * Scene의 배경 색상 알파 값\r\n     * @private\r\n     */\r\n    #backgroundAlpha = 1;\r\n    /**\r\n     * @constructor 새로운 Scene 오브젝트를 생성합니다.\r\n     * @param label\r\n     */\r\n    constructor(label) {\r\n        super();\r\n        this.#label = label || `Scene${UUID++}`;\r\n        this.#lightManager = new LightManager();\r\n    }\r\n    /**\r\n     * Scene에 설정된 axis 값을 반환 합니다.\r\n     */\r\n    get axis() {\r\n        return this.#axis;\r\n    }\r\n    /**\r\n     * Scene에 Axis 객체를 설정합니다.\r\n     * @param value\r\n     */\r\n    set axis(value) {\r\n        this.#axis = value;\r\n    }\r\n    /**\r\n     * Scene에 설정된 skybox 값을 반환 합니다.\r\n     */\r\n    get skyBox() {\r\n        return this.#skyBox;\r\n    }\r\n    /**\r\n     * Scene에 SkyBox 객체를 설정합니다.\r\n     * @param value\r\n     */\r\n    set skyBox(value) {\r\n        this.#skyBox = value;\r\n    }\r\n    /**\r\n     * Scene에 설정된 grid 값을 반환 합니다.\r\n     */\r\n    get grid() {\r\n        return this.#grid;\r\n    }\r\n    /**\r\n     * Scene에 Grid 객체를 설정합니다.\r\n     * @param value\r\n     */\r\n    set grid(value) {\r\n        this.#grid = value;\r\n    }\r\n    /**\r\n     * Scene의 label을 반환 합니다.\r\n     */\r\n    get label() {\r\n        return this.#label;\r\n    }\r\n    /**\r\n     * Scene에 label을 설정합니다.\r\n     * @param value\r\n     */\r\n    set label(value) {\r\n        this.#label = value;\r\n    }\r\n    /**\r\n     * lightManager 반환\r\n     */\r\n    get lightManager() {\r\n        return this.#lightManager;\r\n    }\r\n    /**\r\n     * backgroundColor 설정시 세팅되는 RGB값 반환\r\n     * GPU 렌더링시 사용됨\r\n     */\r\n    get backgroundColorRGB() {\r\n        return this.#backgroundColorRGB;\r\n    }\r\n    /**\r\n     * Scene의 배경 색상을 반환\r\n     */\r\n    get backgroundColor() {\r\n        return this.#backgroundColor;\r\n    }\r\n    /**\r\n     * Scene의  배경 색상을 값을 설정 합니다.\r\n     * 렌더링시 Scene의 배경 색상이 됩니다.\r\n     * 값을 입력하고 조건을 통과하면 backgroundColorRGB를 자동으로 생성합니다.\r\n     * ex) 0xffffff\r\n     * @param value\r\n     */\r\n    set backgroundColor(value) {\r\n        this.#backgroundColor = value;\r\n        let rgb = hexadecimalToRgb(value);\r\n        this.#backgroundColorRGB[0] = rgb.r;\r\n        this.#backgroundColorRGB[1] = rgb.g;\r\n        this.#backgroundColorRGB[2] = rgb.b;\r\n    }\r\n    /**\r\n     * Scene의 배경 색상 알파값을 반환 합니다.\r\n     * 렌더링시 Scene의 배경색상의 알파값으로 사용됩니다\r\n     * ```ex) backgroundColor가 0x000000 이고 backgroundAlpha 값이 0.5일 경우 rgba(0,0,0,0.5)로 배경색상이 결정됩니다.```\r\n     */\r\n    get backgroundAlpha() {\r\n        return this.#backgroundAlpha;\r\n    }\r\n    /**\r\n     * Scene의 배경 색상 알파 값을 설정합니다.\r\n     * @param value\r\n     */\r\n    set backgroundAlpha(value) {\r\n        this.#backgroundAlpha = value;\r\n    }\r\n}\r\nexport default Scene;\r\n","import Scene from \"./Scene\";\r\nimport SkyBox from \"./skyBox/SkyBox\";\r\nexport * from \"./sceneHelper\";\r\nexport { Scene, SkyBox, };\r\n","import ColorMaterial from \"../../../../material/colorMaterial/ColorMaterial\";\r\nimport { Mesh } from \"../../../../object3d\";\r\nimport Box from \"../../../../resource/geometry/primitives/Box\";\r\nimport Sphere from \"../../../../resource/geometry/primitives/Sphere\";\r\nclass Axis extends Mesh {\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, null, null);\r\n        const centerMesh = new Mesh(redGPUContext, new Sphere(redGPUContext, 0.5), new ColorMaterial(redGPUContext));\r\n        this.addChild(centerMesh);\r\n        let tAxis;\r\n        const tGeo = new Box(redGPUContext);\r\n        const tMatX = new ColorMaterial(redGPUContext, 0xff0000);\r\n        const tMatY = new ColorMaterial(redGPUContext, 0x00ff00);\r\n        const tMatZ = new ColorMaterial(redGPUContext, 0x0000ff);\r\n        // xAxis\r\n        tAxis = new Mesh(redGPUContext, tGeo, tMatX);\r\n        tAxis.setScale(5, 0.1, 0.1);\r\n        tAxis.x = 2.5;\r\n        this.addChild(tAxis);\r\n        ////////////////////////////////////////////\r\n        // yAxis\r\n        tAxis = new Mesh(redGPUContext, tGeo, tMatY);\r\n        tAxis.setScale(0.1, 5, 0.1);\r\n        tAxis.y = 2.5;\r\n        this.addChild(tAxis);\r\n        ////////////////////////////////////////////\r\n        // zAxis\r\n        tAxis = new Mesh(redGPUContext, tGeo, tMatZ);\r\n        tAxis.setScale(0.1, 0.1, 5);\r\n        tAxis.z = 2.5;\r\n        this.addChild(tAxis);\r\n    }\r\n}\r\nexport default Axis;\r\n","import { Mesh } from \"../../../../object3d\";\r\nimport InterleaveInfo from \"../../../../resource/buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../../../../resource/buffers/interleaveInfo/InterleaveUnit\";\r\nimport Geometry from \"../../../../resource/geometry/Geometry\";\r\nimport hexadecimalToRgb from \"../../../../util/color/hexadecimalToRgb\";\r\nimport GridMaterial from \"./GridMaterial\";\r\nclass Grid extends Mesh {\r\n    #size = 100;\r\n    #divisions = 100;\r\n    #centerColor = 0xcccccc;\r\n    #color = 0x666666;\r\n    constructor(redGPUContext, size = 100, divisions = 100, centerColor = 0xcccccc, color = 0x666666) {\r\n        super(redGPUContext);\r\n        this.#size = size;\r\n        this.#divisions = divisions;\r\n        this.#centerColor = centerColor;\r\n        this.#color = color;\r\n        this.topology = 'line-list';\r\n        this.#update();\r\n    }\r\n    get size() {\r\n        return this.#size;\r\n    }\r\n    set size(value) {\r\n        this.#size = value;\r\n        this.#update();\r\n    }\r\n    get divisions() {\r\n        return this.#divisions;\r\n    }\r\n    set divisions(value) {\r\n        this.#divisions = value;\r\n        this.#update();\r\n    }\r\n    get centerColor() {\r\n        return this.#centerColor;\r\n    }\r\n    set centerColor(value) {\r\n        this.#centerColor = value;\r\n        this.#update();\r\n    }\r\n    get color() {\r\n        return this.#color;\r\n    }\r\n    set color(value) {\r\n        this.#color = value;\r\n        this.#update();\r\n    }\r\n    #update() {\r\n        let redGPUContext = this.redGPUContext;\r\n        let center, step, halfSize;\r\n        let i, k, tColor;\r\n        let interleaveData = [];\r\n        center = this.divisions / 2;\r\n        step = this.size / this.divisions;\r\n        halfSize = this.size / 2;\r\n        for (i = 0, k = -halfSize; i <= this.divisions; i++, k += step) {\r\n            tColor = i === center ? hexadecimalToRgb(this.centerColor) : hexadecimalToRgb(this.color);\r\n            interleaveData.push(-halfSize, 0, k, tColor.r, tColor.g, tColor.b, 1, halfSize, 0, k, tColor.r, tColor.g, tColor.b, 1, k, 0, -halfSize, tColor.r, tColor.g, tColor.b, 1, k, 0, halfSize, tColor.r, tColor.g, tColor.b, 1);\r\n        }\r\n        this.geometry = new Geometry(redGPUContext, new Float32Array(interleaveData), new InterleaveInfo([\r\n            new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, 'float32x3'),\r\n            new InterleaveUnit(InterleaveUnit.VERTEX_COLOR, 'float32x4')\r\n        ]));\r\n        this.material = new GridMaterial(redGPUContext);\r\n    }\r\n}\r\nexport default Grid;\r\n","import BaseMaterial from \"../../../../material/BaseMaterial\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBufferDescriptor = [];\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: []\r\n};\r\nclass GridMaterial extends BaseMaterial {\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     */\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        this.#initFragmentUniformInfo();\r\n        // console.log(this)\r\n    }\r\n    updateBindGroup() {\r\n        this.updateFragmentUniformBindGroup({\r\n            layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n            entries: []\r\n        });\r\n    }\r\n    /**\r\n     * @constructs\r\n     * @private\r\n     */\r\n    #initFragmentUniformInfo() {\r\n        this.updateBindGroup();\r\n    }\r\n}\r\nexport default GridMaterial;\r\n","import Axis from \"./asix/Axis\";\r\nimport Grid from \"./grid/Grid\";\r\nimport NormalHelper from \"./normalHelper/NormalHelper\";\r\nexport { NormalHelper, Grid, Axis };\r\n","import { Mesh } from \"../../../../object3d\";\r\nimport InterleaveInfo from \"../../../../resource/buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../../../../resource/buffers/interleaveInfo/InterleaveUnit\";\r\nimport TypeSize from \"../../../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport Geometry from \"../../../../resource/geometry/Geometry\";\r\nimport { vec3 } from \"../../../../util/gl-matrix\";\r\nimport NormalHelperMaterial from \"./NormalHelperMaterial\";\r\nconst vertexUniformBufferDescriptor = new UniformBufferDescriptor([\r\n    { size: TypeSize.mat4, valueName: 'modelMatrix' },\r\n]);\r\nconst vertexUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.VERTEX,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        }\r\n    ]\r\n};\r\nclass NormalHelper extends Mesh {\r\n    #targetMesh;\r\n    constructor(mesh, scale = 1) {\r\n        super(mesh.redGPUContext, null, null, vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor);\r\n        const device = mesh.redGPUContext.gpuDevice;\r\n        this.#targetMesh = mesh;\r\n        const data = [];\r\n        //\r\n        let i = 0;\r\n        const len = mesh.geometry.data.length;\r\n        console.log(mesh.geometry);\r\n        console.log(mesh.geometry.vertexBuffer);\r\n        const normalInfo = mesh.geometry.vertexBuffer.attributes.filter(v => v['attributeHint'] === InterleaveUnit.VERTEX_NORMAL);\r\n        if (normalInfo.length) {\r\n            const normalOffset = normalInfo[0]['offset'] / Float32Array.BYTES_PER_ELEMENT;\r\n            const stride = mesh.geometry.vertexBuffer.arrayStride / Float32Array.BYTES_PER_ELEMENT;\r\n            for (i; i < len; i = i + stride) {\r\n                const position = [\r\n                    mesh.geometry.data[i],\r\n                    mesh.geometry.data[i + 1],\r\n                    mesh.geometry.data[i + 2],\r\n                ];\r\n                const normal = [\r\n                    mesh.geometry.data[i + normalOffset],\r\n                    mesh.geometry.data[i + 1 + normalOffset],\r\n                    mesh.geometry.data[i + 2 + normalOffset],\r\n                ];\r\n                vec3.normalize(normal, normal);\r\n                const resultVec = vec3.create();\r\n                const distance = vec3.length(position) * scale * 0.5;\r\n                vec3.add(resultVec, position, vec3.scale(normal, normal, distance));\r\n                data.push(...position, 1, 0, 0, 1, ...resultVec, 1, 1, 0, 1);\r\n            }\r\n            //\r\n            this.geometry = new Geometry(mesh.redGPUContext, new Float32Array(data), new InterleaveInfo([\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, 'float32x3'),\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_COLOR, 'float32x4')\r\n            ]));\r\n            this.material = new NormalHelperMaterial(mesh.redGPUContext);\r\n            this.topology = 'line-list';\r\n        }\r\n    }\r\n    updateBindGroup() {\r\n        // TODO 유니포내용중 텍스쳐 등이 변화하면 업데이트 해야함\r\n        this.updateVertexUniformBindGroup({\r\n            layout: this.renderInfo_VertexUniformBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.vertexUniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.vertexUniformBuffer.gpuBufferSize\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    }\r\n}\r\nexport default NormalHelper;\r\n","import BaseMaterial from \"../../../../material/BaseMaterial\";\r\nimport UniformBufferDescriptor from \"../../../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBufferDescriptor = new UniformBufferDescriptor([]);\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: []\r\n};\r\nclass NormalHelperMaterial extends BaseMaterial {\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     */\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.#initFragmentUniformInfo(gpuDevice);\r\n        // console.log(this)\r\n    }\r\n    updateBindGroup() {\r\n        this.updateFragmentUniformBindGroup({\r\n            layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n            entries: []\r\n        });\r\n    }\r\n    /**\r\n     * @constructs\r\n     * @private\r\n     */\r\n    #initFragmentUniformInfo(gpuDevice) {\r\n        this.updateBindGroup();\r\n    }\r\n}\r\nexport default NormalHelperMaterial;\r\n","import SkyBoxMaterial from \"../../../material/skyboxMaterial/SkyBoxMaterial\";\r\nimport { Mesh } from \"../../../object3d\";\r\nimport Box from \"../../../resource/geometry/primitives/Box\";\r\nimport BitmapCubeTexture from \"../../../resource/texture/BitmapCubeTexture\";\r\nclass SkyBox extends Mesh {\r\n    constructor(redGPUContext, srcList) {\r\n        const scale = 100000; //TODO 이거 카메라에서 받아와야함\r\n        super(redGPUContext, new Box(redGPUContext, scale, scale, scale), new SkyBoxMaterial(redGPUContext, new BitmapCubeTexture(redGPUContext, srcList)));\r\n    }\r\n}\r\nexport default SkyBox;\r\n","import BasicCamera from \"../../camera/BasicCamera\";\r\nimport LightManager from \"../../light/LightManager\";\r\nimport PassLightClusters from \"../../light/pointLightCluster/PassLightClusters\";\r\nimport PassLightClustersBound from \"../../light/pointLightCluster/PassLightClustersBound\";\r\nimport CONST_DIRTY_TRANSFORM_STATE from \"../../object3d/base/CONST_DIRTY_TRANSFORM_STATE\";\r\nimport PostEffectManager from \"../../postEffect/PostEffectManager\";\r\nimport TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"../../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport computeViewFrustumPlanes from \"../../util/computeViewFrustumPlanes\";\r\nimport throwErrorInstanceOf from \"../../util/errorFunc/throwErrorInstanceOf\";\r\nimport { mat4, vec3 } from \"../../util/gl-matrix\";\r\nimport Scene from \"../scene/Scene\";\r\nimport ViewBase from \"./ViewBase\";\r\nlet UUID = 0;\r\n/**\r\n * ## View 객체는 Scene과 Camera를 소유하는 객체입니다.\r\n * postEffectManager를 통해 View에 후처리 이펙트를 적용할수 있습니다.\r\n */\r\nclass View extends ViewBase {\r\n    #postEffectManager;\r\n    #resultTexture;\r\n    #resolveTexture;\r\n    #depthTexture;\r\n    #resultTextureView;\r\n    #resolveTextureView;\r\n    #depthTextureView;\r\n    #label;\r\n    #scene;\r\n    #camera;\r\n    #renderPointLightNum = 0;\r\n    #renderDirectionalLightNum = 0;\r\n    #frustumPlanes = [];\r\n    #systemBufferInfo;\r\n    #systemUniformsBindGroupLayout;\r\n    #renderInfo_SystemUniformBindGroup;\r\n    #passLightClusters;\r\n    #systemPointLight_ClusterLightsBufferInfo;\r\n    #systemAmbientDirectionalLightBufferInfo;\r\n    #finalRenderUniformBuffer;\r\n    #passLightClustersBound;\r\n    #prevWidth;\r\n    #prevHeight;\r\n    get passLightClustersBound() {\r\n        return this.#passLightClustersBound;\r\n    }\r\n    /**\r\n     * 생성자\r\n     * @param redGPUContext\r\n     * @param scene\r\n     * @param label\r\n     */\r\n    constructor(redGPUContext, scene, label) {\r\n        super(redGPUContext);\r\n        this.#label = label || `View${UUID++} (Label input is recommended.)`;\r\n        this.scene = scene;\r\n        this.#camera = new BasicCamera();\r\n        this.#postEffectManager = new PostEffectManager(this);\r\n        this.#init();\r\n        console.log('View', this);\r\n    }\r\n    get postEffectManager() {\r\n        return this.#postEffectManager;\r\n    }\r\n    get resultTexture() {\r\n        return this.#resultTexture;\r\n    }\r\n    set resultTexture(value) {\r\n        this.#resultTexture = value;\r\n    }\r\n    get resolveTexture() {\r\n        return this.#resolveTexture;\r\n    }\r\n    set resolveTexture(value) {\r\n        this.#resolveTexture = value;\r\n    }\r\n    get depthTexture() {\r\n        return this.#depthTexture;\r\n    }\r\n    set depthTexture(value) {\r\n        this.#depthTexture = value;\r\n    }\r\n    get resultTextureView() {\r\n        return this.#resultTextureView;\r\n    }\r\n    set resultTextureView(value) {\r\n        this.#resultTextureView = value;\r\n    }\r\n    get resolveTextureView() {\r\n        return this.#resolveTextureView;\r\n    }\r\n    set resolveTextureView(value) {\r\n        this.#resolveTextureView = value;\r\n    }\r\n    get depthTextureView() {\r\n        return this.#depthTextureView;\r\n    }\r\n    set depthTextureView(value) {\r\n        this.#depthTextureView = value;\r\n    }\r\n    get label() {\r\n        return this.#label;\r\n    }\r\n    set label(value) {\r\n        this.#label = value;\r\n    }\r\n    get scene() {\r\n        return this.#scene;\r\n    }\r\n    set scene(value) {\r\n        if (!(value instanceof Scene))\r\n            throwErrorInstanceOf(this, 'scene', 'Scene');\r\n        this.#scene = value;\r\n        window.dispatchEvent(new Event('changeViewList'));\r\n    }\r\n    get camera() {\r\n        return this.#camera;\r\n    }\r\n    get renderPointLightNum() {\r\n        return this.#renderPointLightNum;\r\n    }\r\n    get renderDirectionalLightNum() {\r\n        return this.#renderDirectionalLightNum;\r\n    }\r\n    get frustumPlanes() {\r\n        return this.#frustumPlanes;\r\n    }\r\n    get systemBufferInfo() {\r\n        return this.#systemBufferInfo;\r\n    }\r\n    get systemUniformsBindGroupLayout() {\r\n        return this.#systemUniformsBindGroupLayout;\r\n    }\r\n    get renderInfo_SystemUniformBindGroup() {\r\n        return this.#renderInfo_SystemUniformBindGroup;\r\n    }\r\n    get passLightClusters() {\r\n        return this.#passLightClusters;\r\n    }\r\n    get systemPointLight_ClusterLightsBufferInfo() {\r\n        return this.#systemPointLight_ClusterLightsBufferInfo;\r\n    }\r\n    get systemAmbientDirectionalLightBufferInfo() {\r\n        return this.#systemAmbientDirectionalLightBufferInfo;\r\n    }\r\n    get finalRenderUniformBuffer() {\r\n        return this.#finalRenderUniformBuffer;\r\n    }\r\n    updateSystemUniform() {\r\n        const pixelViewRect = this.pixelViewRect;\r\n        const aspect = Math.abs(pixelViewRect[2] / pixelViewRect[3]);\r\n        const projectionMatrix = this.projectionMatrix;\r\n        const camera = this.#camera;\r\n        const { fov, nearClipping, farClipping, matrix: cameraMTX, mode } = camera;\r\n        if (mode === BasicCamera.MODE_3D) {\r\n            mat4.perspective(projectionMatrix, (Math.PI / 180) * fov, aspect, nearClipping, farClipping);\r\n        }\r\n        else {\r\n            // TODO 2D 모드\r\n        }\r\n        this.#frustumPlanes = computeViewFrustumPlanes(projectionMatrix, cameraMTX);\r\n        const { redStructOffsetMap: offsetMap } = this.#systemBufferInfo.descriptor;\r\n        const systemBufferInfoData = this.#systemBufferInfo.data;\r\n        systemBufferInfoData.set(projectionMatrix, offsetMap['projectionMatrix']);\r\n        systemBufferInfoData.set(this.inverseProjectionMatrix, offsetMap['inverseProjectionMatrix']);\r\n        // TODO resolution 을  viewRect로 변경할까?\r\n        systemBufferInfoData.set([pixelViewRect[2], pixelViewRect[3]], offsetMap['resolution']);\r\n        systemBufferInfoData.set(cameraMTX, offsetMap['cameraMatrix']);\r\n        systemBufferInfoData.set([nearClipping, farClipping], offsetMap['nearFar']);\r\n        this.#systemBufferInfo.update(systemBufferInfoData);\r\n    }\r\n    updateClusters() {\r\n        const { redGPUContext, scene } = this;\r\n        const { gpuDevice } = redGPUContext;\r\n        this.#renderDirectionalLightNum = 0;\r\n        this.#renderPointLightNum = 0;\r\n        if (!this.#passLightClustersBound)\r\n            this.#passLightClustersBound = new PassLightClustersBound(redGPUContext, this);\r\n        if (this.#prevWidth !== this.pixelViewRect[2] || this.#prevHeight !== this.pixelViewRect[3]) {\r\n            console.log('재계산');\r\n            {\r\n                const commandEncoder = gpuDevice.createCommandEncoder();\r\n                const passEncoder = commandEncoder.beginComputePass({\r\n                    label: 'Bound cluster'\r\n                });\r\n                this.#passLightClustersBound.render(commandEncoder, passEncoder);\r\n                passEncoder.end();\r\n                gpuDevice.queue.submit([commandEncoder.finish()]);\r\n            }\r\n        }\r\n        this.#prevWidth = this.pixelViewRect[2];\r\n        this.#prevHeight = this.pixelViewRect[3];\r\n        if (scene) {\r\n            if (!this.#passLightClusters) {\r\n                this.#passLightClusters = new PassLightClusters(redGPUContext, this);\r\n            }\r\n            const { ambientLight, pointLightList, directionalLightList } = scene.lightManager;\r\n            //ambient\r\n            {\r\n                const { redStructOffsetMap: offsetMap } = this.#systemAmbientDirectionalLightBufferInfo.descriptor;\r\n                const systemAmbientDirectionalLightBufferInfoData = this.#systemAmbientDirectionalLightBufferInfo.data;\r\n                const newData = ambientLight ? [\r\n                    scene.lightManager.ambientLight.r,\r\n                    scene.lightManager.ambientLight.g,\r\n                    scene.lightManager.ambientLight.b,\r\n                    scene.lightManager.ambientLight.intensity\r\n                ] : [0, 0, 0, 0];\r\n                systemAmbientDirectionalLightBufferInfoData.set(newData, offsetMap['ambientLight']);\r\n                this.redGPUContext.gpuDevice.queue.writeBuffer(this.#systemAmbientDirectionalLightBufferInfo.gpuBuffer, offsetMap['ambientLight'], new Float32Array(newData));\r\n            }\r\n            //directional\r\n            {\r\n                const { redStructOffsetMap: offsetMap } = this.#systemAmbientDirectionalLightBufferInfo.descriptor;\r\n                const systemAmbientDirectionalLightBufferInfoData = this.#systemAmbientDirectionalLightBufferInfo.data;\r\n                const directionalNum = directionalLightList.length;\r\n                let i = directionalNum;\r\n                while (i--) {\r\n                    const tLight = directionalLightList[i];\r\n                    const stride = (TypeSize.float32x4 / Float32Array.BYTES_PER_ELEMENT\r\n                        + TypeSize.float32x4 / Float32Array.BYTES_PER_ELEMENT);\r\n                    const offset = offsetMap['directionalLights'] + stride * i;\r\n                    const direction = vec3.subtract(vec3.create(), tLight.position, tLight.targetPosition);\r\n                    const newData = [\r\n                        tLight.r, tLight.g, tLight.b, tLight.intensity,\r\n                        direction[0], direction[1], direction[2]\r\n                    ];\r\n                    systemAmbientDirectionalLightBufferInfoData.set(newData, offset);\r\n                    this.#renderDirectionalLightNum++;\r\n                }\r\n                systemAmbientDirectionalLightBufferInfoData.set([directionalNum, 0, 0, 0], offsetMap['directionalLightCount']);\r\n                this.#systemAmbientDirectionalLightBufferInfo.update(systemAmbientDirectionalLightBufferInfoData);\r\n            }\r\n            //pointLight\r\n            {\r\n                const clusterLightBufferInfoData = this.#systemPointLight_ClusterLightsBufferInfo.data;\r\n                const { redStructOffsetMap: offsetMap } = this.#systemPointLight_ClusterLightsBufferInfo.descriptor;\r\n                const frustumPlanes = computeViewFrustumPlanes(this.projectionMatrix, this.camera.matrix);\r\n                let frustumPlanes0, frustumPlanes1, frustumPlanes2, frustumPlanes3, frustumPlanes4, frustumPlanes5;\r\n                frustumPlanes0 = frustumPlanes[0];\r\n                frustumPlanes1 = frustumPlanes[1];\r\n                frustumPlanes2 = frustumPlanes[2];\r\n                frustumPlanes3 = frustumPlanes[3];\r\n                frustumPlanes4 = frustumPlanes[4];\r\n                frustumPlanes5 = frustumPlanes[5];\r\n                const pointLightNum = pointLightList.length;\r\n                let dirtyLightNum = 0;\r\n                if (pointLightNum) {\r\n                    let i = pointLightNum;\r\n                    while (i--) {\r\n                        const tLight = pointLightList[i];\r\n                        const tLightMTX = tLight.matrix;\r\n                        let inViewPortYn = true;\r\n                        // 라이트 매트릭스 계산\r\n                        if (tLight.dirtyTransformState === CONST_DIRTY_TRANSFORM_STATE.DIRTY || tLight.dirtyLight) {\r\n                            dirtyLightNum++;\r\n                        }\r\n                        if (tLight.dirtyTransformState === CONST_DIRTY_TRANSFORM_STATE.DIRTY) {\r\n                            mat4.identity(tLightMTX);\r\n                            mat4.translate(tLightMTX, tLightMTX, [tLight.x, tLight.y, tLight.z]);\r\n                            tLight.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.NONE;\r\n                        }\r\n                        // frustum culling\r\n                        {\r\n                            let a00, a01, a02;\r\n                            let radius = tLight.radius;\r\n                            a00 = tLightMTX[12], a01 = tLightMTX[13], a02 = tLightMTX[14],\r\n                                frustumPlanes0[0] * a00 + frustumPlanes0[1] * a01 + frustumPlanes0[2] * a02 + frustumPlanes0[3] <= -radius ? inViewPortYn = false\r\n                                    : frustumPlanes1[0] * a00 + frustumPlanes1[1] * a01 + frustumPlanes1[2] * a02 + frustumPlanes1[3] <= -radius ? inViewPortYn = false\r\n                                        : frustumPlanes2[0] * a00 + frustumPlanes2[1] * a01 + frustumPlanes2[2] * a02 + frustumPlanes2[3] <= -radius ? inViewPortYn = false\r\n                                            : frustumPlanes3[0] * a00 + frustumPlanes3[1] * a01 + frustumPlanes3[2] * a02 + frustumPlanes3[3] <= -radius ? inViewPortYn = false\r\n                                                : frustumPlanes4[0] * a00 + frustumPlanes4[1] * a01 + frustumPlanes4[2] * a02 + frustumPlanes4[3] <= -radius ? inViewPortYn = false\r\n                                                    : frustumPlanes5[0] * a00 + frustumPlanes5[1] * a01 + frustumPlanes5[2] * a02 + frustumPlanes5[3] <= -radius ? inViewPortYn = false : 0;\r\n                        }\r\n                        // updateData\r\n                        if (inViewPortYn || tLight.dirtyLight) {\r\n                            const stride = (TypeSize.float32x4 / Float32Array.BYTES_PER_ELEMENT\r\n                                + TypeSize.float32x4 / Float32Array.BYTES_PER_ELEMENT);\r\n                            const offset = offsetMap['pointLights'] + stride * i;\r\n                            clusterLightBufferInfoData.set([\r\n                                ...tLight.position, tLight.radius,\r\n                                tLight.r, tLight.g, tLight.b, tLight.intensity,\r\n                            ], offset);\r\n                            this.#renderPointLightNum++;\r\n                        }\r\n                        tLight.dirtyLight = false;\r\n                    }\r\n                }\r\n                else {\r\n                }\r\n                // updatePointLightCount\r\n                clusterLightBufferInfoData.set([pointLightNum, 0, 0, 0], offsetMap['pointLightCount']);\r\n                this.redGPUContext.gpuDevice.queue.writeBuffer(this.#systemPointLight_ClusterLightsBufferInfo.gpuBuffer, offsetMap['pointLightCount'], new Float32Array([pointLightNum, 0, 0, 0]));\r\n                // send data to GPU\r\n                // if (dirtyLightNum)\r\n                this.#systemPointLight_ClusterLightsBufferInfo.update(clusterLightBufferInfoData);\r\n            }\r\n            //TODO - dirtyViewRect 기반으로 변경\r\n            // if (this.#dirtyViewRect) {\r\n            // }\r\n            {\r\n                const commandEncoder = gpuDevice.createCommandEncoder();\r\n                const passEncoder = commandEncoder.beginComputePass({\r\n                    label: 'PointLight cluster'\r\n                });\r\n                this.#passLightClusters.render(commandEncoder, passEncoder);\r\n                passEncoder.end();\r\n                gpuDevice.queue.submit([commandEncoder.finish()]);\r\n            }\r\n        }\r\n    }\r\n    #init() {\r\n        this.#systemUniformsBindGroupLayout = this.redGPUContext.gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT | GPUShaderStage.COMPUTE,\r\n                    buffer: {\r\n                        type: 'uniform',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    buffer: { type: 'uniform' }\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    visibility: GPUShaderStage.FRAGMENT | GPUShaderStage.COMPUTE,\r\n                    buffer: { type: 'read-only-storage' }\r\n                },\r\n                {\r\n                    binding: 3,\r\n                    visibility: GPUShaderStage.FRAGMENT | GPUShaderStage.COMPUTE,\r\n                    buffer: { type: 'storage' }\r\n                },\r\n            ]\r\n        });\r\n        this.#makeBuffer();\r\n        this.calcPixelViewRect();\r\n        this.updateClusters();\r\n        const renderInfo_SystemUniformBindGroupDescriptor = {\r\n            label: 'systemUniformsBindGroup',\r\n            layout: this.#systemUniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.#systemBufferInfo.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.#systemBufferInfo.gpuBufferSize\r\n                    }\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: {\r\n                        buffer: this.#systemAmbientDirectionalLightBufferInfo.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.#systemAmbientDirectionalLightBufferInfo.gpuBufferSize\r\n                    }\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    resource: {\r\n                        buffer: this.#systemPointLight_ClusterLightsBufferInfo.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.#systemPointLight_ClusterLightsBufferInfo.gpuBufferSize\r\n                    }\r\n                },\r\n                {\r\n                    binding: 3,\r\n                    resource: {\r\n                        buffer: this.#passLightClusters.clusterLightsBuffer,\r\n                        offset: 0,\r\n                        size: this.#passLightClusters.clusterLightsBuffer.size\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n        this.#renderInfo_SystemUniformBindGroup = this.redGPUContext.gpuDevice.createBindGroup(renderInfo_SystemUniformBindGroupDescriptor);\r\n    }\r\n    #makeBuffer() {\r\n        this.#finalRenderUniformBuffer = this.redGPUContext.gpuDevice.createBuffer({\r\n            size: 4 * 4 * Float32Array.BYTES_PER_ELEMENT,\r\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\r\n        });\r\n        this.#systemBufferInfo = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.mat4, valueName: 'projectionMatrix' },\r\n            { size: TypeSize.mat4, valueName: 'inverseProjectionMatrix' },\r\n            { size: TypeSize.mat4, valueName: 'cameraMatrix' },\r\n            { size: TypeSize.float32x2, valueName: 'resolution' },\r\n            { size: TypeSize.float32x2, valueName: 'nearFar' },\r\n        ]));\r\n        this.#systemAmbientDirectionalLightBufferInfo = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.float32x4, valueName: 'ambientLight' },\r\n            { size: TypeSize.float32x4, valueName: 'directionalLightCount' },\r\n            {\r\n                valueName: 'directionalLights',\r\n                struct: [\r\n                    { size: TypeSize.float32x3, valueName: 'directionalLightColor' },\r\n                    { size: TypeSize.float32, valueName: 'directionalLightIntensity' },\r\n                    { size: TypeSize.float32x3, valueName: 'directionalLightDirection' },\r\n                ],\r\n                num: LightManager.MAX_DIRECTIONAL_LIGHT_NUM,\r\n            }\r\n        ]), GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST);\r\n        this.#systemPointLight_ClusterLightsBufferInfo = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.float32x4, valueName: 'pointLightCount' },\r\n            {\r\n                valueName: 'pointLights',\r\n                struct: [\r\n                    { size: TypeSize.float32x3, valueName: 'pointLightPosition' },\r\n                    { size: TypeSize.float32, valueName: 'pointLightRange' },\r\n                    { size: TypeSize.float32x3, valueName: 'pointLightColor' },\r\n                    { size: TypeSize.float32, valueName: 'pointLightIntensity' },\r\n                ],\r\n                num: LightManager.MAX_POINT_LIGHT_NUM,\r\n            }\r\n        ]), GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST);\r\n    }\r\n}\r\nexport default View;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport throwError from \"../../util/errorFunc/throwError\";\r\nimport { mat4 } from \"../../util/gl-matrix\";\r\nimport ViewDebugger from \"./ViewDebugger\";\r\nclass ViewBase extends RedGPUContextBase {\r\n    #dirtyViewRect = true;\r\n    #x = 0;\r\n    #y = 0;\r\n    #width = '100%';\r\n    #height = '100%';\r\n    #pixelViewRect = [0, 0, 0, 0];\r\n    #projectionMatrix = mat4.create();\r\n    #viewDebugger = new ViewDebugger();\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     */\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext);\r\n    }\r\n    get x() {\r\n        return this.#x;\r\n    }\r\n    set x(value) {\r\n        switch (typeof value) {\r\n            case 'number':\r\n                this.#x = value;\r\n                break;\r\n            case 'string':\r\n                if (value.includes('%')) {\r\n                    this.#x = value;\r\n                    break;\r\n                }\r\n            default:\r\n                throwError('x : ', '숫자나 %모델만 허용됩니다.');\r\n        }\r\n        this.calcPixelViewRect();\r\n    }\r\n    get y() {\r\n        return this.#y;\r\n    }\r\n    set y(value) {\r\n        switch (typeof value) {\r\n            case 'number':\r\n                this.#y = value;\r\n                break;\r\n            case 'string':\r\n                if (value.includes('%')) {\r\n                    this.#y = value;\r\n                    break;\r\n                }\r\n            default:\r\n                throwError('y : ', '숫자 or %모델 만 허용됩니다.');\r\n        }\r\n        this.calcPixelViewRect();\r\n    }\r\n    get width() {\r\n        return this.#width;\r\n    }\r\n    set width(value) {\r\n        const msg = 'width : 음수가 아닌 숫자 or %모델 만 허용됩니다.';\r\n        switch (typeof value) {\r\n            case 'number':\r\n                if (value >= 0) {\r\n                    this.#width = value;\r\n                    break;\r\n                }\r\n                throwError(msg);\r\n                break;\r\n            case 'string':\r\n                if (value.includes('%')) {\r\n                    if (+value.replace('%', '') >= 0) {\r\n                        this.#width = value;\r\n                        break;\r\n                    }\r\n                }\r\n            default:\r\n                throwError(msg);\r\n        }\r\n        this.calcPixelViewRect();\r\n    }\r\n    get height() {\r\n        return this.#height;\r\n    }\r\n    set height(value) {\r\n        const msg = 'width : 음수가 아닌 숫자 or %모델 만 허용됩니다.';\r\n        switch (typeof value) {\r\n            case 'number':\r\n                if (value >= 0) {\r\n                    this.#height = value;\r\n                    break;\r\n                }\r\n                throwError(msg);\r\n                break;\r\n            case 'string':\r\n                if (value.includes('%')) {\r\n                    if (+value.replace('%', '') >= 0) {\r\n                        this.#height = value;\r\n                        break;\r\n                    }\r\n                }\r\n            default:\r\n                throwError(msg);\r\n        }\r\n        this.calcPixelViewRect();\r\n    }\r\n    get pixelViewRect() {\r\n        return this.#pixelViewRect;\r\n    }\r\n    get pixelViewRectInt() {\r\n        return [\r\n            Math.floor(this.#pixelViewRect[0]),\r\n            Math.floor(this.#pixelViewRect[1]),\r\n            Math.floor(this.#pixelViewRect[2]),\r\n            Math.floor(this.#pixelViewRect[3])\r\n        ];\r\n    }\r\n    get projectionMatrix() {\r\n        return this.#projectionMatrix;\r\n    }\r\n    get inverseProjectionMatrix() {\r\n        return mat4.invert(mat4.create(), this.#projectionMatrix);\r\n    }\r\n    get viewDebugger() {\r\n        return this.#viewDebugger;\r\n    }\r\n    calcPixelViewRect() {\r\n        const parentPixelSize = this.redGPUContext.pixelSizeInt;\r\n        const { renderScale } = this.redGPUContext;\r\n        this.#pixelViewRect = [\r\n            ((typeof this.#x === 'number' ? renderScale * this.#x : parentPixelSize.width * parseFloat(this.#x) / 100)),\r\n            ((typeof this.#y === 'number' ? renderScale * this.#y : parentPixelSize.height * parseFloat(this.#y) / 100)),\r\n            ((typeof this.#width === 'number' ? renderScale * this.#width : parentPixelSize.width * parseFloat(this.#width) / 100)),\r\n            ((typeof this.#height === 'number' ? renderScale * this.#height : parentPixelSize.height * parseFloat(this.#height) / 100)),\r\n        ];\r\n        this.#dirtyViewRect = true;\r\n    }\r\n    setSize(w = this.#width, h = this.#height) {\r\n        this.width = w;\r\n        this.height = h;\r\n    }\r\n    setLocation(x = this.#x, y = this.#y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\nexport default ViewBase;\r\n","class ViewDebugger {\r\n    ViewRect = {};\r\n    Frame = {};\r\n    Render = {};\r\n    Light = {};\r\n    constructor() {\r\n    }\r\n    update(view, scene, startTime, prevTime, beforeTime, mainTime, afterTime, renderMeshNum, triangleNum) {\r\n        const { Frame, Render, Light, ViewRect } = this;\r\n        //\r\n        this['View Label'] = view['label'];\r\n        this['scene Label'] = scene['label'];\r\n        ViewRect['size'] = `${view.width} x ${view.height} (${view.pixelViewRect[2]}px x ${view.pixelViewRect[3]}px)`;\r\n        ViewRect['location'] = `${view.x} x ${view.y} (${view.pixelViewRect[0]}px x ${view.pixelViewRect[1]}px)`;\r\n        //\r\n        Frame['FrameNum'] = (Frame['FrameNum'] || 0) + 1;\r\n        //\r\n        // const fps: number = 1000 / (beforeTime + mainTime + afterTime)\r\n        // console.log(startTime - prevTime)\r\n        const fps = 1000 / (startTime - prevTime);\r\n        Frame['Before render time'] = +beforeTime.toFixed(2);\r\n        Frame['Main render time'] = +mainTime.toFixed(2);\r\n        Frame['After render time'] = +afterTime.toFixed(2);\r\n        Frame['Frame render time'] = +(beforeTime + mainTime + afterTime).toFixed(2);\r\n        Frame['Frame FPS'] = +(fps).toFixed(0);\r\n        Frame['Total Frame FPS'] = +(Frame['Total Frame FPS'] || 0) + fps;\r\n        Frame['AVG FPS'] = +(Frame['Total Frame FPS'] / Frame['FrameNum']).toFixed(2);\r\n        //\r\n        Render['Total Mesh'] = scene.children.length;\r\n        Render['Render Mesh'] = renderMeshNum;\r\n        Render['Triangle Num'] = triangleNum;\r\n        //\r\n        Light['Total PointLight'] = scene.lightManager.pointLightList.length;\r\n        Light['Render PointLight'] = view.renderPointLightNum;\r\n        Light['Render DirectionalLight'] = view.renderDirectionalLightNum;\r\n        //\r\n    }\r\n}\r\nexport default ViewDebugger;\r\n","import View from \"./View\";\r\nimport ViewDebugger from \"./ViewDebugger\";\r\nexport { View, ViewDebugger, };\r\n","import RedGPUContextBase from \"../context/RedGPUContextBase\";\r\nimport UniformBufferDescriptor from \"../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport makeShaderModule from \"../resource/makeShaderModule\";\r\nimport makeUUID from \"../util/makeUUID\";\r\nclass BaseMaterial extends RedGPUContextBase {\r\n    #vShaderModule;\r\n    #fShaderModule;\r\n    #fragmentUniformBuffer;\r\n    //////////////////////////\r\n    #renderInfo_FragmentUniformBindGroup;\r\n    #renderInfo_pipeline_Fragment;\r\n    #renderInfo_FragmentUniformBindGroupDescriptor;\r\n    #renderInfo_FragmentUniformsBindGroupLayout;\r\n    //////////////////////////\r\n    #bindGroupID = makeUUID();\r\n    #dirtyTexture = true;\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     * @param vertexSource\r\n     * @param fragmentSource\r\n     * @param fragmentUniformBufferDescriptor\r\n     * @param fragmentUniformBindGroupLayoutDescriptor\r\n     */\r\n    constructor(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor) {\r\n        super(redGPUContext);\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.#vShaderModule = makeShaderModule(gpuDevice, vertexSource, `vertex_${this.constructor.name}`);\r\n        this.#fShaderModule = makeShaderModule(gpuDevice, fragmentSource, `fragment_${this.constructor.name}`);\r\n        this.#fragmentUniformBuffer = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor(fragmentUniformBufferDescriptor));\r\n        // console.log(this,this.#fragmentUniformBuffer)\r\n        this.#updateRenderInfo_FragmentUniformsBindGroupLayout(fragmentUniformBindGroupLayoutDescriptor);\r\n        // console.log(this)\r\n    }\r\n    get vShaderModule() {\r\n        return this.#vShaderModule;\r\n    }\r\n    get fShaderModule() {\r\n        return this.#fShaderModule;\r\n    }\r\n    get fragmentUniformBuffer() {\r\n        return this.#fragmentUniformBuffer;\r\n    }\r\n    get renderInfo_FragmentUniformBindGroup() {\r\n        return this.#renderInfo_FragmentUniformBindGroup;\r\n    }\r\n    get renderInfo_pipeline_Fragment() {\r\n        return this.#renderInfo_pipeline_Fragment;\r\n    }\r\n    get renderInfo_FragmentUniformsBindGroupLayout() {\r\n        return this.#renderInfo_FragmentUniformsBindGroupLayout;\r\n    }\r\n    get bindGroupID() {\r\n        return this.#bindGroupID;\r\n    }\r\n    set bindGroupID(value) {\r\n        this.#bindGroupID = value;\r\n    }\r\n    get dirtyTexture() {\r\n        return this.#dirtyTexture;\r\n    }\r\n    set dirtyTexture(value) {\r\n        this.#dirtyTexture = value;\r\n    }\r\n    updateRenderInfo_pipeline_Fragment() {\r\n        // TODO 속성이 변경되면 아래 정보가 변경되니 업데이트 해줘야함\r\n        const preferredCanvasFormat = navigator.gpu.getPreferredCanvasFormat();\r\n        this.#renderInfo_pipeline_Fragment = {\r\n            module: this.fShaderModule,\r\n            entryPoint: 'main',\r\n            targets: [\r\n                {\r\n                    format: preferredCanvasFormat,\r\n                    blend: {\r\n                        color: {\r\n                            srcFactor: \"src-alpha\",\r\n                            dstFactor: \"one-minus-src-alpha\",\r\n                            operation: \"add\"\r\n                        },\r\n                        alpha: {\r\n                            srcFactor: \"one\",\r\n                            dstFactor: \"one-minus-src-alpha\",\r\n                            operation: \"add\"\r\n                        }\r\n                    }\r\n                },\r\n            ],\r\n        };\r\n    }\r\n    updateFragmentUniformBindGroup(renderInfo_FragmentUniformBindGroupDescriptor) {\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        // 유니폼 바인딩 레이아웃에 맞는 디스크립터를 생성한다.\r\n        // console.log(renderInfo_FragmentUniformBindGroupDescriptor)\r\n        this.#renderInfo_FragmentUniformBindGroupDescriptor = renderInfo_FragmentUniformBindGroupDescriptor;\r\n        // 재질 유니폼\r\n        this.#renderInfo_FragmentUniformBindGroup = gpuDevice.createBindGroup(this.#renderInfo_FragmentUniformBindGroupDescriptor);\r\n    }\r\n    updateBindGroup() {\r\n        throw 'updateBindGroup 재정의해야함';\r\n    }\r\n    initUniformValue() {\r\n        throw 'initUniformValue 재정의해야함';\r\n    }\r\n    #updateRenderInfo_FragmentUniformsBindGroupLayout(fragmentUniformBindGroupLayoutDescriptor) {\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.#renderInfo_FragmentUniformsBindGroupLayout = gpuDevice.createBindGroupLayout(fragmentUniformBindGroupLayoutDescriptor);\r\n        this.updateRenderInfo_pipeline_Fragment();\r\n    }\r\n}\r\nexport default BaseMaterial;\r\n","\"use strict\";\r\nimport TypeSize from \"../resource/buffers/TypeSize\";\r\nimport hexadecimalToRgb from \"../util/color/hexadecimalToRgb\";\r\nlet float32Array_1 = new Float32Array(1);\r\nconst MaterialMix = (Base, ...texture) => {\r\n    return [Base, ...texture].reduce((parent, extender) => {\r\n        return extender(parent);\r\n    });\r\n};\r\nconst alpha = Base => class extends Base {\r\n    #alpha = 1;\r\n    get alpha() {\r\n        return this.#alpha;\r\n    }\r\n    set alpha(value) {\r\n        this.#alpha = value;\r\n        float32Array_1[0] = value;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.fragmentUniformBuffer.gpuBuffer, this.fragmentUniformBuffer.descriptor.redGpuStructOffsetMap['alpha'], float32Array_1);\r\n    }\r\n};\r\nconst lightProperty = Base => class extends Base {\r\n    #shininess = 32;\r\n    #specularPower = 1;\r\n    #specularColor = 0xffffff;\r\n    #specularColorRGB = new Float32Array([1, 1, 1]);\r\n    get shininess() {\r\n        return this.#shininess;\r\n    }\r\n    set shininess(value) {\r\n        this.#shininess = value;\r\n        float32Array_1[0] = this.#shininess;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.fragmentUniformBuffer.gpuBuffer, this.fragmentUniformBuffer.descriptor.redGpuStructOffsetMap['shininess'], float32Array_1);\r\n    }\r\n    get specularPower() {\r\n        return this.#specularPower;\r\n    }\r\n    set specularPower(value) {\r\n        this.#specularPower = value;\r\n        float32Array_1[0] = this.#specularPower;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.fragmentUniformBuffer.gpuBuffer, this.fragmentUniformBuffer.descriptor.redGpuStructOffsetMap['specularPower'], float32Array_1);\r\n    }\r\n    get specularColor() {\r\n        return this.#specularColor;\r\n    }\r\n    set specularColor(value) {\r\n        this.#specularColor = value;\r\n        let rgb = hexadecimalToRgb(value);\r\n        this.#specularColorRGB[0] = rgb.r;\r\n        this.#specularColorRGB[1] = rgb.g;\r\n        this.#specularColorRGB[2] = rgb.b;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.fragmentUniformBuffer.gpuBuffer, this.fragmentUniformBuffer.descriptor.redGpuStructOffsetMap['specularColor'], this.#specularColorRGB);\r\n    }\r\n    get specularColorRGB() {\r\n        return this.#specularColorRGB;\r\n    }\r\n};\r\n// texture\r\nconst diffuseTexture = Base => class extends Base {\r\n    #diffuseTexture;\r\n    #diffuseTextureSampler;\r\n    get diffuseTexture() {\r\n        return this.#diffuseTexture;\r\n    }\r\n    set diffuseTexture(value) {\r\n        this.#diffuseTexture = value;\r\n        if (this.#diffuseTexture) {\r\n            this.#diffuseTexture.addTargetMaterial(this);\r\n        }\r\n        this.dirtyTexture = true;\r\n    }\r\n    get diffuseTextureSampler() {\r\n        return this.#diffuseTextureSampler;\r\n    }\r\n    set diffuseTextureSampler(value) {\r\n        this.#diffuseTextureSampler = value;\r\n    }\r\n};\r\nexport default {\r\n    mix: MaterialMix,\r\n    alpha,\r\n    alphaUniformDefine: [{ size: TypeSize.float32, valueName: 'alpha' }],\r\n    lightProperty,\r\n    lightPropertyUniformDefine: [\r\n        { size: TypeSize.float32, valueName: 'shininess' },\r\n        { size: TypeSize.float32, valueName: 'specularPower' },\r\n        { size: TypeSize.float32x3, valueName: 'specularColor' }\r\n    ],\r\n    //\r\n    diffuseTexture\r\n};\r\n","import TextureSampler from \"../../resource/texture/TextureSampler\";\r\nimport BaseMaterial from \"../BaseMaterial\";\r\nimport Mix from \"../MaterialMix\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        },\r\n        {\r\n            binding: 1,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            sampler: {\r\n                type: 'filtering',\r\n            },\r\n        },\r\n        {\r\n            binding: 2,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            texture: {}\r\n        }\r\n    ]\r\n};\r\nconst fragmentUniformBufferDescriptor = [\r\n    ...Mix.alphaUniformDefine,\r\n];\r\nclass BitmapMaterial extends Mix.mix(BaseMaterial, Mix.diffuseTexture, Mix.alpha) {\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     * @param diffuseTexture\r\n     */\r\n    constructor(redGPUContext, diffuseTexture) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.diffuseTextureSampler = new TextureSampler(redGPUContext);\r\n        this.#initFragmentUniformInfo(gpuDevice);\r\n        this.diffuseTexture = diffuseTexture;\r\n        console.log(this);\r\n    }\r\n    updateBindGroup() {\r\n        if (this.dirtyTexture) {\r\n            this.updateFragmentUniformBindGroup({\r\n                layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n                entries: [\r\n                    {\r\n                        binding: 0,\r\n                        resource: {\r\n                            buffer: this.fragmentUniformBuffer.gpuBuffer,\r\n                            offset: 0,\r\n                            size: this.fragmentUniformBuffer.gpuBufferSize\r\n                        }\r\n                    },\r\n                    {\r\n                        binding: 1,\r\n                        resource: this.diffuseTextureSampler.gpuSampler,\r\n                    },\r\n                    {\r\n                        binding: 2,\r\n                        resource: this.diffuseTexture?.gpuTextureView || (this.redGPUContext.resourceManager.emptyTextureInfo.textureView)\r\n                    }\r\n                ]\r\n            });\r\n            this.dirtyTexture = false;\r\n            console.log(this);\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param gpuDevice\r\n     * @private\r\n     */\r\n    #initFragmentUniformInfo(gpuDevice) {\r\n        this.#initUniformValue();\r\n        this.updateBindGroup();\r\n    }\r\n    #initUniformValue() {\r\n        const offsetMap = this.fragmentUniformBuffer.descriptor.redStructOffsetMap;\r\n        for (const k in offsetMap) {\r\n            this[k] = this[k];\r\n        }\r\n    }\r\n}\r\nexport default BitmapMaterial;\r\n","import TextureSampler from \"../../resource/texture/TextureSampler\";\r\nimport BaseMaterial from \"../BaseMaterial\";\r\nimport Mix from \"../MaterialMix\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        },\r\n        {\r\n            binding: 1,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            sampler: {\r\n                type: 'filtering',\r\n            },\r\n        },\r\n        {\r\n            binding: 2,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            texture: {}\r\n        }\r\n    ]\r\n};\r\nconst fragmentUniformBufferDescriptor = [\r\n    ...Mix.alphaUniformDefine,\r\n    ...Mix.lightPropertyUniformDefine\r\n];\r\nclass BitmapPhongMaterial extends Mix.mix(BaseMaterial, Mix.diffuseTexture, Mix.alpha, Mix.lightProperty) {\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     * @param diffuseTexture\r\n     */\r\n    constructor(redGPUContext, diffuseTexture) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.diffuseTextureSampler = new TextureSampler(redGPUContext);\r\n        this.#initFragmentUniformInfo(gpuDevice);\r\n        this.diffuseTexture = diffuseTexture;\r\n        console.log(this);\r\n    }\r\n    updateBindGroup() {\r\n        if (this.dirtyTexture) {\r\n            this.updateFragmentUniformBindGroup({\r\n                layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n                entries: [\r\n                    {\r\n                        binding: 0,\r\n                        resource: {\r\n                            buffer: this.fragmentUniformBuffer.gpuBuffer,\r\n                            offset: 0,\r\n                            size: this.fragmentUniformBuffer.gpuBufferSize\r\n                        }\r\n                    },\r\n                    {\r\n                        binding: 1,\r\n                        resource: this.diffuseTextureSampler.gpuSampler,\r\n                    },\r\n                    {\r\n                        binding: 2,\r\n                        resource: this.diffuseTexture?.gpuTextureView || (this.redGPUContext.resourceManager.emptyTextureInfo.textureView)\r\n                    }\r\n                ]\r\n            });\r\n            this.dirtyTexture = false;\r\n            console.log(this);\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param gpuDevice\r\n     * @private\r\n     */\r\n    #initFragmentUniformInfo(gpuDevice) {\r\n        this.#initUniformValue();\r\n        this.updateBindGroup();\r\n    }\r\n    #initUniformValue() {\r\n        const offsetMap = this.fragmentUniformBuffer.descriptor.redStructOffsetMap;\r\n        for (const k in offsetMap) {\r\n            this[k] = this[k];\r\n        }\r\n    }\r\n}\r\nexport default BitmapPhongMaterial;\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport hexadecimalToRgb from \"../../util/color/hexadecimalToRgb\";\r\nimport BaseMaterial from \"../BaseMaterial\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBufferDescriptor = [\r\n    { size: TypeSize.float32x4, valueName: 'color' },\r\n    { size: TypeSize.float32, valueName: 'alpha' },\r\n];\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        }\r\n    ]\r\n};\r\nclass ColorMaterial extends BaseMaterial {\r\n    // TODO - 컬러는 color, rgba로 무조건 구성하도록 때려야하나?\r\n    #color;\r\n    #rgb;\r\n    #alpha = 1;\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     */\r\n    constructor(redGPUContext, color, alpha = 1) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        const t0 = color || `#${(Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0')}`;\r\n        this.color = t0;\r\n        // console.log(this)\r\n        this.#alpha = alpha;\r\n        this.#initFragmentUniformInfo();\r\n        // console.log(this)\r\n    }\r\n    get color() {\r\n        return this.#color;\r\n    }\r\n    set color(value) {\r\n        this.#color = value;\r\n        this.#rgb = hexadecimalToRgb(value, true);\r\n    }\r\n    get rgb() {\r\n        return this.#rgb;\r\n    }\r\n    get alpha() {\r\n        return this.#alpha;\r\n    }\r\n    set alpha(value) {\r\n        this.#alpha = value;\r\n    }\r\n    initUniformValue() {\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        gpuDevice.queue.writeBuffer(this.fragmentUniformBuffer.gpuBuffer, 0, new Float32Array([\r\n            this.rgb[0],\r\n            this.rgb[1],\r\n            this.rgb[2],\r\n            this.alpha\r\n        ]));\r\n    }\r\n    updateBindGroup() {\r\n        this.updateFragmentUniformBindGroup({\r\n            layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.fragmentUniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.fragmentUniformBuffer.gpuBufferSize\r\n                    }\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    #initFragmentUniformInfo() {\r\n        this.initUniformValue();\r\n        this.updateBindGroup();\r\n    }\r\n}\r\nexport default ColorMaterial;\r\n","import BitmapMaterial from \"./bitmapMaterial/BitmapMaterial\";\r\nimport BitmapPhongMaterial from \"./bitmapPhoneMaterial/BitmapPhongMaterial\";\r\nimport ColorMaterial from \"./colorMaterial/ColorMaterial\";\r\nimport SkyBoxMaterial from \"./skyboxMaterial/SkyBoxMaterial\";\r\nexport { SkyBoxMaterial, ColorMaterial, BitmapMaterial, BitmapPhongMaterial };\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport TextureSampler from \"../../resource/texture/TextureSampler\";\r\nimport BaseMaterial from \"../BaseMaterial\";\r\nimport fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst fragmentUniformBufferDescriptor = [\r\n    { size: TypeSize.float32, valueName: 'opacity' },\r\n];\r\nconst fragmentUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        },\r\n        {\r\n            binding: 1,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            sampler: {\r\n                type: 'filtering',\r\n            },\r\n        },\r\n        {\r\n            binding: 2,\r\n            visibility: GPUShaderStage.FRAGMENT,\r\n            texture: {\r\n                viewDimension: 'cube'\r\n            }\r\n        }\r\n    ]\r\n};\r\nclass SkyBoxMaterial extends BaseMaterial {\r\n    #texture;\r\n    #sampler;\r\n    /**\r\n     *\r\n     * @param redGPUContext\r\n     * @param texture\r\n     */\r\n    constructor(redGPUContext, texture) {\r\n        super(redGPUContext, vertexSource, fragmentSource, fragmentUniformBufferDescriptor, fragmentUniformBindGroupLayoutDescriptor);\r\n        const gpuDevice = this.redGPUContext.gpuDevice;\r\n        this.#sampler = new TextureSampler(redGPUContext, { magFilter: 'linear', minFilter: 'linear', });\r\n        this.#initFragmentUniformInfo(gpuDevice);\r\n        this.texture = texture;\r\n        // console.log(this)\r\n    }\r\n    get texture() {\r\n        return this.#texture;\r\n    }\r\n    set texture(value) {\r\n        this.#texture = value;\r\n        if (this.#texture) {\r\n            this.#texture.addTargetMaterial(this);\r\n        }\r\n        this.dirtyTexture = true;\r\n    }\r\n    updateBindGroup() {\r\n        if (this.dirtyTexture) {\r\n            this.updateFragmentUniformBindGroup({\r\n                layout: this.renderInfo_FragmentUniformsBindGroupLayout,\r\n                entries: [\r\n                    {\r\n                        binding: 0,\r\n                        resource: {\r\n                            buffer: this.fragmentUniformBuffer.gpuBuffer,\r\n                            offset: 0,\r\n                            size: this.fragmentUniformBuffer.gpuBufferSize\r\n                        }\r\n                    },\r\n                    {\r\n                        binding: 1,\r\n                        resource: this.#sampler.gpuSampler,\r\n                    },\r\n                    {\r\n                        binding: 2,\r\n                        resource: this.#texture?.gpuTextureView || (this.redGPUContext.resourceManager.emptyCubeTextureInfo.textureView)\r\n                    }\r\n                ]\r\n            });\r\n            this.dirtyTexture = false;\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param gpuDevice\r\n     * @private\r\n     */\r\n    #initFragmentUniformInfo(gpuDevice) {\r\n        this.updateBindGroup();\r\n    }\r\n}\r\nexport default SkyBoxMaterial;\r\n","import BaseObject3DPipeline from \"./BaseObject3DPipeline\";\r\nclass BaseObject3D extends BaseObject3DPipeline {\r\n    #vertexUniformBufferDescriptor;\r\n    #vertexUniformBindGroupLayoutDescriptor;\r\n    constructor(redGPUContext, vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor) {\r\n        super(redGPUContext, vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor);\r\n        this.#vertexUniformBufferDescriptor = vertexUniformBufferDescriptor;\r\n        this.#vertexUniformBindGroupLayoutDescriptor = vertexUniformBindGroupLayoutDescriptor;\r\n    }\r\n    get vertexUniformBufferDescriptor() {\r\n        return this.#vertexUniformBufferDescriptor;\r\n    }\r\n    get vertexUniformBindGroupLayoutDescriptor() {\r\n        return this.#vertexUniformBindGroupLayoutDescriptor;\r\n    }\r\n}\r\nexport default BaseObject3D;\r\n","import RedGPUContext from \"../../context/RedGPUContext\";\r\nimport UniformBufferFloat32 from \"../../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport throwErrorInstanceOf from \"../../util/errorFunc/throwErrorInstanceOf\";\r\nimport MeshPipeline from \"../mesh/MeshPipeline\";\r\nimport BaseObject3DTransform from \"./BaseObject3DTransform\";\r\nclass BaseObject3DPipeline extends BaseObject3DTransform {\r\n    dirtyPipeline = false;\r\n    materialBindGroupID;\r\n    ///////////////\r\n    #geometry;\r\n    #material;\r\n    ///////////////\r\n    #vertexUniformBuffer;\r\n    #renderInfo_VertexUniformBindGroupLayout;\r\n    #renderInfo_pipeline_VertexBuffersInfo;\r\n    #renderInfo_VertexUniformBindGroup;\r\n    #renderInfo_VertexUniformBindGroupDescriptor;\r\n    #renderInfo_pipeline;\r\n    ///////////////////////////////////////////////////\r\n    #topology = 'triangle-list';\r\n    #cullMode = 'none';\r\n    #frontFace = 'ccw';\r\n    #depthWriteEnabled = true;\r\n    #depthCompare = 'less-equal';\r\n    #depthStencilFormat = \"depth24plus-stencil8\";\r\n    ///////////////////////////////////////////////////\r\n    #redGPUContext;\r\n    constructor(redGPUContext, vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor) {\r\n        super();\r\n        if (!(redGPUContext instanceof RedGPUContext))\r\n            throwErrorInstanceOf(this, 'redGPUContext', 'RedGPUContext');\r\n        this.#redGPUContext = redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        this.#vertexUniformBuffer = new UniformBufferFloat32(this.redGPUContext, vertexUniformBufferDescriptor);\r\n        this.#renderInfo_VertexUniformBindGroupLayout = gpuDevice.createBindGroupLayout(vertexUniformBindGroupLayoutDescriptor);\r\n    }\r\n    get geometry() {\r\n        return this.#geometry;\r\n    }\r\n    set geometry(value) {\r\n        this.#geometry = value;\r\n        this.dirtyPipeline = true;\r\n        if (this.#geometry) {\r\n            this.#renderInfo_pipeline_VertexBuffersInfo = [\r\n                {\r\n                    arrayStride: this.geometry.vertexBuffer.arrayStride,\r\n                    attributes: this.geometry.vertexBuffer.attributes\r\n                }\r\n            ];\r\n        }\r\n    }\r\n    get material() {\r\n        return this.#material;\r\n    }\r\n    set material(value) {\r\n        this.#material = value;\r\n        this.materialBindGroupID = this.material?.bindGroupID;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get vertexUniformBuffer() {\r\n        return this.#vertexUniformBuffer;\r\n    }\r\n    get renderInfo_VertexUniformBindGroupLayout() {\r\n        return this.#renderInfo_VertexUniformBindGroupLayout;\r\n    }\r\n    get renderInfo_pipeline_VertexBuffersInfo() {\r\n        return this.#renderInfo_pipeline_VertexBuffersInfo;\r\n    }\r\n    get renderInfo_VertexUniformBindGroup() {\r\n        return this.#renderInfo_VertexUniformBindGroup;\r\n    }\r\n    get renderInfo_pipeline() {\r\n        return this.#renderInfo_pipeline;\r\n    }\r\n    get topology() {\r\n        return this.#topology;\r\n    }\r\n    set topology(value) {\r\n        this.#topology = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get cullMode() {\r\n        return this.#cullMode;\r\n    }\r\n    set cullMode(value) {\r\n        this.#cullMode = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get frontFace() {\r\n        return this.#frontFace;\r\n    }\r\n    set frontFace(value) {\r\n        this.#frontFace = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get depthWriteEnabled() {\r\n        return this.#depthWriteEnabled;\r\n    }\r\n    set depthWriteEnabled(value) {\r\n        this.#depthWriteEnabled = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get depthCompare() {\r\n        return this.#depthCompare;\r\n    }\r\n    set depthCompare(value) {\r\n        this.#depthCompare = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get depthStencilFormat() {\r\n        return this.#depthStencilFormat;\r\n    }\r\n    set depthStencilFormat(value) {\r\n        this.#depthStencilFormat = value;\r\n        this.dirtyPipeline = true;\r\n    }\r\n    get redGPUContext() {\r\n        return this.#redGPUContext;\r\n    }\r\n    updateVertexUniformBindGroup(renderInfo_VertexUniformBindGroupDescriptor) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        // TODO 유니포내용중 텍스쳐 등이 변화하면 업데이트 해야함\r\n        this.#renderInfo_VertexUniformBindGroupDescriptor = renderInfo_VertexUniformBindGroupDescriptor;\r\n        // 모델유니폼\r\n        this.#renderInfo_VertexUniformBindGroup = gpuDevice.createBindGroup(this.#renderInfo_VertexUniformBindGroupDescriptor);\r\n    }\r\n    updatePipeline(targetSystemUniformsBindGroupLayout) {\r\n        // 재질 바인드 그룹이 변경되었나 체크\r\n        if (this.materialBindGroupID !== this.material?.bindGroupID) {\r\n            this.materialBindGroupID = this.material?.bindGroupID;\r\n            this.dirtyPipeline = true;\r\n        }\r\n        if (this.dirtyPipeline) {\r\n            if (this.material) {\r\n                this.material.updateBindGroup();\r\n            }\r\n            if (this.geometry && this.material) {\r\n                this.#renderInfo_pipeline = new MeshPipeline(this.redGPUContext, this, targetSystemUniformsBindGroupLayout);\r\n            }\r\n            this.dirtyPipeline = false;\r\n        }\r\n    }\r\n}\r\nexport default BaseObject3DPipeline;\r\n","import { mat4 } from \"../../util/gl-matrix\";\r\nimport CONST_DIRTY_TRANSFORM_STATE from \"./CONST_DIRTY_TRANSFORM_STATE\";\r\nimport DisplayContainer from \"./DisplayContainer\";\r\nclass BaseObject3DTransform extends DisplayContainer {\r\n    dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    ///////////////\r\n    matrix = mat4.create();\r\n    normalMatrix = mat4.create();\r\n    ///////////////\r\n    #scaleX = 1;\r\n    #scaleY = 1;\r\n    #scaleZ = 1;\r\n    #x = 0;\r\n    #y = 0;\r\n    #z = 0;\r\n    ///////////////\r\n    #rotationX = 0;\r\n    #rotationY = 0;\r\n    #rotationZ = 0;\r\n    constructor() {\r\n        super();\r\n    }\r\n    get scaleX() {\r\n        return this.#scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this.#scaleX = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get scaleY() {\r\n        return this.#scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this.#scaleY = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get scaleZ() {\r\n        return this.#scaleZ;\r\n    }\r\n    set scaleZ(value) {\r\n        this.#scaleZ = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get x() {\r\n        return this.#x;\r\n    }\r\n    set x(value) {\r\n        this.#x = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get y() {\r\n        return this.#y;\r\n    }\r\n    set y(value) {\r\n        this.#y = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get z() {\r\n        return this.#z;\r\n    }\r\n    set z(value) {\r\n        this.#z = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get position() {\r\n        return [this.#x, this.#y, this.#z];\r\n    }\r\n    get rotationX() {\r\n        return this.#rotationX;\r\n    }\r\n    set rotationX(value) {\r\n        this.#rotationX = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get rotationY() {\r\n        return this.#rotationY;\r\n    }\r\n    set rotationY(value) {\r\n        this.#rotationY = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    get rotationZ() {\r\n        return this.#rotationZ;\r\n    }\r\n    set rotationZ(value) {\r\n        this.#rotationZ = value;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    setScale(x, y, z) {\r\n        this.#scaleX = x;\r\n        this.#scaleY = y;\r\n        this.#scaleZ = z;\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.DIRTY;\r\n    }\r\n    setPosition(x, y, z) {\r\n        this.#x = x;\r\n        this.#y = y;\r\n        this.#z = z;\r\n    }\r\n}\r\nexport default BaseObject3DTransform;\r\n","const CONST_DIRTY_TRANSFORM_STATE = {\r\n    NONE: 0,\r\n    DIRTY: 1,\r\n    NEED_GPU_UPDATE: 2\r\n};\r\nexport default CONST_DIRTY_TRANSFORM_STATE;\r\n","/**\r\n * DisplayContainer는 자식/부모 객체 관리기능을 담당하는 객체입니다.\r\n */\r\nclass DisplayContainer {\r\n    /**\r\n     * 자식객체 리스트\r\n     * @private\r\n     */\r\n    #children = [];\r\n    /**\r\n     * 부모객체 값\r\n     * @private\r\n     */\r\n    #parent;\r\n    constructor() {\r\n    }\r\n    /**\r\n     * 자식객체 리스트를 반환힙니다.\r\n     */\r\n    get children() {\r\n        return this.#children;\r\n    }\r\n    /**\r\n     * 설정된 부모 객체값을 반환합니다.\r\n     */\r\n    get parent() {\r\n        return this.#parent;\r\n    }\r\n    /**\r\n     * 부모 객체를 설정합니다.\r\n     * @param value\r\n     */\r\n    set parent(value) {\r\n        this.#parent = value;\r\n    }\r\n    /**\r\n     * 자식 객체를 등록합니다.\r\n     * * 추가하려는 객체에 parent 값이 존재할경우 해당 parent에서 삭제후 추가합니다.\r\n     * @param child\r\n     */\r\n    addChild(child) {\r\n        if (child.parent)\r\n            child.parent.remove(child);\r\n        child.parent = this;\r\n        this.#children.push(child);\r\n        return this;\r\n    }\r\n    /**\r\n     *  원하는 index 위치에 자식 객체를 등록합니다.\r\n     * * 추가하려는 객체에 parent 값이 존재할경우 해당 parent에서 삭제후 추가합니다.\r\n     * * index가 children 길이보다 길경우 제일 마지막에 push됩니다.\r\n     * @param child\r\n     * @param index\r\n     */\r\n    addChildAt(child, index) {\r\n        if (child.parent)\r\n            child.parent.remove(child);\r\n        child.parent = this;\r\n        if (this.#children.length < index)\r\n            index = this.#children.length;\r\n        this.#children.splice(index, 0, child);\r\n        return this;\r\n    }\r\n    /**\r\n     * 대상객체를 자식목록에서 삭제합니다.\r\n     * * 존재하지 않는 객체를 지우려고 할떄는 무시됩니다.\r\n     * @param child\r\n     */\r\n    removeChild(child) {\r\n        const index = this.#children.indexOf(child);\r\n        if (index > -1) {\r\n            child.parent = null;\r\n            this.#children.splice(index, 1);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * index 기반으로 자식을  삭제합니다.\r\n     * @param index\r\n     */\r\n    removeChildAt(index) {\r\n        const child = this.#children[index];\r\n        if (child) {\r\n            child.parent = null;\r\n            this.#children.splice(index, 1);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 등록된 모든 자식을 삭제합니다.\r\n     */\r\n    removeAllChild() {\r\n        let i = this.#children.length;\r\n        while (i--) {\r\n            this.#children[i].parent = null;\r\n        }\r\n        this.#children.length = 0;\r\n        return this;\r\n    }\r\n}\r\nexport default DisplayContainer;\r\n","import BaseObject3D from \"./base/BaseObject3D\";\r\nimport BaseObject3DPipeline from \"./base/BaseObject3DPipeline\";\r\nimport CONST_DIRTY_TRANSFORM_STATE from \"./base/CONST_DIRTY_TRANSFORM_STATE\";\r\nimport DisplayContainer from \"./base/DisplayContainer\";\r\nimport { Mesh } from \"./mesh/Mesh\";\r\nexport { CONST_DIRTY_TRANSFORM_STATE, BaseObject3D, BaseObject3DPipeline, DisplayContainer, Mesh, };\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport { mat4 } from \"../../util/gl-matrix\";\r\nimport BaseObject3D from \"../base/BaseObject3D\";\r\nimport CONST_DIRTY_TRANSFORM_STATE from \"../base/CONST_DIRTY_TRANSFORM_STATE\";\r\nconst define_vertexUniformBufferDescriptor = new UniformBufferDescriptor([\r\n    { size: TypeSize.mat4, valueName: 'modelMatrix' },\r\n    { size: TypeSize.mat4, valueName: 'normalMatrix' },\r\n]);\r\nconst define_vertexUniformBindGroupLayoutDescriptor = {\r\n    entries: [\r\n        {\r\n            binding: 0,\r\n            visibility: GPUShaderStage.VERTEX,\r\n            buffer: {\r\n                type: 'uniform',\r\n            },\r\n        }\r\n    ]\r\n};\r\nclass Mesh extends BaseObject3D {\r\n    renderBundle;\r\n    constructor(redGPUContext, geometry, material, vertexUniformBufferDescriptor = define_vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor = define_vertexUniformBindGroupLayoutDescriptor) {\r\n        super(redGPUContext, vertexUniformBufferDescriptor, vertexUniformBindGroupLayoutDescriptor);\r\n        const device = redGPUContext.gpuDevice;\r\n        this.geometry = geometry;\r\n        this.material = material;\r\n        // 유니폼 정보를 초기화함\r\n        this.#initVertexUniformBindGroupLayout(device);\r\n        // 파이프 라인을 생성함\r\n        // this.updatePipeline()\r\n        // console.log(this)\r\n    }\r\n    updateBindGroup() {\r\n        this.updateVertexUniformBindGroup({\r\n            layout: this.renderInfo_VertexUniformBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.vertexUniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.vertexUniformBuffer.gpuBufferSize\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    }\r\n    updateTransform() {\r\n        const { redStructOffsetMap, redGpuStructOffsetMap } = this.vertexUniformBuffer.descriptor;\r\n        // mat4.identity(this.matrix);\r\n        // mat4.translate(this.matrix, this.matrix, [this.x, this.y, this.z]);\r\n        // mat4.rotateX(this.matrix, this.matrix, this.rotationX);\r\n        // mat4.rotateY(this.matrix, this.matrix, this.rotationY);\r\n        // mat4.rotateZ(this.matrix, this.matrix, this.rotationZ);\r\n        // mat4.scale(this.matrix, this.matrix, [this.scaleX, this.scaleY, this.scaleZ]);\r\n        // update Uniform\r\n        // this.vertexUniformBuffer.data.set(this.matrix,redStructOffsetMap['modelMatrix'])\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.vertexUniformBuffer.gpuBuffer, redGpuStructOffsetMap['modelMatrix'], this.matrix);\r\n        // this.vertexUniformBuffer.update(0, this.matrix)\r\n        /////////////////////////////////////////////////////////\r\n        if (this.vertexUniformBufferDescriptor.redStructOffsetMap['normalMatrix']) {\r\n            mat4.transpose(this.normalMatrix, mat4.invert(this.normalMatrix, this.matrix));\r\n            // this.vertexUniformBuffer.data.set(this.normalMatrix,redStructOffsetMap['normalMatrix'])\r\n            this.redGPUContext.gpuDevice.queue.writeBuffer(this.vertexUniformBuffer.gpuBuffer, redGpuStructOffsetMap['normalMatrix'], this.normalMatrix);\r\n        }\r\n        // this.vertexUniformBuffer.update()\r\n        /////////////////////////////////////////////////////////\r\n        this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.NONE;\r\n    }\r\n    render(view, passEncoder, time) {\r\n        if (this.redGPUContext.dirtyMultiSample)\r\n            this.dirtyPipeline = true;\r\n        // dirty 계산\r\n        if (this.materialBindGroupID !== this.material?.bindGroupID) {\r\n            this.materialBindGroupID = this.material?.bindGroupID;\r\n            this.dirtyPipeline = true;\r\n        }\r\n        const tempDirtyPipeline = this.dirtyPipeline;\r\n        const frustumPlanes = view.frustumPlanes;\r\n        let frustumCulling = true;\r\n        // GPU렌더링\r\n        if (this.dirtyTransformState === CONST_DIRTY_TRANSFORM_STATE.DIRTY) {\r\n            mat4.identity(this.matrix);\r\n            mat4.translate(this.matrix, this.matrix, [this.x, this.y, this.z]);\r\n            mat4.rotateX(this.matrix, this.matrix, this.rotationX);\r\n            mat4.rotateY(this.matrix, this.matrix, this.rotationY);\r\n            mat4.rotateZ(this.matrix, this.matrix, this.rotationZ);\r\n            mat4.scale(this.matrix, this.matrix, [this.scaleX, this.scaleY, this.scaleZ]);\r\n            this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.NEED_GPU_UPDATE;\r\n        }\r\n        if (this.geometry && this.material) {\r\n            // if(!this.renderBundle || tempDirtyPipeline){\r\n            //     const des : GPURenderBundleEncoderDescriptor = {\r\n            //         colorFormats: [navigator.gpu.getPreferredCanvasFormat()],\r\n            //         depthStencilFormat : 'depth24plus-stencil8',\r\n            //         sampleCount:4,\r\n            //     }\r\n            //     const renderBundleEncoder:GPURenderBundleEncoder = this.redGPUContext.gpuDevice.createRenderBundleEncoder(des)\r\n            //     //\r\n            //     renderBundleEncoder.setBindGroup(0, view.renderInfo_SystemUniformBindGroup);\r\n            //     //\r\n            //     renderBundleEncoder.setPipeline(this.renderInfo_pipeline.gpuPipeline); // 무조건갱신\r\n            //     renderBundleEncoder.setVertexBuffer(0, this.geometry.vertexGpuBuffer); // 줄일수있으면 줄이면 좋음\r\n            //     renderBundleEncoder.setBindGroup(1, this.renderInfo_VertexUniformBindGroup); // 버텍스 유니폼 버퍼 1번 고정\r\n            //     renderBundleEncoder.setBindGroup(2, this.material.renderInfo_FragmentUniformBindGroup); // 프래그 먼트 유니폼 버퍼 2번 고정\r\n            //     if (this.geometry.indexGpuBuffer) {\r\n            //         //TODO 더 유연하게\r\n            //         renderBundleEncoder.setIndexBuffer(this.geometry.indexGpuBuffer, 'uint32')\r\n            //         renderBundleEncoder.drawIndexed(this.geometry.indexBuffer.indexNum, 1, 0, 0, 0);\r\n            //     } else {\r\n            //         renderBundleEncoder.draw(this.geometry.vertexBuffer.vertexCount, 1, 0, 0);\r\n            //     }\r\n            //     this.renderBundle = renderBundleEncoder.finish();\r\n            // }else{\r\n            //     // console.log(this.renderBundle)\r\n            // }\r\n            //\r\n            // passEncoder.executeBundles([this.renderBundle])\r\n            {\r\n                let frustumPlanes0, frustumPlanes1, frustumPlanes2, frustumPlanes3, frustumPlanes4, frustumPlanes5;\r\n                frustumPlanes0 = frustumPlanes[0];\r\n                frustumPlanes1 = frustumPlanes[1];\r\n                frustumPlanes2 = frustumPlanes[2];\r\n                frustumPlanes3 = frustumPlanes[3];\r\n                frustumPlanes4 = frustumPlanes[4];\r\n                frustumPlanes5 = frustumPlanes[5];\r\n                let a00, a01, a02;\r\n                const geoVolume = this.geometry.volume;\r\n                let geometryRadius = geoVolume.geometryRadius;\r\n                let radius = Math.max(geometryRadius, Math.max(geometryRadius * this.matrix[0], Math.max(geometryRadius * this.matrix[5], geometryRadius * this.matrix[10])));\r\n                // let radiusTemp: number = geometryRadius * this.matrix[5];\r\n                // radius = radius < radiusTemp ? radiusTemp : radius;\r\n                // radiusTemp = geometryRadius * this.matrix[10];\r\n                // radius = radius < radiusTemp ? radiusTemp : radius;\r\n                // console.log(radius)\r\n                a00 = this.matrix[12], a01 = this.matrix[13], a02 = this.matrix[14],\r\n                    frustumPlanes0[0] * a00 + frustumPlanes0[1] * a01 + frustumPlanes0[2] * a02 + frustumPlanes0[3] <= -radius ? frustumCulling = false\r\n                        : frustumPlanes1[0] * a00 + frustumPlanes1[1] * a01 + frustumPlanes1[2] * a02 + frustumPlanes1[3] <= -radius ? frustumCulling = false\r\n                            : frustumPlanes2[0] * a00 + frustumPlanes2[1] * a01 + frustumPlanes2[2] * a02 + frustumPlanes2[3] <= -radius ? frustumCulling = false\r\n                                : frustumPlanes3[0] * a00 + frustumPlanes3[1] * a01 + frustumPlanes3[2] * a02 + frustumPlanes3[3] <= -radius ? frustumCulling = false\r\n                                    : frustumPlanes4[0] * a00 + frustumPlanes4[1] * a01 + frustumPlanes4[2] * a02 + frustumPlanes4[3] <= -radius ? frustumCulling = false\r\n                                        : frustumPlanes5[0] * a00 + frustumPlanes5[1] * a01 + frustumPlanes5[2] * a02 + frustumPlanes5[3] <= -radius ? frustumCulling = false : 0;\r\n            }\r\n            if (frustumCulling) {\r\n                if (this.dirtyPipeline)\r\n                    this.updatePipeline(view.systemUniformsBindGroupLayout);\r\n                if (this.dirtyTransformState === CONST_DIRTY_TRANSFORM_STATE.NEED_GPU_UPDATE)\r\n                    this.updateTransform();\r\n                passEncoder.setPipeline(this.renderInfo_pipeline.gpuPipeline); // 무조건갱신\r\n                passEncoder.setVertexBuffer(0, this.geometry.vertexGpuBuffer); // 줄일수있으면 줄이면 좋음\r\n                passEncoder.setBindGroup(1, this.renderInfo_VertexUniformBindGroup); // 버텍스 유니폼 버퍼 1번 고정\r\n                passEncoder.setBindGroup(2, this.material.renderInfo_FragmentUniformBindGroup); // 프래그 먼트 유니폼 버퍼 2번 고정\r\n                if (this.geometry.indexGpuBuffer) {\r\n                    //TODO 더 유연하게\r\n                    passEncoder.setIndexBuffer(this.geometry.indexGpuBuffer, 'uint32');\r\n                    passEncoder.drawIndexed(this.geometry.indexBuffer.indexNum, 1, 0, 0, 0);\r\n                }\r\n                else {\r\n                    passEncoder.draw(this.geometry.vertexBuffer.vertexCount, 1, 0, 0);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.dirtyTransformState = CONST_DIRTY_TRANSFORM_STATE.NONE;\r\n        }\r\n        //\r\n        const children = this.children;\r\n        let i = children.length;\r\n        while (i--)\r\n            children[i].render(view, passEncoder, time);\r\n        return frustumCulling ? 0 : this;\r\n        //\r\n    }\r\n    #initVertexUniformBindGroupLayout(device) {\r\n        this.updateBindGroup();\r\n    }\r\n}\r\nexport { Mesh };\r\n","class MeshPipeline {\r\n    #gpuPipeline;\r\n    constructor(redGPUContext, mesh, targetSystemUniformsBindGroupLayout) {\r\n        const gpuDevice = redGPUContext.gpuDevice;\r\n        const { material, renderInfo_VertexUniformBindGroupLayout } = mesh;\r\n        const { topology, cullMode, frontFace } = mesh;\r\n        const { depthWriteEnabled, depthCompare, depthStencilFormat } = mesh;\r\n        const { renderInfo_FragmentUniformsBindGroupLayout } = material;\r\n        // 유니폼이 어떻게 바인딩 되어있는지 알려주는 파이프라인 레이아웃을 생성함\r\n        // console.log(renderInfo_VertexUniformBindGroupLayout, renderInfo_FragmentUniformsBindGroupLayout)\r\n        const gpuPipeline_Layout = gpuDevice.createPipelineLayout({\r\n            // maxBindGroups의 영향을 받는다\r\n            bindGroupLayouts: [\r\n                targetSystemUniformsBindGroupLayout,\r\n                renderInfo_VertexUniformBindGroupLayout,\r\n                renderInfo_FragmentUniformsBindGroupLayout\r\n            ]\r\n        });\r\n        const gpuPipeline_Vertex = {\r\n            module: material.vShaderModule,\r\n            entryPoint: 'main',\r\n            buffers: mesh.renderInfo_pipeline_VertexBuffersInfo // maxVertexBuffer에 영향을 받는다.\r\n        };\r\n        const pipeLineDescriptor = {\r\n            layout: gpuPipeline_Layout,\r\n            vertex: gpuPipeline_Vertex,\r\n            fragment: material.renderInfo_pipeline_Fragment,\r\n            multisample: {\r\n                count: redGPUContext.useMultiSample ? 4 : 1\r\n            },\r\n            //TODO 여기서 결국 관리해야함\r\n            primitive: {\r\n                topology,\r\n                cullMode,\r\n                frontFace,\r\n            },\r\n            depthStencil: {\r\n                depthWriteEnabled,\r\n                depthCompare,\r\n                format: depthStencilFormat,\r\n            }\r\n        };\r\n        // 실제로 GPU에 들어갈 파이프 라인을 만듬\r\n        // 이를 토대로 그리기명령을 실행함\r\n        this.#gpuPipeline = gpuDevice.createRenderPipeline(pipeLineDescriptor);\r\n        // // console.log(this)\r\n    }\r\n    get gpuPipeline() {\r\n        return this.#gpuPipeline;\r\n    }\r\n}\r\nexport default MeshPipeline;\r\n","import RedGPUContextBase from \"../context/RedGPUContextBase\";\r\nimport makeShaderModule from \"../resource/makeShaderModule\";\r\nimport throwError from \"../util/errorFunc/throwError\";\r\nclass PostEffectBase extends RedGPUContextBase {\r\n    uniformsBindGroupLayout;\r\n    uniformBindGroup;\r\n    pipeline;\r\n    #subPassList = [];\r\n    #effectRenderTime = 0;\r\n    #vShaderModule;\r\n    #fShaderModule;\r\n    #renderTexture;\r\n    #renderTextureView;\r\n    constructor(redGPUContext, vertexSource, fragmentSource) {\r\n        super(redGPUContext);\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.#vShaderModule = makeShaderModule(gpuDevice, vertexSource, `vertex_${this.constructor.name}`);\r\n        this.#fShaderModule = makeShaderModule(gpuDevice, fragmentSource, `fragment_${this.constructor.name}`);\r\n    }\r\n    get effectRenderTime() {\r\n        return this.#effectRenderTime;\r\n    }\r\n    set effectRenderTime(value) {\r\n        this.#effectRenderTime = value;\r\n    }\r\n    get effectRenderTimeString() {\r\n        return this.#effectRenderTime.toString().substring(0, 7);\r\n    }\r\n    get subPassList() {\r\n        return this.#subPassList;\r\n    }\r\n    get vShaderModule() {\r\n        return this.#vShaderModule;\r\n    }\r\n    get fShaderModule() {\r\n        return this.#fShaderModule;\r\n    }\r\n    setPipeline(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        const presentationFormat = navigator.gpu.getPreferredCanvasFormat();\r\n        const pipeLineDescriptor = {\r\n            // set bindGroupLayouts\r\n            layout: gpuDevice.createPipelineLayout({ bindGroupLayouts: [this.uniformsBindGroupLayout] }),\r\n            vertex: {\r\n                module: this.#vShaderModule,\r\n                entryPoint: 'main',\r\n                buffers: [\r\n                    {\r\n                        arrayStride: postEffectManager.vertexBuffer.arrayStride,\r\n                        attributes: postEffectManager.vertexBuffer.attributes.map((v, index) => {\r\n                            return {\r\n                                // position\r\n                                shaderLocation: index,\r\n                                offset: v.offset,\r\n                                format: v.format\r\n                            };\r\n                        })\r\n                    }\r\n                ]\r\n            },\r\n            fragment: {\r\n                module: this.#fShaderModule,\r\n                entryPoint: 'main',\r\n                targets: [\r\n                    {\r\n                        format: presentationFormat,\r\n                        blend: {\r\n                            color: {\r\n                                srcFactor: \"src-alpha\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            },\r\n                            alpha: {\r\n                                srcFactor: \"one\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            }\r\n                        }\r\n                    },\r\n                ],\r\n            },\r\n        };\r\n        this.pipeline = gpuDevice.createRenderPipeline(pipeLineDescriptor);\r\n    }\r\n    getRenderInfo(postEffectManager) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { view } = postEffectManager;\r\n        const { pixelViewRectInt } = view;\r\n        if (this.#renderTexture) {\r\n            if (this.#renderTexture.width !== pixelViewRectInt[2]\r\n                || this.#renderTexture.height !== pixelViewRectInt[3]) {\r\n                this.#renderTexture.destroy();\r\n                this.#renderTexture = null;\r\n            }\r\n        }\r\n        this.#renderTexture = gpuDevice.createTexture({\r\n            label: `${this.constructor.name}_texture`,\r\n            size: {\r\n                width: pixelViewRectInt[2],\r\n                height: pixelViewRectInt[3],\r\n                depthOrArrayLayers: 1\r\n            },\r\n            sampleCount: 1,\r\n            format: navigator.gpu.getPreferredCanvasFormat(),\r\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\r\n        });\r\n        this.#renderTextureView = this.#renderTexture.createView();\r\n        const renderPassDescriptor = {\r\n            /**\r\n             * @typedef {GPURenderPassColorAttachment}\r\n             */\r\n            colorAttachments: [\r\n                {\r\n                    view: this.#renderTextureView,\r\n                    clearValue: { r: 0.0, g: 0.0, b: 0.0, a: 0.0 },\r\n                    loadOp: 'clear',\r\n                    storeOp: 'store',\r\n                },\r\n            ]\r\n        };\r\n        return {\r\n            texture: this.#renderTexture,\r\n            textureView: this.#renderTextureView,\r\n            renderPassDescriptor\r\n        };\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        throwError('Must Override');\r\n        return;\r\n    }\r\n}\r\nexport default PostEffectBase;\r\n","import RedGPUContextBase from \"../context/RedGPUContextBase\";\r\nimport VertexBuffer from \"../resource/buffers/buffer/VertexBuffer\";\r\nimport InterleaveInfo from \"../resource/buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../resource/buffers/interleaveInfo/InterleaveUnit\";\r\nimport { TextureSampler } from \"../resource/texture\";\r\n/**\r\n * PostEffect 를 관리하는 매니저\r\n */\r\nclass PostEffectManager extends RedGPUContextBase {\r\n    #vertexBuffer;\r\n    #sampler;\r\n    #children = [];\r\n    #view;\r\n    /**\r\n     * 생성자\r\n     * @param view\r\n     */\r\n    constructor(view) {\r\n        super(view.redGPUContext);\r\n        this.#view = view;\r\n        this.#init(view.redGPUContext);\r\n    }\r\n    get vertexBuffer() {\r\n        return this.#vertexBuffer;\r\n    }\r\n    get sampler() {\r\n        return this.#sampler;\r\n    }\r\n    get children() {\r\n        return this.#children;\r\n    }\r\n    get view() {\r\n        return this.#view;\r\n    }\r\n    render() {\r\n        // console.log('PostEffect Render')\r\n        let lastSourceTextureView = this.#view.resolveTextureView;\r\n        let startTime;\r\n        let endTime;\r\n        this.#children.forEach((effect) => {\r\n            startTime = performance.now();\r\n            lastSourceTextureView = effect.render(this, lastSourceTextureView);\r\n            endTime = performance.now();\r\n            // console.log(endTime - startTime)\r\n            effect.effectRenderTime = (endTime - startTime);\r\n            startTime = endTime;\r\n        });\r\n        return lastSourceTextureView;\r\n    }\r\n    /**\r\n     * 포스트 이펙트를 추가합니다.\r\n     * @param postEffect\r\n     */\r\n    addEffect(postEffect) {\r\n        this.#children.push(postEffect);\r\n    }\r\n    /**\r\n     * 포스트 이펙트를 제거합니다.\r\n     * @param postEffect\r\n     */\r\n    removeEffect(postEffect) {\r\n        const index = this.#children.indexOf(postEffect);\r\n        if (index > -1) {\r\n            this.#children.splice(index, 1);\r\n        }\r\n    }\r\n    #init(redGPUContext) {\r\n        this.#vertexBuffer = new VertexBuffer(redGPUContext, new Float32Array([\r\n            //x,y,z, u,v\r\n            -1.0, -1.0, 0.0, 0.0, 1.0,\r\n            1.0, -1.0, 0.0, 1.0, 1.0,\r\n            -1.0, 1.0, 0.0, 0.0, 0.0,\r\n            -1.0, 1.0, 0.0, 0.0, 0.0,\r\n            1.0, -1.0, 0.0, 1.0, 1.0,\r\n            1.0, 1.0, 0.0, 1.0, 0.0\r\n        ]), new InterleaveInfo([\r\n            new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, \"float32x3\"),\r\n            new InterleaveUnit(InterleaveUnit.TEXCOORD, 'float32x2')\r\n        ]));\r\n        this.#sampler = new TextureSampler(redGPUContext, {\r\n            magFilter: \"linear\",\r\n            minFilter: \"linear\",\r\n            mipmapFilter: \"nearest\"\r\n        });\r\n    }\r\n}\r\nexport default PostEffectManager;\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"../../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport { PostEffectBase } from \"../index\";\r\nimport fragmentSource from \"./wgslFragment/brightnessContrastFragment.wgsl\";\r\nimport vertexSource from \"./wgslVertex/baseVertex.wgsl\";\r\nlet float32Array_1 = new Float32Array(1);\r\nclass PostEffectBrightnessContrast extends PostEffectBase {\r\n    uniformBuffer;\r\n    #brightness = 0;\r\n    #contrast = 0;\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource);\r\n    }\r\n    get brightness() {\r\n        return this.#brightness;\r\n    }\r\n    set brightness(value) {\r\n        if (value < -150)\r\n            value = -150;\r\n        if (value > 150)\r\n            value = 150;\r\n        this.#brightness = value;\r\n        float32Array_1[0] = value / 255;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['brightness'], float32Array_1);\r\n    }\r\n    get contrast() {\r\n        return this.#contrast;\r\n    }\r\n    set contrast(value) {\r\n        if (value < -50)\r\n            value = -50;\r\n        if (value > 100)\r\n            value = 100;\r\n        this.#contrast = value;\r\n        float32Array_1[0] = value / 255;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['contrast'], float32Array_1);\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { textureView, renderPassDescriptor } = this.getRenderInfo(postEffectManager);\r\n        if (!this.pipeline)\r\n            this.#init(postEffectManager);\r\n        //\r\n        const uniformBindGroupDescriptor = {\r\n            layout: this.uniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.uniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.uniformBuffer.gpuBuffer.size\r\n                    }\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: postEffectManager.sampler.gpuSampler,\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    resource: sourceTextureView,\r\n                }\r\n            ]\r\n        };\r\n        this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n        //\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        passEncoder.setVertexBuffer(0, postEffectManager.vertexBuffer.gpuBuffer);\r\n        passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        return textureView;\r\n    }\r\n    #init(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.uniformBuffer = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.float32, valueName: 'brightness' },\r\n            { size: TypeSize.float32, valueName: 'contrast' },\r\n        ]));\r\n        this.brightness = 0;\r\n        this.contrast = 0;\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    buffer: {\r\n                        type: 'uniform',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.setPipeline(postEffectManager);\r\n    }\r\n}\r\nexport default PostEffectBrightnessContrast;\r\n","import { PostEffectBase } from \"../index\";\r\nimport fragmentSource from \"./wgslFragment/grayFragment.wgsl\";\r\nimport vertexSource from \"./wgslVertex/baseVertex.wgsl\";\r\nclass PostEffectGray extends PostEffectBase {\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource);\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { textureView, renderPassDescriptor } = this.getRenderInfo(postEffectManager);\r\n        if (!this.pipeline)\r\n            this.#init(postEffectManager);\r\n        //\r\n        const uniformBindGroupDescriptor = {\r\n            layout: this.uniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: postEffectManager.sampler.gpuSampler,\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: sourceTextureView,\r\n                }\r\n            ]\r\n        };\r\n        this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n        //\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        passEncoder.setVertexBuffer(0, postEffectManager.vertexBuffer.gpuBuffer);\r\n        passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        return textureView;\r\n    }\r\n    #init(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.setPipeline(postEffectManager);\r\n    }\r\n}\r\nexport default PostEffectGray;\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"../../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport { PostEffectBase } from \"../index\";\r\nimport fragmentSource from \"./wgslFragment/hueSaturationFragment.wgsl\";\r\nimport vertexSource from \"./wgslVertex/baseVertex.wgsl\";\r\nlet float32Array_1 = new Float32Array(1);\r\nclass PostEffectHueSaturation extends PostEffectBase {\r\n    uniformBuffer;\r\n    #saturation = 0;\r\n    #hue = 0;\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource);\r\n    }\r\n    get saturation() {\r\n        return this.#saturation;\r\n    }\r\n    set saturation(value) {\r\n        if (value < -100)\r\n            value = -100;\r\n        if (value > 100)\r\n            value = 100;\r\n        this.#saturation = value;\r\n        float32Array_1[0] = value / 100;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['saturation'], float32Array_1);\r\n    }\r\n    get hue() {\r\n        return this.#hue;\r\n    }\r\n    set hue(value) {\r\n        if (value < -180)\r\n            value = -180;\r\n        if (value > 180)\r\n            value = 180;\r\n        this.#hue = value;\r\n        float32Array_1[0] = value / 180;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['hue'], float32Array_1);\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { textureView, renderPassDescriptor } = this.getRenderInfo(postEffectManager);\r\n        if (!this.pipeline)\r\n            this.#init(postEffectManager);\r\n        //\r\n        const uniformBindGroupDescriptor = {\r\n            layout: this.uniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.uniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.uniformBuffer.gpuBuffer.size\r\n                    }\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: postEffectManager.sampler.gpuSampler,\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    resource: sourceTextureView,\r\n                }\r\n            ]\r\n        };\r\n        this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n        //\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        passEncoder.setVertexBuffer(0, postEffectManager.vertexBuffer.gpuBuffer);\r\n        passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        return textureView;\r\n    }\r\n    #init(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.uniformBuffer = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.float32, valueName: 'hue' },\r\n            { size: TypeSize.float32, valueName: 'saturation' },\r\n        ]));\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    buffer: {\r\n                        type: 'uniform',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.setPipeline(postEffectManager);\r\n    }\r\n}\r\nexport default PostEffectHueSaturation;\r\n","import { PostEffectBase } from \"../index\";\r\nimport fragmentSource from \"./wgslFragment/invertFragment.wgsl\";\r\nimport vertexSource from \"./wgslVertex/baseVertex.wgsl\";\r\nclass PostEffectInvert extends PostEffectBase {\r\n    constructor(redGPUContext) {\r\n        debugger;\r\n        super(redGPUContext, vertexSource, fragmentSource);\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { textureView, renderPassDescriptor } = this.getRenderInfo(postEffectManager);\r\n        if (!this.pipeline)\r\n            this.#init(postEffectManager);\r\n        //\r\n        const uniformBindGroupDescriptor = {\r\n            layout: this.uniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: postEffectManager.sampler.gpuSampler,\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: sourceTextureView,\r\n                }\r\n            ]\r\n        };\r\n        this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n        //\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        passEncoder.setVertexBuffer(0, postEffectManager.vertexBuffer.gpuBuffer);\r\n        passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        return textureView;\r\n    }\r\n    #init(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.setPipeline(postEffectManager);\r\n    }\r\n}\r\nexport default PostEffectInvert;\r\n","import TypeSize from \"../../resource/buffers/TypeSize\";\r\nimport UniformBufferDescriptor from \"../../resource/buffers/uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"../../resource/buffers/uniformBuffer/UniformBufferFloat32\";\r\nimport { PostEffectBase } from \"../index\";\r\nimport fragmentSource from \"./wgslFragment/pixelizeFragment.wgsl\";\r\nimport vertexSource from \"./wgslVertex/baseVertex.wgsl\";\r\nlet float32Array_1 = new Float32Array(1);\r\nlet float32Array_2 = new Float32Array(2);\r\nclass PostEffectPixelize extends PostEffectBase {\r\n    uniformBuffer;\r\n    #width = 5;\r\n    #height = 5;\r\n    constructor(redGPUContext) {\r\n        super(redGPUContext, vertexSource, fragmentSource);\r\n    }\r\n    get width() {\r\n        return this.#width;\r\n    }\r\n    set width(value) {\r\n        this.#width = value;\r\n        float32Array_1[0] = value;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['width'], float32Array_1);\r\n    }\r\n    get height() {\r\n        return this.#height;\r\n    }\r\n    set height(value) {\r\n        this.#height = value;\r\n        float32Array_1[0] = value;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['height'], float32Array_1);\r\n    }\r\n    render(postEffectManager, sourceTextureView) {\r\n        const redGPUContext = this.redGPUContext;\r\n        const { gpuDevice } = redGPUContext;\r\n        const { textureView, renderPassDescriptor } = this.getRenderInfo(postEffectManager);\r\n        if (!this.pipeline)\r\n            this.#init(postEffectManager);\r\n        //\r\n        const uniformBindGroupDescriptor = {\r\n            layout: this.uniformsBindGroupLayout,\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.uniformBuffer.gpuBuffer,\r\n                        offset: 0,\r\n                        size: this.uniformBuffer.gpuBuffer.size\r\n                    }\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    resource: postEffectManager.sampler.gpuSampler,\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    resource: sourceTextureView,\r\n                }\r\n            ]\r\n        };\r\n        this.uniformBindGroup = gpuDevice.createBindGroup(uniformBindGroupDescriptor);\r\n        float32Array_2[0] = postEffectManager.view.pixelViewRect[2] / this.redGPUContext.renderScale;\r\n        float32Array_2[1] = postEffectManager.view.pixelViewRect[3] / this.redGPUContext.renderScale;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.uniformBuffer.gpuBuffer, this.uniformBuffer.descriptor.redGpuStructOffsetMap['resolution'], float32Array_2);\r\n        //\r\n        const commandEncoder = gpuDevice.createCommandEncoder();\r\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        passEncoder.setPipeline(this.pipeline);\r\n        passEncoder.setVertexBuffer(0, postEffectManager.vertexBuffer.gpuBuffer);\r\n        passEncoder.setBindGroup(0, this.uniformBindGroup);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.end();\r\n        gpuDevice.queue.submit([commandEncoder.finish()]);\r\n        return textureView;\r\n    }\r\n    #init(postEffectManager) {\r\n        const { gpuDevice } = this.redGPUContext;\r\n        this.uniformBuffer = new UniformBufferFloat32(this.redGPUContext, new UniformBufferDescriptor([\r\n            { size: TypeSize.float32x2, valueName: 'resolution' },\r\n            { size: TypeSize.float32, valueName: 'width' },\r\n            { size: TypeSize.float32, valueName: 'height' },\r\n        ]));\r\n        this.width = 25;\r\n        this.height = 25;\r\n        this.uniformsBindGroupLayout = gpuDevice.createBindGroupLayout({\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    buffer: {\r\n                        type: 'uniform',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 1,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    sampler: {\r\n                        type: 'filtering',\r\n                    },\r\n                },\r\n                {\r\n                    binding: 2,\r\n                    visibility: GPUShaderStage.FRAGMENT,\r\n                    texture: {}\r\n                }\r\n            ]\r\n        });\r\n        this.setPipeline(postEffectManager);\r\n    }\r\n}\r\nexport default PostEffectPixelize;\r\n","import PostEffectManager from \"./PostEffectManager\";\r\nimport PostEffectBase from \"./PostEffectBase\";\r\nimport PostEffectInvert from \"./effects/PostEffectInvert\";\r\nimport PostEffectGray from \"./effects/PostEffectGray\";\r\nimport PostEffectHueSaturation from \"./effects/PostEffectHueSaturation\";\r\nimport PostEffectBrightnessContrast from \"./effects/PostEffectBrightnessContrast\";\r\nimport PostEffectPixelize from \"./effects/PostEffectPixelize\";\r\nexport { PostEffectManager, PostEffectBase, \r\n//\r\nPostEffectInvert, PostEffectGray, PostEffectHueSaturation, PostEffectBrightnessContrast, PostEffectPixelize };\r\n","\"use strict\";\r\nlet TypeSize = {\r\n    'float32': Float32Array.BYTES_PER_ELEMENT,\r\n    'float32x2': 2 * Float32Array.BYTES_PER_ELEMENT,\r\n    \"float32x3\": 3 * Float32Array.BYTES_PER_ELEMENT,\r\n    'float32x4': 4 * Float32Array.BYTES_PER_ELEMENT,\r\n    'mat2': 4 * 2 * Float32Array.BYTES_PER_ELEMENT,\r\n    'mat3': 4 * 3 * Float32Array.BYTES_PER_ELEMENT,\r\n    'mat4': 4 * 4 * Float32Array.BYTES_PER_ELEMENT\r\n};\r\nexport default TypeSize;\r\n","import RedGPUContextBase from \"../../../context/RedGPUContextBase\";\r\n/**\r\n * IndexBuffer\r\n */\r\nclass IndexBuffer extends RedGPUContextBase {\r\n    #gpuBuffer;\r\n    #indexNum;\r\n    #byteLength;\r\n    #descriptor;\r\n    #usage;\r\n    /**\r\n     * IndexBuffer\r\n     */\r\n    constructor(redGPUContext, data, usage = GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST) {\r\n        super(redGPUContext);\r\n        this.#indexNum = data.length;\r\n        this.#byteLength = data.byteLength;\r\n        this.#usage = usage;\r\n        this.#descriptor = {\r\n            size: data.byteLength,\r\n            usage: this.#usage\r\n        };\r\n        this.#gpuBuffer = this.redGPUContext.gpuDevice.createBuffer(this.#descriptor);\r\n        this.update(0, data);\r\n        // console.log(this)\r\n    }\r\n    get gpuBuffer() {\r\n        return this.#gpuBuffer;\r\n    }\r\n    get indexNum() {\r\n        return this.#indexNum;\r\n    }\r\n    get byteLength() {\r\n        return this.#byteLength;\r\n    }\r\n    get descriptor() {\r\n        return this.#descriptor;\r\n    }\r\n    get usage() {\r\n        return this.#usage;\r\n    }\r\n    update(gpuBufferOffset, data, dataOffset, size) {\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.#gpuBuffer, gpuBufferOffset, data, dataOffset, size);\r\n    }\r\n    destroy() {\r\n        //TODO\r\n    }\r\n}\r\nexport default IndexBuffer;\r\n","// import VertexBufferDescriptor from \"./VertexBufferDescriptor\";\r\nimport RedGPUContextBase from \"../../../context/RedGPUContextBase\";\r\n/**\r\n * VertexBuffer\r\n */\r\nclass VertexBuffer extends RedGPUContextBase {\r\n    #gpuBuffer;\r\n    #byteLength;\r\n    #descriptor;\r\n    #usage;\r\n    #vertexCount = 0;\r\n    #interleaveInfo;\r\n    constructor(redGPUContext, data, interleaveInfo, usage = GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST) {\r\n        super(redGPUContext);\r\n        this.#interleaveInfo = interleaveInfo;\r\n        this.#vertexCount = data.length / this.#interleaveInfo.stride;\r\n        this.#byteLength = data.byteLength;\r\n        this.#usage = usage;\r\n        this.#descriptor = {\r\n            size: this.#byteLength,\r\n            usage: usage\r\n        };\r\n        this.#gpuBuffer = this.redGPUContext.gpuDevice.createBuffer(this.#descriptor);\r\n        this.update(0, data);\r\n        // console.log(this)\r\n    }\r\n    get gpuBuffer() {\r\n        return this.#gpuBuffer;\r\n    }\r\n    get byteLength() {\r\n        return this.#byteLength;\r\n    }\r\n    get descriptor() {\r\n        return this.#descriptor;\r\n    }\r\n    get usage() {\r\n        return this.#usage;\r\n    }\r\n    get vertexCount() {\r\n        return this.#vertexCount;\r\n    }\r\n    get interleaveInfo() {\r\n        return this.#interleaveInfo;\r\n    }\r\n    get arrayStride() {\r\n        return this.#interleaveInfo.arrayStride;\r\n    }\r\n    get attributes() {\r\n        return this.#interleaveInfo.attributes;\r\n    }\r\n    update(gpuBufferOffset, data, dataOffset, size) {\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.#gpuBuffer, gpuBufferOffset, data, dataOffset, size);\r\n    }\r\n    destroy() {\r\n        //TODO\r\n    }\r\n}\r\nexport default VertexBuffer;\r\n","import IndexBuffer from \"./buffer/IndexBuffer\";\r\nimport VertexBuffer from \"./buffer/VertexBuffer\";\r\nimport InterleaveInfo from \"./interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"./interleaveInfo/InterleaveUnit\";\r\nimport TypeSize from \"./TypeSize\";\r\nimport UniformBufferDescriptor from \"./uniformBuffer/UniformBufferDescriptor\";\r\nimport UniformBufferFloat32 from \"./uniformBuffer/UniformBufferFloat32\";\r\nexport { TypeSize, InterleaveUnit, InterleaveInfo, \r\n//\r\nVertexBuffer, IndexBuffer, \r\n//\r\nUniformBufferFloat32, UniformBufferDescriptor };\r\n","class InterleaveInfo {\r\n    #stride = 0;\r\n    #arrayStride = 0;\r\n    #attributes = [];\r\n    constructor(dataList) {\r\n        dataList.forEach((v, index) => {\r\n            this.#stride += v.stride / Float32Array.BYTES_PER_ELEMENT;\r\n            //\r\n            this.#attributes.push({\r\n                attributeHint: v['attributeHint'],\r\n                shaderLocation: index,\r\n                offset: this.#arrayStride,\r\n                format: v['format']\r\n            });\r\n            this.#arrayStride += v['stride'];\r\n        });\r\n    }\r\n    get stride() {\r\n        return this.#stride;\r\n    }\r\n    get arrayStride() {\r\n        return this.#arrayStride;\r\n    }\r\n    get attributes() {\r\n        return this.#attributes;\r\n    }\r\n}\r\nexport default InterleaveInfo;\r\n","import TypeSize from \"../TypeSize\";\r\nclass InterleaveUnit {\r\n    static #VERTEX_POSITION = 'vertexPosition';\r\n    static #VERTEX_NORMAL = 'vertexNormal';\r\n    static #VERTEX_COLOR = 'vertexColor';\r\n    static #TEXCOORD = 'texcoord';\r\n    #attributeHint;\r\n    #format;\r\n    #stride;\r\n    constructor(attributeHint, format) {\r\n        this.#attributeHint = attributeHint;\r\n        this.#format = format;\r\n        this.#stride = TypeSize[format];\r\n    }\r\n    static get VERTEX_POSITION() {\r\n        return this.#VERTEX_POSITION;\r\n    }\r\n    static get VERTEX_NORMAL() {\r\n        return this.#VERTEX_NORMAL;\r\n    }\r\n    static get VERTEX_COLOR() {\r\n        return this.#VERTEX_COLOR;\r\n    }\r\n    static get TEXCOORD() {\r\n        return this.#TEXCOORD;\r\n    }\r\n    get attributeHint() {\r\n        return this.#attributeHint;\r\n    }\r\n    get format() {\r\n        return this.#format;\r\n    }\r\n    get stride() {\r\n        return this.#stride;\r\n    }\r\n}\r\nexport default InterleaveUnit;\r\n","import throwError from \"../../../util/errorFunc/throwError\";\r\nimport TypeSize from \"../TypeSize\";\r\n/**\r\n * UniformBufferDescriptor\r\n */\r\nclass UniformBufferDescriptor {\r\n    #redStruct;\r\n    #redStructOffsetMap;\r\n    #redGpuStructOffsetMap;\r\n    #typeArraySize;\r\n    #gpuBufferSize;\r\n    constructor(redStruct = []) {\r\n        if (!Array.isArray(redStruct))\r\n            throwError(`${this.constructor.name} - only allow Array Instance. / inputValue : ${redStruct} { type : ${typeof redStruct} }`);\r\n        this.#redStruct = JSON.parse(JSON.stringify(redStruct));\r\n        this.#redStructOffsetMap = {};\r\n        this.#redGpuStructOffsetMap = {};\r\n        let offset = 0;\r\n        let FLOAT4_SIZE = TypeSize.float32x4;\r\n        const parser = (redStruct) => {\r\n            redStruct.map((v) => {\r\n                if (v['struct']) {\r\n                    parseStruct(v);\r\n                }\r\n                else {\r\n                    if (!v.valueName)\r\n                        throwError(`${this.constructor.name} - need valueName / inputValue : ${v.valueName} { type : ${typeof v.valueName} }`);\r\n                    if (!v.hasOwnProperty('size'))\r\n                        throwError(`${this.constructor.name} - need size / inputValue : ${v.size} { type : ${typeof v.size} }`);\r\n                    if (v.size <= FLOAT4_SIZE) {\r\n                        let t0 = Math.floor(offset / FLOAT4_SIZE);\r\n                        let t1 = Math.floor((offset + v.size - 1) / FLOAT4_SIZE);\r\n                        if (t0 != t1)\r\n                            offset += FLOAT4_SIZE - offset % FLOAT4_SIZE;\r\n                        v.offset = offset;\r\n                        // console.log(v.valueName, '결정된 오프셋', offset)\r\n                        offset += v.size;\r\n                    }\r\n                    else {\r\n                        if (offset % FLOAT4_SIZE)\r\n                            offset += FLOAT4_SIZE - offset % FLOAT4_SIZE;\r\n                        v.offset = offset;\r\n                        offset += v.size;\r\n                    }\r\n                    this.#redStructOffsetMap[v['valueName']] = v.offset;\r\n                }\r\n                // v._UUID = v.valueName + '_' + UUID.getNextUUID();\r\n            });\r\n        };\r\n        const parseStruct = (redStruct) => {\r\n            let startOffset = offset;\r\n            let i = 0;\r\n            const len = redStruct['num'];\r\n            for (i; i < len; i++) {\r\n                redStruct['struct'].map((v, index) => {\r\n                    if (!v.valueName)\r\n                        throwError(`${this.constructor.name} - need valueName / inputValue : ${v.valueName} { type : ${typeof v.valueName} }`);\r\n                    if (!v.hasOwnProperty('size'))\r\n                        throwError(`${this.constructor.name} - need size / inputValue : ${v.size} { type : ${typeof v.size} }`);\r\n                    if (v.size <= FLOAT4_SIZE) {\r\n                        let t0 = Math.floor(offset / FLOAT4_SIZE);\r\n                        let t1 = Math.floor((offset + v.size - 1) / FLOAT4_SIZE);\r\n                        if (t0 != t1) {\r\n                            offset += FLOAT4_SIZE - offset % FLOAT4_SIZE;\r\n                        }\r\n                        if (i === 0 && index === 0)\r\n                            startOffset = offset;\r\n                        if (i === 0)\r\n                            v.offset = offset;\r\n                        offset += v.size;\r\n                    }\r\n                    else {\r\n                        if (offset % FLOAT4_SIZE)\r\n                            offset += FLOAT4_SIZE - offset % FLOAT4_SIZE;\r\n                        if (i === 0 && index === 0)\r\n                            startOffset = offset;\r\n                        if (i === 0)\r\n                            v.offset = offset;\r\n                        offset += v.size;\r\n                    }\r\n                    if (i === 0) {\r\n                        // this.#redStructOffsetMap[v['valueName']] = v.offset;\r\n                    }\r\n                    if (i === 0 && index === 0) {\r\n                        this.#redStructOffsetMap[redStruct['valueName']] = startOffset;\r\n                        redStruct['offset'] = startOffset;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        parser(this.#redStruct);\r\n        let t0 = offset % FLOAT4_SIZE;\r\n        this.#gpuBufferSize = (this.#redStruct.length ? (offset + (t0 ? (FLOAT4_SIZE - t0) : 0)) : FLOAT4_SIZE);\r\n        this.#typeArraySize = this.#gpuBufferSize / Float32Array.BYTES_PER_ELEMENT;\r\n        Object.keys(this.#redStructOffsetMap).forEach(key => {\r\n            this.#redGpuStructOffsetMap[key] = this.#redStructOffsetMap[key];\r\n            this.#redStructOffsetMap[key] = this.#redStructOffsetMap[key] / Float32Array.BYTES_PER_ELEMENT;\r\n        });\r\n        // console.log(this)\r\n    }\r\n    get redStruct() {\r\n        return this.#redStruct;\r\n    }\r\n    get redStructOffsetMap() {\r\n        return this.#redStructOffsetMap;\r\n    }\r\n    get redGpuStructOffsetMap() {\r\n        return this.#redGpuStructOffsetMap;\r\n    }\r\n    get typeArraySize() {\r\n        return this.#typeArraySize;\r\n    }\r\n    get gpuBufferSize() {\r\n        return this.#gpuBufferSize;\r\n    }\r\n}\r\nexport default UniformBufferDescriptor;\r\n","import RedGPUContextBase from \"../../../context/RedGPUContextBase\";\r\nimport throwError from \"../../../util/errorFunc/throwError\";\r\n/**\r\n * 유니폼 버퍼\r\n */\r\nclass UniformBufferFloat32 extends RedGPUContextBase {\r\n    #gpuBuffer;\r\n    #typeArraySize;\r\n    #gpuBufferSize;\r\n    #descriptor;\r\n    #usage;\r\n    #data;\r\n    constructor(redGPUContext, descriptor, usage = GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST) {\r\n        super(redGPUContext);\r\n        this.#descriptor = descriptor;\r\n        this.#typeArraySize = descriptor.typeArraySize;\r\n        this.#gpuBufferSize = descriptor.gpuBufferSize;\r\n        this.#usage = usage;\r\n        this.#data = new Float32Array(this.#typeArraySize);\r\n        this.#gpuBuffer = this.redGPUContext.gpuDevice.createBuffer({\r\n            size: this.#gpuBufferSize,\r\n            usage: this.#usage,\r\n        });\r\n        // console.log(this)\r\n    }\r\n    get gpuBuffer() {\r\n        return this.#gpuBuffer;\r\n    }\r\n    get typeArraySize() {\r\n        return this.#typeArraySize;\r\n    }\r\n    get gpuBufferSize() {\r\n        return this.#gpuBufferSize;\r\n    }\r\n    get descriptor() {\r\n        return this.#descriptor;\r\n    }\r\n    get usage() {\r\n        return this.#usage;\r\n    }\r\n    get data() {\r\n        return this.#data;\r\n    }\r\n    set data(value) {\r\n        this.#data = value;\r\n    }\r\n    update(data, gpuBufferOffset = 0, dataOffset, size) {\r\n        if (!data)\r\n            throwError('반드시 데이터가 있어야함');\r\n        this.#data = data;\r\n        this.redGPUContext.gpuDevice.queue.writeBuffer(this.#gpuBuffer, gpuBufferOffset, data, dataOffset, size);\r\n    }\r\n}\r\nexport default UniformBufferFloat32;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport IndexBuffer from \"../buffers/buffer/IndexBuffer\";\r\nimport VertexBuffer from \"../buffers/buffer/VertexBuffer\";\r\nclass Geometry extends RedGPUContextBase {\r\n    #data;\r\n    #indexData;\r\n    #vertexGpuBuffer;\r\n    #vertexBuffer;\r\n    #indexGpuBuffer;\r\n    #indexBuffer;\r\n    //TODO - LOD Generator\r\n    #volume;\r\n    constructor(redGPUContext, data, interleaveInfo, indexData) {\r\n        super(redGPUContext);\r\n        this.#data = data;\r\n        this.#indexData = indexData;\r\n        this.#vertexBuffer = new VertexBuffer(redGPUContext, data, interleaveInfo);\r\n        this.#vertexGpuBuffer = this.#vertexBuffer.gpuBuffer;\r\n        // console.log('보자', this.#vertexBuffer.interleaveInfo)\r\n        if (indexData) {\r\n            this.#indexBuffer = new IndexBuffer(redGPUContext, indexData);\r\n            this.#indexGpuBuffer = this.#indexBuffer.gpuBuffer;\r\n        }\r\n        // console.log(this)\r\n    }\r\n    get data() {\r\n        return this.#data;\r\n    }\r\n    get indexData() {\r\n        return this.#indexData;\r\n    }\r\n    get vertexGpuBuffer() {\r\n        return this.#vertexGpuBuffer;\r\n    }\r\n    get vertexBuffer() {\r\n        return this.#vertexBuffer;\r\n    }\r\n    get indexGpuBuffer() {\r\n        return this.#indexGpuBuffer;\r\n    }\r\n    get indexBuffer() {\r\n        return this.#indexBuffer;\r\n    }\r\n    get volume() {\r\n        if (!this.#volume)\r\n            this.volumeCalculate();\r\n        return this.#volume;\r\n    }\r\n    volumeCalculate() {\r\n        // console.time('volumeCalculate');\r\n        let minX, minY, minZ, maxX, maxY, maxZ, t0, t1, t2, t, i, len;\r\n        let stride = this.#vertexBuffer.interleaveInfo.stride;\r\n        // console.log('stride',this.#vertexBuffer.interleaveInfo)\r\n        // if (!volume[this]) {\r\n        minX = minY = minZ = maxX = maxY = maxZ = 0;\r\n        t = this.#data;\r\n        i = 0;\r\n        len = this.#vertexBuffer['vertexCount'];\r\n        for (i; i < len; i++) {\r\n            t0 = i * stride, t1 = t0 + 1, t2 = t0 + 2,\r\n                minX = t[t0] < minX ? t[t0] : minX,\r\n                maxX = t[t0] > maxX ? t[t0] : maxX,\r\n                minY = t[t1] < minY ? t[t1] : minY,\r\n                maxY = t[t1] > maxY ? t[t1] : maxY,\r\n                minZ = t[t2] < minZ ? t[t2] : minZ,\r\n                maxZ = t[t2] > maxZ ? t[t2] : maxZ;\r\n        }\r\n        this.#volume = {};\r\n        this.#volume.volume = [maxX - minX, maxY - minY, maxZ - minZ];\r\n        this.#volume.minX = minX;\r\n        this.#volume.maxX = maxX;\r\n        this.#volume.minY = minY;\r\n        this.#volume.maxY = maxY;\r\n        this.#volume.minZ = minZ;\r\n        this.#volume.maxZ = maxZ;\r\n        this.#volume.xSize = Math.max(Math.abs(minX), Math.abs(maxX));\r\n        this.#volume.ySize = Math.max(Math.abs(minY), Math.abs(maxY));\r\n        this.#volume.zSize = Math.max(Math.abs(minZ), Math.abs(maxZ));\r\n        // this.#volume.xSize = Math.max(Math.abs(minX), Math.abs(maxX)) - Math.min(Math.abs(minX), Math.abs(maxX)) ;\r\n        // this.#volume.ySize = Math.max(Math.abs(minY), Math.abs(maxY)) - Math.min(Math.abs(minY), Math.abs(maxY));\r\n        // this.#volume.zSize = Math.max(Math.abs(minZ), Math.abs(maxZ)) - Math.min(Math.abs(minZ), Math.abs(maxZ));\r\n        this.#volume.geometryRadius = Math.max(this.#volume.xSize, this.#volume.ySize, this.#volume.zSize);\r\n        // }\r\n        // console.timeEnd('volumeCalculate');\r\n        return this.#volume;\r\n    }\r\n}\r\nexport default Geometry;\r\n","import Geometry from \"./Geometry\";\r\nimport Box from \"./primitives/Box\";\r\nimport Sphere from \"./primitives/Sphere\";\r\nexport { Geometry, Box, Sphere };\r\n","\"use strict\";\r\nimport InterleaveInfo from \"../../buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../../buffers/interleaveInfo/InterleaveUnit\";\r\nimport Geometry from \"../Geometry\";\r\nexport default class Box extends Geometry {\r\n    constructor(redGPUContext, width = 1, height = 1, depth = 1, wSegments = 1, hSegments = 1, dSegments = 1, uvSize = 1) {\r\n        const tData = makeData(redGPUContext, width, height, depth, wSegments, hSegments, dSegments, uvSize);\r\n        // console.log('tData', tData)\r\n        const data = tData['vertexData'];\r\n        const interleaveInfo = tData['interleaveInfo'];\r\n        const indexData = tData['indexData'];\r\n        super(redGPUContext, data, interleaveInfo, indexData);\r\n    }\r\n}\r\nconst makeData = (function () {\r\n    let numberOfVertices;\r\n    let groupStart;\r\n    let buildPlane;\r\n    buildPlane = function (interleaveData, indexData, u, v, w, udir, vdir, width, height, depth, gridX, gridY, uvSize) {\r\n        let segmentWidth = width / gridX;\r\n        let segmentHeight = height / gridY;\r\n        let widthHalf = width / 2, heightHalf = height / 2;\r\n        let depthHalf = depth / 2;\r\n        let gridX1 = gridX + 1, gridY1 = gridY + 1;\r\n        let vertexCounter = 0;\r\n        let groupCount = 0;\r\n        let ix, iy;\r\n        let vector = [];\r\n        for (iy = 0; iy < gridY1; iy++) {\r\n            let y = iy * segmentHeight - heightHalf;\r\n            for (ix = 0; ix < gridX1; ix++) {\r\n                let x = ix * segmentWidth - widthHalf;\r\n                // set values to correct vector component\r\n                vector[u] = x * udir, vector[v] = y * vdir, vector[w] = depthHalf,\r\n                    interleaveData.push(vector['x'], vector['y'], vector['z']), // position\r\n                    vector[u] = 0, vector[v] = 0, vector[w] = depth > 0 ? 1 : -1,\r\n                    interleaveData.push(vector['x'], vector['y'], vector['z']), // normal\r\n                    interleaveData.push(ix / gridX * uvSize, (iy / gridY * uvSize)), // texcoord\r\n                    vertexCounter += 1; // counters\r\n            }\r\n        }\r\n        // indices\r\n        for (iy = 0; iy < gridY; iy++) {\r\n            for (ix = 0; ix < gridX; ix++) {\r\n                let a = numberOfVertices + ix + gridX1 * iy;\r\n                let b = numberOfVertices + ix + gridX1 * (iy + 1);\r\n                let c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\r\n                let d = numberOfVertices + (ix + 1) + gridX1 * iy;\r\n                indexData.push(a, b, d, b, c, d);\r\n                groupCount += 6;\r\n            }\r\n        }\r\n        groupStart += groupCount;\r\n        numberOfVertices += vertexCounter;\r\n    };\r\n    return function (redGPUContext, width, height, depth, wSegments, hSegments, dSegments, uvSize) {\r\n        ////////////////////////////////////////////////////////////////////////////\r\n        // 데이터 생성!\r\n        // buffers Data\r\n        let interleaveData = [];\r\n        let indexData = [];\r\n        numberOfVertices = 0;\r\n        groupStart = 0;\r\n        buildPlane(interleaveData, indexData, 'z', 'y', 'x', -1, -1, depth, height, width, dSegments, hSegments, uvSize); // px\r\n        buildPlane(interleaveData, indexData, 'z', 'y', 'x', 1, -1, depth, height, -width, dSegments, hSegments, uvSize); // nx\r\n        buildPlane(interleaveData, indexData, 'x', 'z', 'y', 1, 1, width, depth, height, wSegments, dSegments, uvSize); // py\r\n        buildPlane(interleaveData, indexData, 'x', 'z', 'y', 1, -1, width, depth, -height, wSegments, dSegments, uvSize); // ny\r\n        buildPlane(interleaveData, indexData, 'x', 'y', 'z', 1, -1, width, height, depth, wSegments, hSegments, uvSize); // pz\r\n        buildPlane(interleaveData, indexData, 'x', 'y', 'z', -1, -1, width, height, -depth, wSegments, hSegments, uvSize); // nz\r\n        return {\r\n            vertexData: new Float32Array(interleaveData),\r\n            interleaveInfo: new InterleaveInfo([\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, \"float32x3\"),\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_NORMAL, \"float32x3\"),\r\n                new InterleaveUnit(InterleaveUnit.TEXCOORD, 'float32x2')\r\n            ]),\r\n            indexData: new Uint32Array(indexData)\r\n        };\r\n    };\r\n})();\r\n","\"use strict\";\r\nimport { vec3 } from \"../../../util/gl-matrix\";\r\nimport InterleaveInfo from \"../../buffers/interleaveInfo/InterleaveInfo\";\r\nimport InterleaveUnit from \"../../buffers/interleaveInfo/InterleaveUnit\";\r\nimport Geometry from \"../Geometry\";\r\nexport default class Sphere extends Geometry {\r\n    constructor(redGPUContext, radius = 1, widthSegments = 16, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI, uvSize = 1) {\r\n        const tData = makeData(redGPUContext, radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength, uvSize);\r\n        // console.log('tData', tData)\r\n        const data = tData['vertexData'];\r\n        const interleaveInfo = tData['interleaveInfo'];\r\n        const indexData = tData['indexData'];\r\n        super(redGPUContext, data, interleaveInfo, indexData);\r\n    }\r\n}\r\nconst makeData = (function () {\r\n    let thetaEnd;\r\n    let ix, iy;\r\n    let index;\r\n    let grid = [];\r\n    let a, b, c, d;\r\n    let vertex = new Float32Array([0, 0, 0]);\r\n    let normal = new Float32Array([0, 0, 0]);\r\n    return function (redGPUContext, radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength, uvSize) {\r\n        thetaEnd = thetaStart + thetaLength;\r\n        index = 0;\r\n        grid.length = 0;\r\n        vertex[0] = 0, vertex[1] = 0, vertex[2] = 0;\r\n        normal[0] = 0, normal[1] = 0, normal[2] = 0;\r\n        ////////////////////////////////////////////////////////////////////////////\r\n        // 데이터 생성!\r\n        // buffers Data\r\n        let interleaveData = [];\r\n        let indexData = [];\r\n        // generate vertices, normals and uvs\r\n        for (iy = 0; iy <= heightSegments; iy++) {\r\n            let verticesRow = [];\r\n            let v = iy / heightSegments;\r\n            for (ix = 0; ix <= widthSegments; ix++) {\r\n                let u = ix / widthSegments;\r\n                // vertex\r\n                vertex['x'] = -radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\r\n                vertex['y'] = radius * Math.cos(thetaStart + v * thetaLength);\r\n                vertex['z'] = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\r\n                interleaveData.push(vertex['x'], vertex['y'], vertex['z']);\r\n                // normal\r\n                normal[0] = vertex['x'];\r\n                normal[1] = vertex['y'];\r\n                normal[2] = vertex['z'];\r\n                vec3.normalize(normal, normal);\r\n                interleaveData.push(normal[0], normal[1], normal[2]);\r\n                // uv\r\n                interleaveData.push(u * uvSize, v * uvSize);\r\n                verticesRow.push(index++);\r\n            }\r\n            grid.push(verticesRow);\r\n        }\r\n        // indices\r\n        for (iy = 0; iy < heightSegments; iy++) {\r\n            for (ix = 0; ix < widthSegments; ix++) {\r\n                a = grid[iy][ix + 1];\r\n                b = grid[iy][ix];\r\n                c = grid[iy + 1][ix];\r\n                d = grid[iy + 1][ix + 1];\r\n                if (iy !== 0 || thetaStart > 0)\r\n                    indexData.push(a, b, d);\r\n                if (iy !== heightSegments - 1 || thetaEnd < Math.PI)\r\n                    indexData.push(b, c, d);\r\n            }\r\n        }\r\n        return {\r\n            vertexData: new Float32Array(interleaveData),\r\n            interleaveInfo: new InterleaveInfo([\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_POSITION, \"float32x3\"),\r\n                new InterleaveUnit(InterleaveUnit.VERTEX_NORMAL, \"float32x3\"),\r\n                new InterleaveUnit(InterleaveUnit.TEXCOORD, 'float32x2')\r\n            ]),\r\n            indexData: new Uint32Array(indexData)\r\n        };\r\n    };\r\n})();\r\n","import shaderDefineReplace from \"../systemShaderDefine/shaderDefineReplace\";\r\nconst draftCache = new Map();\r\nconst makeShaderModule = (device, source, label = '') => {\r\n    if (draftCache.has(source)) {\r\n        // console.log('이미 생성된 모듈을 사용',label)\r\n        return draftCache.get(source);\r\n    }\r\n    const shaderModuleDescriptor = {\r\n        code: shaderDefineReplace(source),\r\n        label\r\n    };\r\n    const t0 = device.createShaderModule(shaderModuleDescriptor);\r\n    draftCache.set(source, t0);\r\n    // console.log('신규 생성 모듈을 사용',label)\r\n    // console.log('draftCache', draftCache, t0)\r\n    // console.log(t0)\r\n    return t0;\r\n};\r\nexport default makeShaderModule;\r\n","class CubeTextureInfo {\r\n    resource;\r\n    textureView;\r\n    constructor(resource, textureView = null) {\r\n        this.resource = resource;\r\n        this.textureView = textureView;\r\n    }\r\n}\r\nexport default CubeTextureInfo;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport makeUUID from \"../../util/makeUUID\";\r\nimport { BitmapCubeTexture, BitmapTexture, TextureSampler } from \"../texture\";\r\nimport CubeTextureInfo from \"./CubeTextureInfo\";\r\nimport TextureInfo from \"./TextureInfo\";\r\nclass RedGPUContextResourceManager extends RedGPUContextBase {\r\n    #uuidTable = {};\r\n    #textureTable = {};\r\n    #cubeTextureTable = {};\r\n    #samplerTable = {};\r\n    #emptyTextureInfo;\r\n    #emptyCubeTextureInfo;\r\n    constructor(context) {\r\n        super(context);\r\n        const emptyTextureInfo = this.redGPUContext.gpuDevice.createTexture({\r\n            label: 'emptyTexture',\r\n            size: { width: 1, height: 1, depthOrArrayLayers: 1 },\r\n            format: navigator.gpu.getPreferredCanvasFormat(),\r\n            usage: GPUTextureUsage.TEXTURE_BINDING || GPUTextureUsage.RENDER_ATTACHMENT,\r\n        });\r\n        const emptyCubeTextureInfo = this.redGPUContext.gpuDevice.createTexture({\r\n            label: 'emptyCubeTexture',\r\n            size: { width: 1, height: 1, depthOrArrayLayers: 6, },\r\n            dimension: '2d',\r\n            // arrayLayerCount: 6,\r\n            mipLevelCount: 1,\r\n            sampleCount: 1,\r\n            format: navigator.gpu.getPreferredCanvasFormat(),\r\n            usage: GPUTextureUsage.TEXTURE_BINDING,\r\n        });\r\n        this.#emptyTextureInfo = new TextureInfo(emptyTextureInfo, emptyTextureInfo.createView());\r\n        this.#emptyCubeTextureInfo = new CubeTextureInfo(emptyCubeTextureInfo, emptyCubeTextureInfo.createView({\r\n            dimension: 'cube',\r\n            aspect: 'all',\r\n            baseMipLevel: 0,\r\n            mipLevelCount: 1,\r\n            baseArrayLayer: 0,\r\n            arrayLayerCount: 6\r\n        }));\r\n        console.log(this, this.#textureTable);\r\n    }\r\n    get textureTable() {\r\n        return this.#textureTable;\r\n    }\r\n    get cubeTextureTable() {\r\n        return this.#cubeTextureTable;\r\n    }\r\n    get samplerTable() {\r\n        return this.#samplerTable;\r\n    }\r\n    get emptyTextureInfo() {\r\n        return this.#emptyTextureInfo;\r\n    }\r\n    get emptyCubeTextureInfo() {\r\n        return this.#emptyCubeTextureInfo;\r\n    }\r\n    delResource(resource) {\r\n        const uuid = this.#getUUID(resource);\r\n        if (resource instanceof BitmapTexture) {\r\n            delete this.#textureTable[uuid];\r\n        }\r\n        else if (resource instanceof BitmapCubeTexture) {\r\n            delete this.#cubeTextureTable[uuid];\r\n        }\r\n        else if (resource instanceof TextureSampler) {\r\n            delete this.#samplerTable[uuid];\r\n        }\r\n        else {\r\n        }\r\n    }\r\n    getResource(resource) {\r\n        const uuid = this.#getUUID(resource);\r\n        if (resource instanceof BitmapTexture) {\r\n            return this.#textureTable[uuid];\r\n        }\r\n        else if (resource instanceof BitmapCubeTexture) {\r\n            return this.#cubeTextureTable[uuid];\r\n        }\r\n        else if (resource instanceof TextureSampler) {\r\n            return this.#samplerTable[uuid];\r\n        }\r\n        else {\r\n        }\r\n    }\r\n    addResource(resource) {\r\n        console.log('addResource', resource);\r\n        let uuid;\r\n        const label = this.#getLabel(resource);\r\n        if (resource instanceof BitmapTexture) {\r\n            uuid = this.#uuidTable[label] = makeUUID();\r\n            this.#textureTable[uuid] = new TextureInfo(resource);\r\n        }\r\n        else if (resource instanceof BitmapCubeTexture) {\r\n            uuid = this.#uuidTable[label] = makeUUID();\r\n            this.#cubeTextureTable[uuid] = new CubeTextureInfo(resource, null);\r\n        }\r\n        else if (resource instanceof TextureSampler) {\r\n            uuid = this.#uuidTable[label] = makeUUID();\r\n            this.#samplerTable[uuid] = resource;\r\n        }\r\n        else {\r\n            alert('등록할수 없는 타입');\r\n        }\r\n    }\r\n    #getUUID(resource) {\r\n        let tableID;\r\n        const label = this.#getLabel(resource);\r\n        if (resource instanceof BitmapTexture) {\r\n            tableID = this.#uuidTable[label];\r\n        }\r\n        else if (resource instanceof BitmapCubeTexture) {\r\n            tableID = this.#uuidTable[label];\r\n        }\r\n        else if (resource instanceof TextureSampler) {\r\n            tableID = this.#uuidTable[label];\r\n        }\r\n        else {\r\n            alert('리소스로 관리 할수 없는 타입');\r\n        }\r\n        return tableID;\r\n    }\r\n    #getLabel(resource) {\r\n        let label;\r\n        if (resource instanceof BitmapTexture) {\r\n            label = resource.src;\r\n        }\r\n        else if (resource instanceof BitmapCubeTexture) {\r\n            label = resource.srcList.toString();\r\n        }\r\n        else if (resource instanceof TextureSampler) {\r\n            label = resource.optionString;\r\n        }\r\n        else {\r\n            alert('리소스로 관리 할수 없는 타입');\r\n        }\r\n        return label;\r\n    }\r\n}\r\nexport default RedGPUContextResourceManager;\r\n","class TextureInfo {\r\n    resource;\r\n    textureView;\r\n    constructor(resource, textureView = null) {\r\n        this.resource = resource;\r\n        this.textureView = textureView;\r\n    }\r\n}\r\nexport default TextureInfo;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport makeUUID from \"../../util/makeUUID\";\r\nimport generateWebGPUTextureMipmap from \"./mipmapGenerator/generateWebGPUTextureMipmap\";\r\nclass BitmapCubeTexture extends RedGPUContextBase {\r\n    #srcList;\r\n    #imgBitmapList;\r\n    #gpuTexture;\r\n    #targetList = new Set();\r\n    constructor(redGPUContext, srcList) {\r\n        super(redGPUContext);\r\n        this.#srcList = srcList;\r\n        if (this.#srcList) {\r\n            const resource = redGPUContext.resourceManager.getResource(this);\r\n            if (resource) {\r\n                console.log('BitmapCubeTexture 캐시된 녀석을씀');\r\n                // console.log('캐시된 녀석을씀',redGPUContext.resourceManager,redGPUContext.resourceManager.getResource(this))\r\n                return resource.resource;\r\n            }\r\n            else {\r\n                console.log('BitmapCubeTexture 캐시된 녀석을안씀');\r\n                redGPUContext.resourceManager.addResource(this);\r\n                this.#webGPUTextureFromImageUrl(this.#srcList);\r\n            }\r\n        }\r\n    }\r\n    get srcList() {\r\n        return this.#srcList;\r\n    }\r\n    get imgBitmapList() {\r\n        return this.#imgBitmapList;\r\n    }\r\n    get gpuTexture() {\r\n        return this.#gpuTexture;\r\n    }\r\n    get gpuTextureView() {\r\n        const tResource = this.redGPUContext.resourceManager.getResource(this);\r\n        if (this.#gpuTexture) {\r\n            if (tResource.textureView) {\r\n                console.log('BitmapCubeTexture 캐시된 녀석의 뷰를 사용함');\r\n                return tResource.textureView;\r\n            }\r\n            else {\r\n                console.log('BitmapCubeTexture 캐시된 녀석의 뷰를 만듬');\r\n                tResource.textureView = this.#gpuTexture?.createView({\r\n                    dimension: 'cube',\r\n                    aspect: 'all',\r\n                    baseMipLevel: 0,\r\n                    mipLevelCount: 1,\r\n                    baseArrayLayer: 0,\r\n                    arrayLayerCount: 6,\r\n                    label: (this.#srcList || []).toString()\r\n                });\r\n                return tResource.textureView;\r\n            }\r\n        }\r\n        else {\r\n            return this.redGPUContext.resourceManager['emptyCubeTextureInfo'].textureView;\r\n        }\r\n    }\r\n    destroy() {\r\n        //TODO destroy\r\n    }\r\n    addTargetMaterial(target) {\r\n        this.#targetList.add(target);\r\n    }\r\n    #webGPUTextureFromImageUrl(srcList) {\r\n        const { redGPUContext } = this;\r\n        const { gpuDevice } = redGPUContext;\r\n        console.log('srcList', srcList);\r\n        Promise.all(srcList.map(url => {\r\n            console.log('url', url);\r\n            return fetch(url).then(response => response.blob().then(blob => createImageBitmap(blob)));\r\n        })).then(imgBitmapList => {\r\n            this.#gpuTexture = makeWebGPUTexture(gpuDevice, imgBitmapList, true, (srcList || []).toString());\r\n            this.#imgBitmapList = imgBitmapList;\r\n            this.#resolve();\r\n        }).catch(e => {\r\n            this.#gpuTexture = null;\r\n            this.#resolve();\r\n        });\r\n    }\r\n    #resolve() {\r\n        const temp = this.#targetList;\r\n        this.#targetList = new Set();\r\n        console.log('#targetList', temp);\r\n        for (const value of temp) {\r\n            temp.delete(value);\r\n            value['bindGroupID'] = makeUUID();\r\n            value['dirtyTexture'] = true;\r\n        }\r\n        console.log('#targetList', temp);\r\n        // temp.clear()\r\n    }\r\n}\r\nfunction makeWebGPUTexture(gpuDevice, sourceList, generateMipmaps = true, label) {\r\n    console.log('sourceList', sourceList);\r\n    // 텍스쳐에 대한 정의를 내리고\r\n    const textureDescriptor = {\r\n        size: { width: sourceList[0].width, height: sourceList[0].height, depthOrArrayLayers: 6 },\r\n        format: 'rgba8unorm',\r\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST,\r\n        label\r\n    };\r\n    // 밉맵을 생성할꺼면 소스를 계산해서... 밉맵 카운트를 추가 정의한다.\r\n    // if (generateMipmaps) {\r\n    //     // Compute how many mip levels are needed for a full chain.\r\n    //     textureDescriptor.mipLevelCount = Math.floor(Math.log2(Math.max(sourceList[0].width, sourceList[0].height))) + 1;\r\n    //     // Needed in order to use render passes to generate the mipmaps.\r\n    //     textureDescriptor.usage |= GPUTextureUsage.RENDER_ATTACHMENT;\r\n    // }\r\n    // 생성할 원본 소스를 생성한다.\r\n    const cubeMapTexture2 = gpuDevice.createTexture(textureDescriptor);\r\n    console.log('cubeMapTexture1', cubeMapTexture2);\r\n    sourceList.forEach((imageBitmap, i) => {\r\n        gpuDevice.queue.copyExternalImageToTexture({ source: imageBitmap }, { texture: cubeMapTexture2, origin: [0, 0, i] }, [imageBitmap.width, imageBitmap.height]);\r\n    });\r\n    if (generateMipmaps) {\r\n        // 밉맵생성을 한다.\r\n        generateWebGPUTextureMipmap(gpuDevice, cubeMapTexture2, textureDescriptor);\r\n    }\r\n    // // 생성한 텍스쳐에 데이터를 밀어넣는다.\r\n    // console.log('cubeTexture1', cubeTexture)\r\n    // sourceList.forEach((source, face) => {\r\n    //     console.log(source)\r\n    //     gpuDevice.queue.copyExternalImageToTexture({source}, {\r\n    //         texture: cubeTexture,\r\n    //         mipLevel: face,\r\n    //         origin: {z: face},\r\n    //         textureExtent: {\r\n    //             width: source.width,\r\n    //             height: source.height,\r\n    //             depthOrArrayLayers: 1\r\n    //         }\r\n    //     }, textureDescriptor.size);\r\n    //\r\n    // })\r\n    // console.log('cubeTexture2', cubeTexture)\r\n    // if (generateMipmaps) {\r\n    //     // 밉맵생성을 한다.\r\n    //     generateWebGPUTextureMipmap(gpuDevice, cubeTexture, textureDescriptor);\r\n    // }\r\n    console.log('cubeMapTexture2', cubeMapTexture2);\r\n    return cubeMapTexture2;\r\n}\r\nexport default BitmapCubeTexture;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nimport makeUUID from \"../../util/makeUUID\";\r\nimport generateWebGPUTextureMipmap from \"./mipmapGenerator/generateWebGPUTextureMipmap\";\r\nclass BitmapTexture extends RedGPUContextBase {\r\n    #src;\r\n    #imgBitmap;\r\n    #gpuTexture;\r\n    #targetList = new Set();\r\n    constructor(redGPUContext, src) {\r\n        super(redGPUContext);\r\n        this.#src = src;\r\n        if (this.#src) {\r\n            const resource = redGPUContext.resourceManager.getResource(this);\r\n            if (resource) {\r\n                console.log('BitmapTexture 캐시된 녀석을씀');\r\n                // console.log('캐시된 녀석을씀',redGPUContext.resourceManager,redGPUContext.resourceManager.getResource(this))\r\n                return resource.resource;\r\n            }\r\n            else {\r\n                console.log('BitmapTexture 캐시된 녀석을안씀');\r\n                redGPUContext.resourceManager.addResource(this);\r\n                this.#webGPUTextureFromImageUrl(this.#src);\r\n            }\r\n        }\r\n    }\r\n    get src() {\r\n        return this.#src;\r\n    }\r\n    get imgBitmap() {\r\n        return this.#imgBitmap;\r\n    }\r\n    get gpuTexture() {\r\n        return this.#gpuTexture;\r\n    }\r\n    get gpuTextureView() {\r\n        const tResource = this.redGPUContext.resourceManager.getResource(this);\r\n        if (this.#gpuTexture) {\r\n            if (tResource.textureView) {\r\n                console.log('BitmapTexture 캐시된 녀석의 뷰를 사용함');\r\n                return tResource.textureView;\r\n            }\r\n            else {\r\n                console.log('BitmapTexture 캐시된 녀석의 뷰를 만듬');\r\n                tResource.textureView = this.#gpuTexture.createView({\r\n                    label: this.#src\r\n                });\r\n                return tResource.textureView;\r\n            }\r\n        }\r\n        else {\r\n            return this.redGPUContext.resourceManager['emptyTextureInfo'].textureView;\r\n        }\r\n    }\r\n    destroy() {\r\n        if (this.#gpuTexture) {\r\n            this.#gpuTexture.destroy();\r\n            this.#gpuTexture = null;\r\n            this.redGPUContext.resourceManager.delResource(this);\r\n        }\r\n    }\r\n    addTargetMaterial(target) {\r\n        this.#targetList.add(target);\r\n    }\r\n    #webGPUTextureFromImageUrl(url) {\r\n        const { redGPUContext } = this;\r\n        const { gpuDevice } = redGPUContext;\r\n        fetch(url).then(response => response.blob().then(blob => createImageBitmap(blob))).then(imgBitmap => {\r\n            console.log(imgBitmap);\r\n            this.#imgBitmap = imgBitmap;\r\n            this.#gpuTexture = makeWebGPUTexture(gpuDevice, imgBitmap, true, url);\r\n            this.#resolve();\r\n        }).catch(e => {\r\n            this.#gpuTexture = null;\r\n            this.#resolve();\r\n        });\r\n    }\r\n    #resolve() {\r\n        const temp = this.#targetList;\r\n        this.#targetList = new Set();\r\n        console.log('#targetList', temp);\r\n        for (const value of temp) {\r\n            temp.delete(value);\r\n            value['bindGroupID'] = makeUUID();\r\n            value['dirtyTexture'] = true;\r\n        }\r\n        console.log('#targetList', temp);\r\n        // temp.clear()\r\n    }\r\n}\r\nfunction makeWebGPUTexture(gpuDevice, source, generateMipmaps = true, label) {\r\n    // 텍스쳐에 대한 정의를 내리고\r\n    const textureDescriptor = {\r\n        size: { width: source.width, height: source.height },\r\n        format: 'rgba8unorm',\r\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST,\r\n        label\r\n    };\r\n    // 밉맵을 생성할꺼면 소스를 계산해서... 밉맵 카운트를 추가 정의한다.\r\n    if (generateMipmaps) {\r\n        // Compute how many mip levels are needed for a full chain.\r\n        textureDescriptor.mipLevelCount = Math.floor(Math.log2(Math.max(source.width, source.height))) + 1;\r\n        // Needed in order to use render passes to generate the mipmaps.\r\n        textureDescriptor.usage |= GPUTextureUsage.RENDER_ATTACHMENT;\r\n    }\r\n    // 생성할 원본 소스를 생성한다.\r\n    const texture = gpuDevice.createTexture(textureDescriptor);\r\n    // 생성한 텍스쳐에 데이터를 밀어넣는다.\r\n    gpuDevice.queue.copyExternalImageToTexture({ source }, { texture }, textureDescriptor.size);\r\n    if (generateMipmaps) {\r\n        // 밉맵생성을 한다.\r\n        generateWebGPUTextureMipmap(gpuDevice, texture, textureDescriptor);\r\n    }\r\n    return texture;\r\n}\r\nexport default BitmapTexture;\r\n","import RedGPUContextBase from \"../../context/RedGPUContextBase\";\r\nclass TextureSampler extends RedGPUContextBase {\r\n    #optionString;\r\n    #gpuSampler;\r\n    constructor(redGPUContext, option = {}) {\r\n        super(redGPUContext);\r\n        const { resourceManager } = redGPUContext;\r\n        option = {\r\n            ...option,\r\n            magFilter: option['magFilter'] || \"linear\",\r\n            minFilter: option['minFilter'] || \"linear\",\r\n            mipmapFilter: option['mipmapFilter'] || \"linear\",\r\n            addressModeU: option['addressModeU'] || \"repeat\",\r\n            addressModeV: option['addressModeV'] || \"repeat\",\r\n            addressModeW: option['addressModeW'] || \"repeat\",\r\n        };\r\n        this.#optionString = Object.keys(option).map(key => {\r\n            return `${key}:${option[key]}`;\r\n        }, []).join(' ');\r\n        const resource = resourceManager.getResource(this);\r\n        if (resource) {\r\n            console.log('TextureSampler 캐시된 녀석을씀', resource);\r\n            return resource;\r\n        }\r\n        else {\r\n            option['label'] = this.#optionString;\r\n            this.#gpuSampler = redGPUContext.gpuDevice.createSampler(option);\r\n            resourceManager.addResource(this);\r\n        }\r\n    }\r\n    get optionString() {\r\n        return this.#optionString;\r\n    }\r\n    get gpuSampler() {\r\n        return this.#gpuSampler;\r\n    }\r\n}\r\nexport default TextureSampler;\r\n","import RedGPUContextResourceManager from \"../resourceManager/RedGPUContextResourceManager\";\r\nimport BitmapCubeTexture from \"./BitmapCubeTexture\";\r\nimport BitmapTexture from \"./BitmapTexture\";\r\nimport TextureSampler from \"./TextureSampler\";\r\nexport { RedGPUContextResourceManager, TextureSampler, BitmapTexture, BitmapCubeTexture };\r\n","import fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nconst generateWebGPUTextureMipmap = (gpuDevice, texture, textureDescriptor) => {\r\n    console.log('generateWebGPUTextureMipmap');\r\n    //TODO 재생성 안되게 처리\r\n    const vShaderModule = gpuDevice.createShaderModule({\r\n        code: vertexSource,\r\n        label: 'vertex_generateWebGPUTextureMipmap'\r\n    });\r\n    const fShaderModule = gpuDevice.createShaderModule({\r\n        code: fragmentSource,\r\n        label: 'fragment_generateWebGPUTextureMipmap'\r\n    });\r\n    const pipelineDescriptor = {\r\n        layout: gpuDevice.createPipelineLayout({\r\n            // maxBindGroups의 영향을 받는다\r\n            bindGroupLayouts: [\r\n                gpuDevice.createBindGroupLayout({\r\n                    entries: [\r\n                        {\r\n                            binding: 0,\r\n                            visibility: GPUShaderStage.FRAGMENT,\r\n                            sampler: {\r\n                                type: 'filtering',\r\n                            },\r\n                        },\r\n                        {\r\n                            binding: 1,\r\n                            visibility: GPUShaderStage.FRAGMENT,\r\n                            texture: {}\r\n                        }\r\n                    ]\r\n                })\r\n            ]\r\n        }),\r\n        vertex: {\r\n            module: vShaderModule,\r\n            entryPoint: 'main',\r\n        },\r\n        fragment: {\r\n            module: fShaderModule,\r\n            entryPoint: 'main',\r\n            targets: [{\r\n                    format: textureDescriptor.format // Make sure to use the same format as the texture\r\n                }],\r\n        },\r\n        primitive: {\r\n            topology: 'triangle-strip',\r\n            stripIndexFormat: 'uint32',\r\n        },\r\n    };\r\n    const pipeline = gpuDevice.createRenderPipeline(pipelineDescriptor);\r\n    // We'll ALWAYS be rendering minified here, so that's the only filter mode we need to set.\r\n    // const gpuSampler = sampler?.gpuSampler || gpuDevice.createSampler( {minFilter: 'linear'});\r\n    const gpuSampler = gpuDevice.createSampler({ minFilter: 'linear' });\r\n    let srcView = texture.createView({\r\n        baseMipLevel: 0,\r\n        mipLevelCount: 1\r\n    });\r\n    // Loop through each mip level and renders the previous level's contents into it.\r\n    const commandEncoder = gpuDevice.createCommandEncoder({});\r\n    for (let i = 1; i < textureDescriptor.mipLevelCount; ++i) {\r\n        const dstView = texture.createView({\r\n            baseMipLevel: i,\r\n            mipLevelCount: 1, // And only selecting one mip level\r\n        });\r\n        const passEncoder = commandEncoder.beginRenderPass({\r\n            colorAttachments: [{\r\n                    view: dstView,\r\n                    clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\r\n                    loadOp: 'clear',\r\n                    storeOp: 'store'\r\n                }],\r\n        });\r\n        // Need a separate bind group for each level to ensure\r\n        // we're only sampling from the previous level.\r\n        const bindGroup = gpuDevice.createBindGroup({\r\n            layout: pipeline.getBindGroupLayout(0),\r\n            entries: [{\r\n                    binding: 0,\r\n                    resource: gpuSampler,\r\n                }, {\r\n                    binding: 1,\r\n                    resource: srcView,\r\n                }],\r\n        });\r\n        // Render\r\n        passEncoder.setPipeline(pipeline);\r\n        passEncoder.setBindGroup(0, bindGroup);\r\n        passEncoder.draw(4);\r\n        passEncoder.end();\r\n        // The source texture view for the next iteration of the loop is the\r\n        // destination view for this one.\r\n        srcView = dstView;\r\n    }\r\n    gpuDevice.queue.submit([commandEncoder.finish()]);\r\n};\r\nexport default generateWebGPUTextureMipmap;\r\n","import shaderDefineReplace from \"./shaderDefineReplace\";\r\nimport shaderDefines from \"../material/wgsl\";\r\nconst SHADER_DEFINE = {\r\n    shaderDefineReplace,\r\n    ...shaderDefines\r\n};\r\nexport { SHADER_DEFINE };\r\n","import { LightManager } from \"../light\";\r\nimport PassLightClustersHelper from \"../light/pointLightCluster/PassLightClustersHelper\";\r\nimport shaderDefines from \"../material/wgsl\";\r\nconst shaderDefineReplace = (source) => {\r\n    return source\r\n        .replace(/#+\\bREDGPU_DEFINE_VERTEX_BASE\\b/g, `#REDGPU_DEFINE_SYSTEM_UNIFORMS`)\r\n        .replace(/#+\\bREDGPU_DEFINE_SYSTEM_UNIFORMS\\b/g, shaderDefines.ShaderDefine_SystemUniforms)\r\n        .replace(/#+\\bREDGPU_DEFINE_MODEL_UNIFORMS_STRUCT\\b/g, shaderDefines.ShaderDefine_ModelUniformStruct)\r\n        .replace(/#+\\bREDGPU_DEFINE_SYSTEM_AMBIENT_DIRECTIONAL_LIGHTS\\b/g, shaderDefines.ShaderDefine_SystemAmbientDirectionalLights)\r\n        .replace(/#+\\bREDGPU_DEFINE_SYSTEM_CALC_LIGHT_FUNCTIONS\\b/g, shaderDefines.ShaderDefine_SystemCalcLightFunctions)\r\n        .replace(/REDGPU_DEFINE_TILE_COUNT_X/g, PassLightClustersHelper.TILE_COUNT_X.toString())\r\n        .replace(/REDGPU_DEFINE_TILE_COUNT_Y/g, PassLightClustersHelper.TILE_COUNT_Y.toString())\r\n        .replace(/REDGPU_DEFINE_TILE_COUNT_Z/g, PassLightClustersHelper.TILE_COUNT_Z.toString())\r\n        .replace(/REDGPU_DEFINE_TOTAL_TILES/g, PassLightClustersHelper.getTotalTileSize().toString())\r\n        .replace(/REDGPU_DEFINE_WORKGROUP_SIZE_X/g, PassLightClustersHelper.WORKGROUP_SIZE_X.toString())\r\n        .replace(/REDGPU_DEFINE_WORKGROUP_SIZE_Y/g, PassLightClustersHelper.WORKGROUP_SIZE_Y.toString())\r\n        .replace(/REDGPU_DEFINE_WORKGROUP_SIZE_Z/g, PassLightClustersHelper.WORKGROUP_SIZE_Z.toString())\r\n        .replace(/REDGPU_DEFINE_WORKGROUP_SIZE_Z/g, PassLightClustersHelper.WORKGROUP_SIZE_Z.toString())\r\n        .replace(/REDGPU_DEFINE_MAX_LIGHTS_PER_CLUSTER/g, PassLightClustersHelper.MAX_POINT_LIGHTS_PER_CLUSTER.toString())\r\n        .replace(/REDGPU_CONST_MAX_DIRECTIONAL_LIGHT_NUM/g, LightManager.MAX_DIRECTIONAL_LIGHT_NUM.toString());\r\n};\r\nexport default shaderDefineReplace;\r\n","import fragmentSource from './fragment.wgsl';\r\nimport vertexSource from './vertex.wgsl';\r\nclass Quad {\r\n    #pipeline;\r\n    constructor(redGPUContext) {\r\n        const { gpuDevice } = redGPUContext;\r\n        this.#pipeline = gpuDevice.createRenderPipeline({\r\n            layout: 'auto',\r\n            vertex: {\r\n                module: gpuDevice.createShaderModule({\r\n                    code: vertexSource,\r\n                }),\r\n                entryPoint: 'main',\r\n            },\r\n            fragment: {\r\n                module: gpuDevice.createShaderModule({\r\n                    code: fragmentSource,\r\n                }),\r\n                entryPoint: 'main',\r\n                targets: [\r\n                    {\r\n                        format: navigator.gpu.getPreferredCanvasFormat(),\r\n                        blend: {\r\n                            color: {\r\n                                srcFactor: \"src-alpha\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            },\r\n                            alpha: {\r\n                                srcFactor: \"one\",\r\n                                dstFactor: \"one-minus-src-alpha\",\r\n                                operation: \"add\"\r\n                            }\r\n                        }\r\n                    },\r\n                ],\r\n            },\r\n            multisample: {\r\n                count: redGPUContext.useMultiSample ? 4 : 1\r\n            },\r\n            depthStencil: {\r\n                depthWriteEnabled: false,\r\n                depthCompare: 'less-equal',\r\n                format: \"depth24plus-stencil8\",\r\n            },\r\n            primitive: {\r\n                topology: 'triangle-list',\r\n                cullMode: 'none',\r\n                frontFace: \"ccw\"\r\n            },\r\n        });\r\n    }\r\n    render(passEncoder, gpuBuffer) {\r\n        passEncoder.setPipeline(this.#pipeline);\r\n        passEncoder.draw(6, 1, 0, 0);\r\n    }\r\n}\r\nexport default Quad;\r\n","import getConstructorName from \"../getConstructorName\";\r\nconst hexadecimalToRgb = (hexadecimal, returnArrayYn = false) => {\r\n    // console.log(hexadecimal, typeof hexadecimal)\r\n    if (typeof hexadecimal === 'number') {\r\n        hexadecimal = Math.floor(+hexadecimal);\r\n        if (returnArrayYn) {\r\n            return [\r\n                (hexadecimal >> 16 & 255) / 255,\r\n                (hexadecimal >> 8 & 255) / 255,\r\n                (hexadecimal & 255) / 255,\r\n                1\r\n            ];\r\n        }\r\n        else {\r\n            return {\r\n                r: (hexadecimal >> 16 & 255) / 255,\r\n                g: (hexadecimal >> 8 & 255) / 255,\r\n                b: (hexadecimal & 255) / 255,\r\n                a: 1,\r\n            };\r\n        }\r\n    }\r\n    else if (typeof hexadecimal === 'string' && (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hexadecimal)\r\n        || /^(0x)([A-Fa-f0-9]{3}){1,2}$/.test(hexadecimal))) {\r\n        const result = [];\r\n        let temp = (hexadecimal.substring(0, 2) === '0x' ? hexadecimal.substring(2) : hexadecimal.substring(1)).split('');\r\n        if (temp.length === 3)\r\n            temp = [temp[0], temp[0], temp[1], temp[1], temp[2], temp[2]];\r\n        const temp2 = '0x' + temp.join('');\r\n        result[0] = ((temp2 >> 16) & 255) / 255;\r\n        result[1] = ((temp2 >> 8) & 255) / 255;\r\n        result[2] = (temp2 & 255) / 255;\r\n        if (returnArrayYn) {\r\n            return [\r\n                ...result,\r\n                1\r\n            ];\r\n        }\r\n        else {\r\n            return {\r\n                r: result[0],\r\n                g: result[1],\r\n                b: result[2],\r\n                a: 1,\r\n            };\r\n        }\r\n    }\r\n    else {\r\n        throw Error(`from ${getConstructorName(hexadecimalToRgb)} : input value - ${hexadecimal} / Only hexadecimal number or hex string allowed`);\r\n    }\r\n};\r\nexport default hexadecimalToRgb;\r\n","import hexadecimalToRgb from \"./hexadecimalToRgb\";\r\nexport { hexadecimalToRgb };\r\n","import { mat4 } from \"./gl-matrix\";\r\nconst computeViewFrustumPlanes = (projectionMatrix, cameraMatrix) => {\r\n    let tMTX = mat4.create();\r\n    mat4.multiply(tMTX, projectionMatrix, cameraMatrix);\r\n    let planes = [];\r\n    planes[0] = [tMTX[3] - tMTX[0], tMTX[7] - tMTX[4], tMTX[11] - tMTX[8], tMTX[15] - tMTX[12]];\r\n    planes[1] = [tMTX[3] + tMTX[0], tMTX[7] + tMTX[4], tMTX[11] + tMTX[8], tMTX[15] + tMTX[12]];\r\n    planes[2] = [tMTX[3] + tMTX[1], tMTX[7] + tMTX[5], tMTX[11] + tMTX[9], tMTX[15] + tMTX[13]];\r\n    planes[3] = [tMTX[3] - tMTX[1], tMTX[7] - tMTX[5], tMTX[11] - tMTX[9], tMTX[15] - tMTX[13]];\r\n    planes[4] = [tMTX[3] - tMTX[2], tMTX[7] - tMTX[6], tMTX[11] - tMTX[10], tMTX[15] - tMTX[14]];\r\n    planes[5] = [tMTX[3] + tMTX[2], tMTX[7] + tMTX[6], tMTX[11] + tMTX[10], tMTX[15] + tMTX[14]];\r\n    for (let i = 0; i < planes.length; i++) {\r\n        let plane = planes[i];\r\n        let norm = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\r\n        plane[0] /= norm;\r\n        plane[1] /= norm;\r\n        plane[2] /= norm;\r\n        plane[3] /= norm;\r\n    }\r\n    return planes;\r\n};\r\nexport default computeViewFrustumPlanes;\r\n","import throwError from \"./throwError\";\r\nimport throwErrorInstanceOf from \"./throwErrorInstanceOf\";\r\nimport throwErrorNumberType from \"./throwErrorNumberType\";\r\nexport { throwError, throwErrorInstanceOf, throwErrorNumberType };\r\n","const getConstructorName = function (target) {\r\n    return `${target.constructor.name}`;\r\n};\r\nexport default getConstructorName;\r\n","const makeUUID = function () {\r\n    let u = '', m = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx', i = 0, rb = Math.random() * 0xffffffff | 0;\r\n    while (i++ < 36) {\r\n        let c = m[i - 1], r = rb & 0xf, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        u += (c == '-' || c == '4') ? c : v.toString(16);\r\n        rb = i % 8 == 0 ? Math.random() * 0xffffffff | 0 : rb >> 4;\r\n    }\r\n    return u;\r\n};\r\nexport default makeUUID;\r\n","import ShaderDefine_ModelUniformStruct from './ShaderDefine_ModelUniformStruct.wgsl'\r\nimport ShaderDefine_SystemAmbientDirectionalLights from './ShaderDefine_SystemAmbientDirectionalLights.wgsl'\r\nimport ShaderDefine_SystemCalcLightFunctions from './ShaderDefine_SystemCalcLightFunctions.wgsl'\r\nimport ShaderDefine_SystemUniforms from './ShaderDefine_SystemUniforms.wgsl'\r\n\r\nconst ShaderDefine = {\r\n\tShaderDefine_SystemUniforms: ShaderDefine_SystemUniforms,\r\n\tShaderDefine_ModelUniformStruct,\r\n\tShaderDefine_SystemAmbientDirectionalLights,\r\n\tShaderDefine_SystemCalcLightFunctions\r\n}\r\nexport default ShaderDefine\r\n","const throwError = function () {\r\n\tconsole.log('------ throwError! ------')\r\n\tthrow new Error(Array.prototype.slice.call(arguments).join(' '))\r\n}\r\nexport default throwError","/**\r\n * 에러 생성\r\n */\r\nimport getConstructorName from \"../getConstructorName\";\r\n\r\nconst throwErrorInstanceOf = function (target, key, wantClassName) {\r\n\tconsole.log('------ throwErrorInstanceOf! ------')\r\n\tthrow Error(`from ${getConstructorName(target)} : ${key}는 ${wantClassName}의 instance 만 허용`)\r\n}\r\nexport default throwErrorInstanceOf","/**\r\n * 에러 생성\r\n */\r\nimport getConstructorName from \"../getConstructorName\";\r\n\r\nconst throwErrorNumberType = function (target, key) {\r\n\tconsole.log('------ throwErrorNumberType! ------')\r\n\tthrow Error(`from ${getConstructorName(target)} : ${key} - Only number type allowed`)\r\n}\r\nexport default throwErrorNumberType","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\r\n// Configuration Constants\r\nexport var EPSILON = 0.000001;\r\nexport var ARRAY_TYPE = typeof Float32Array !== \"undefined\" ? Float32Array : Array;\r\nexport var RANDOM = Math.random;\r\nexport var ANGLE_ORDER = \"zyx\";\r\n\r\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\r\n\r\nexport function setMatrixArrayType(type) {\r\n\tARRAY_TYPE = type;\r\n}\r\n\r\nvar degree = Math.PI / 180;\r\n\r\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\r\n\r\nexport function toRadian(a) {\r\n\treturn a * degree;\r\n}\r\n\r\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of gl-matrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\treturn Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}\r\n\r\nif (!Math.hypot) Math.hypot = function () {\r\n\tvar y = 0,\r\n\t\ti = arguments.length;\r\n\twhile (i--) {\r\n\t\ty += arguments[i] * arguments[i];\r\n\t}\r\n\treturn Math.sqrt(y);\r\n};","import * as glMatrix from \"./common.js\";\r\nimport * as mat2 from \"./mat2.js\";\r\nimport * as mat2d from \"./mat2d.js\";\r\nimport * as mat3 from \"./mat3.js\";\r\nimport * as mat4 from \"./mat4.js\";\r\nimport * as quat from \"./quat.js\";\r\nimport * as quat2 from \"./quat2.js\";\r\nimport * as vec2 from \"./vec2.js\";\r\nimport * as vec3 from \"./vec3.js\";\r\nimport * as vec4 from \"./vec4.js\";\r\n\r\nexport {glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4};","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\r\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t}\r\n\tout[0] = 1;\r\n\tout[3] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\r\n\r\nexport function fromValues(m00, m01, m10, m11) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m10;\r\n\tout[3] = m11;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function set(out, m00, m01, m10, m11) {\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m10;\r\n\tout[3] = m11;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function transpose(out, a) {\r\n\t// If we are transposing ourselves we can skip a few steps but have to cache\r\n\t// some values\r\n\tif (out === a) {\r\n\t\tvar a1 = a[1];\r\n\t\tout[1] = a[2];\r\n\t\tout[2] = a1;\r\n\t} else {\r\n\t\tout[0] = a[0];\r\n\t\tout[1] = a[2];\r\n\t\tout[2] = a[1];\r\n\t\tout[3] = a[3];\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3]; // Calculate the determinant\r\n\tvar det = a0 * a3 - a2 * a1;\r\n\tif (!det) {\r\n\t\treturn null;\r\n\t}\r\n\tdet = 1.0 / det;\r\n\tout[0] = a3 * det;\r\n\tout[1] = -a1 * det;\r\n\tout[2] = -a2 * det;\r\n\tout[3] = a0 * det;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function adjoint(out, a) {\r\n\t// Caching this value is necessary if out == a\r\n\tvar a0 = a[0];\r\n\tout[0] = a[3];\r\n\tout[1] = -a[1];\r\n\tout[2] = -a[2];\r\n\tout[3] = a0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\n\r\nexport function determinant(a) {\r\n\treturn a[0] * a[3] - a[2] * a[1];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3];\r\n\tout[0] = a0 * b0 + a2 * b1;\r\n\tout[1] = a1 * b0 + a3 * b1;\r\n\tout[2] = a0 * b2 + a2 * b3;\r\n\tout[3] = a1 * b2 + a3 * b3;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function rotate(out, a, rad) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tout[0] = a0 * c + a2 * s;\r\n\tout[1] = a1 * c + a3 * s;\r\n\tout[2] = a0 * -s + a2 * c;\r\n\tout[3] = a1 * -s + a3 * c;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\r\n\r\nexport function scale(out, a, v) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar v0 = v[0],\r\n\t\tv1 = v[1];\r\n\tout[0] = a0 * v0;\r\n\tout[1] = a1 * v0;\r\n\tout[2] = a2 * v1;\r\n\tout[3] = a3 * v1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function fromRotation(out, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tout[0] = c;\r\n\tout[1] = s;\r\n\tout[2] = -s;\r\n\tout[3] = c;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function fromScaling(out, v) {\r\n\tout[0] = v[0];\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = v[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {ReadonlyMat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"mat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\n\r\nexport function frob(a) {\r\n\treturn Math.hypot(a[0], a[1], a[2], a[3]);\r\n}\r\n\r\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {ReadonlyMat2} L the lower triangular matrix\r\n * @param {ReadonlyMat2} D the diagonal matrix\r\n * @param {ReadonlyMat2} U the upper triangular matrix\r\n * @param {ReadonlyMat2} a the input matrix to factorize\r\n */\r\n\r\nexport function LDU(L, D, U, a) {\r\n\tL[2] = a[2] / a[0];\r\n\tU[0] = a[0];\r\n\tU[1] = a[1];\r\n\tU[3] = a[3] - L[2] * U[1];\r\n\treturn [L, D, U];\r\n}\r\n\r\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\tout[3] = a[3] - b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function multiplyScalar(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\r\n\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\tout[3] = a[3] + b[3] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, b,\r\n *  c, d,\r\n *  tx, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, b, 0,\r\n *  c, d, 0,\r\n *  tx, ty, 1]\r\n * </pre>\r\n * The last column is ignored so the array is shorter and operations are faster.\r\n */\r\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(6);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t\tout[4] = 0;\r\n\t\tout[5] = 0;\r\n\t}\r\n\tout[0] = 1;\r\n\tout[3] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(6);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\tout[4] = 0;\r\n\tout[5] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\r\n\r\nexport function fromValues(a, b, c, d, tx, ty) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(6);\r\n\tout[0] = a;\r\n\tout[1] = b;\r\n\tout[2] = c;\r\n\tout[3] = d;\r\n\tout[4] = tx;\r\n\tout[5] = ty;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function set(out, a, b, c, d, tx, ty) {\r\n\tout[0] = a;\r\n\tout[1] = b;\r\n\tout[2] = c;\r\n\tout[3] = d;\r\n\tout[4] = tx;\r\n\tout[5] = ty;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar aa = a[0],\r\n\t\tab = a[1],\r\n\t\tac = a[2],\r\n\t\tad = a[3];\r\n\tvar atx = a[4],\r\n\t\taty = a[5];\r\n\tvar det = aa * ad - ab * ac;\r\n\tif (!det) {\r\n\t\treturn null;\r\n\t}\r\n\tdet = 1.0 / det;\r\n\tout[0] = ad * det;\r\n\tout[1] = -ab * det;\r\n\tout[2] = -ac * det;\r\n\tout[3] = aa * det;\r\n\tout[4] = (ac * aty - ad * atx) * det;\r\n\tout[5] = (ab * atx - aa * aty) * det;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\n\r\nexport function determinant(a) {\r\n\treturn a[0] * a[3] - a[1] * a[2];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3],\r\n\t\tb4 = b[4],\r\n\t\tb5 = b[5];\r\n\tout[0] = a0 * b0 + a2 * b1;\r\n\tout[1] = a1 * b0 + a3 * b1;\r\n\tout[2] = a0 * b2 + a2 * b3;\r\n\tout[3] = a1 * b2 + a3 * b3;\r\n\tout[4] = a0 * b4 + a2 * b5 + a4;\r\n\tout[5] = a1 * b4 + a3 * b5 + a5;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function rotate(out, a, rad) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5];\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tout[0] = a0 * c + a2 * s;\r\n\tout[1] = a1 * c + a3 * s;\r\n\tout[2] = a0 * -s + a2 * c;\r\n\tout[3] = a1 * -s + a3 * c;\r\n\tout[4] = a4;\r\n\tout[5] = a5;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\r\n\r\nexport function scale(out, a, v) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5];\r\n\tvar v0 = v[0],\r\n\t\tv1 = v[1];\r\n\tout[0] = a0 * v0;\r\n\tout[1] = a1 * v0;\r\n\tout[2] = a2 * v1;\r\n\tout[3] = a3 * v1;\r\n\tout[4] = a4;\r\n\tout[5] = a5;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\r\n\r\nexport function translate(out, a, v) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5];\r\n\tvar v0 = v[0],\r\n\t\tv1 = v[1];\r\n\tout[0] = a0;\r\n\tout[1] = a1;\r\n\tout[2] = a2;\r\n\tout[3] = a3;\r\n\tout[4] = a0 * v0 + a2 * v1 + a4;\r\n\tout[5] = a1 * v0 + a3 * v1 + a5;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function fromRotation(out, rad) {\r\n\tvar s = Math.sin(rad),\r\n\t\tc = Math.cos(rad);\r\n\tout[0] = c;\r\n\tout[1] = s;\r\n\tout[2] = -s;\r\n\tout[3] = c;\r\n\tout[4] = 0;\r\n\tout[5] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function fromScaling(out, v) {\r\n\tout[0] = v[0];\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = v[1];\r\n\tout[4] = 0;\r\n\tout[5] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function fromTranslation(out, v) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\tout[4] = v[0];\r\n\tout[5] = v[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"mat2d(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \")\";\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\n\r\nexport function frob(a) {\r\n\treturn Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\r\n}\r\n\r\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\tout[4] = a[4] + b[4];\r\n\tout[5] = a[5] + b[5];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\tout[3] = a[3] - b[3];\r\n\tout[4] = a[4] - b[4];\r\n\tout[5] = a[5] - b[5];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function multiplyScalar(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\tout[4] = a[4] * b;\r\n\tout[5] = a[5] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\r\n\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\tout[3] = a[3] + b[3] * scale;\r\n\tout[4] = a[4] + b[4] * scale;\r\n\tout[5] = a[5] + b[5] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3],\r\n\t\tb4 = b[4],\r\n\t\tb5 = b[5];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\r\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(9);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t\tout[3] = 0;\r\n\t\tout[5] = 0;\r\n\t\tout[6] = 0;\r\n\t\tout[7] = 0;\r\n\t}\r\n\tout[0] = 1;\r\n\tout[4] = 1;\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function fromMat4(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[4];\r\n\tout[4] = a[5];\r\n\tout[5] = a[6];\r\n\tout[6] = a[8];\r\n\tout[7] = a[9];\r\n\tout[8] = a[10];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(9);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\tout[8] = a[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\tout[8] = a[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\r\n\r\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(9);\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m02;\r\n\tout[3] = m10;\r\n\tout[4] = m11;\r\n\tout[5] = m12;\r\n\tout[6] = m20;\r\n\tout[7] = m21;\r\n\tout[8] = m22;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m02;\r\n\tout[3] = m10;\r\n\tout[4] = m11;\r\n\tout[5] = m12;\r\n\tout[6] = m20;\r\n\tout[7] = m21;\r\n\tout[8] = m22;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 1;\r\n\tout[5] = 0;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function transpose(out, a) {\r\n\t// If we are transposing ourselves we can skip a few steps but have to cache some values\r\n\tif (out === a) {\r\n\t\tvar a01 = a[1],\r\n\t\t\ta02 = a[2],\r\n\t\t\ta12 = a[5];\r\n\t\tout[1] = a[3];\r\n\t\tout[2] = a[6];\r\n\t\tout[3] = a01;\r\n\t\tout[5] = a[7];\r\n\t\tout[6] = a02;\r\n\t\tout[7] = a12;\r\n\t} else {\r\n\t\tout[0] = a[0];\r\n\t\tout[1] = a[3];\r\n\t\tout[2] = a[6];\r\n\t\tout[3] = a[1];\r\n\t\tout[4] = a[4];\r\n\t\tout[5] = a[7];\r\n\t\tout[6] = a[2];\r\n\t\tout[7] = a[5];\r\n\t\tout[8] = a[8];\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2];\r\n\tvar a10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5];\r\n\tvar a20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8];\r\n\tvar b01 = a22 * a11 - a12 * a21;\r\n\tvar b11 = -a22 * a10 + a12 * a20;\r\n\tvar b21 = a21 * a10 - a11 * a20; // Calculate the determinant\r\n\tvar det = a00 * b01 + a01 * b11 + a02 * b21;\r\n\tif (!det) {\r\n\t\treturn null;\r\n\t}\r\n\tdet = 1.0 / det;\r\n\tout[0] = b01 * det;\r\n\tout[1] = (-a22 * a01 + a02 * a21) * det;\r\n\tout[2] = (a12 * a01 - a02 * a11) * det;\r\n\tout[3] = b11 * det;\r\n\tout[4] = (a22 * a00 - a02 * a20) * det;\r\n\tout[5] = (-a12 * a00 + a02 * a10) * det;\r\n\tout[6] = b21 * det;\r\n\tout[7] = (-a21 * a00 + a01 * a20) * det;\r\n\tout[8] = (a11 * a00 - a01 * a10) * det;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function adjoint(out, a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2];\r\n\tvar a10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5];\r\n\tvar a20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8];\r\n\tout[0] = a11 * a22 - a12 * a21;\r\n\tout[1] = a02 * a21 - a01 * a22;\r\n\tout[2] = a01 * a12 - a02 * a11;\r\n\tout[3] = a12 * a20 - a10 * a22;\r\n\tout[4] = a00 * a22 - a02 * a20;\r\n\tout[5] = a02 * a10 - a00 * a12;\r\n\tout[6] = a10 * a21 - a11 * a20;\r\n\tout[7] = a01 * a20 - a00 * a21;\r\n\tout[8] = a00 * a11 - a01 * a10;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\n\r\nexport function determinant(a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2];\r\n\tvar a10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5];\r\n\tvar a20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8];\r\n\treturn a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\r\n}\r\n\r\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2];\r\n\tvar a10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5];\r\n\tvar a20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8];\r\n\tvar b00 = b[0],\r\n\t\tb01 = b[1],\r\n\t\tb02 = b[2];\r\n\tvar b10 = b[3],\r\n\t\tb11 = b[4],\r\n\t\tb12 = b[5];\r\n\tvar b20 = b[6],\r\n\t\tb21 = b[7],\r\n\t\tb22 = b[8];\r\n\tout[0] = b00 * a00 + b01 * a10 + b02 * a20;\r\n\tout[1] = b00 * a01 + b01 * a11 + b02 * a21;\r\n\tout[2] = b00 * a02 + b01 * a12 + b02 * a22;\r\n\tout[3] = b10 * a00 + b11 * a10 + b12 * a20;\r\n\tout[4] = b10 * a01 + b11 * a11 + b12 * a21;\r\n\tout[5] = b10 * a02 + b11 * a12 + b12 * a22;\r\n\tout[6] = b20 * a00 + b21 * a10 + b22 * a20;\r\n\tout[7] = b20 * a01 + b21 * a11 + b22 * a21;\r\n\tout[8] = b20 * a02 + b21 * a12 + b22 * a22;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function translate(out, a, v) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5],\r\n\t\ta20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8],\r\n\t\tx = v[0],\r\n\t\ty = v[1];\r\n\tout[0] = a00;\r\n\tout[1] = a01;\r\n\tout[2] = a02;\r\n\tout[3] = a10;\r\n\tout[4] = a11;\r\n\tout[5] = a12;\r\n\tout[6] = x * a00 + y * a10 + a20;\r\n\tout[7] = x * a01 + y * a11 + a21;\r\n\tout[8] = x * a02 + y * a12 + a22;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function rotate(out, a, rad) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta10 = a[3],\r\n\t\ta11 = a[4],\r\n\t\ta12 = a[5],\r\n\t\ta20 = a[6],\r\n\t\ta21 = a[7],\r\n\t\ta22 = a[8],\r\n\t\ts = Math.sin(rad),\r\n\t\tc = Math.cos(rad);\r\n\tout[0] = c * a00 + s * a10;\r\n\tout[1] = c * a01 + s * a11;\r\n\tout[2] = c * a02 + s * a12;\r\n\tout[3] = c * a10 - s * a00;\r\n\tout[4] = c * a11 - s * a01;\r\n\tout[5] = c * a12 - s * a02;\r\n\tout[6] = a20;\r\n\tout[7] = a21;\r\n\tout[8] = a22;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\r\n\r\nexport function scale(out, a, v) {\r\n\tvar x = v[0],\r\n\t\ty = v[1];\r\n\tout[0] = x * a[0];\r\n\tout[1] = x * a[1];\r\n\tout[2] = x * a[2];\r\n\tout[3] = y * a[3];\r\n\tout[4] = y * a[4];\r\n\tout[5] = y * a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\tout[8] = a[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function fromTranslation(out, v) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 1;\r\n\tout[5] = 0;\r\n\tout[6] = v[0];\r\n\tout[7] = v[1];\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function fromRotation(out, rad) {\r\n\tvar s = Math.sin(rad),\r\n\t\tc = Math.cos(rad);\r\n\tout[0] = c;\r\n\tout[1] = s;\r\n\tout[2] = 0;\r\n\tout[3] = -s;\r\n\tout[4] = c;\r\n\tout[5] = 0;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function fromScaling(out, v) {\r\n\tout[0] = v[0];\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = v[1];\r\n\tout[5] = 0;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\r\n\r\nexport function fromMat2d(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = 0;\r\n\tout[3] = a[2];\r\n\tout[4] = a[3];\r\n\tout[5] = 0;\r\n\tout[6] = a[4];\r\n\tout[7] = a[5];\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function fromQuat(out, q) {\r\n\tvar x = q[0],\r\n\t\ty = q[1],\r\n\t\tz = q[2],\r\n\t\tw = q[3];\r\n\tvar x2 = x + x;\r\n\tvar y2 = y + y;\r\n\tvar z2 = z + z;\r\n\tvar xx = x * x2;\r\n\tvar yx = y * x2;\r\n\tvar yy = y * y2;\r\n\tvar zx = z * x2;\r\n\tvar zy = z * y2;\r\n\tvar zz = z * z2;\r\n\tvar wx = w * x2;\r\n\tvar wy = w * y2;\r\n\tvar wz = w * z2;\r\n\tout[0] = 1 - yy - zz;\r\n\tout[3] = yx - wz;\r\n\tout[6] = zx + wy;\r\n\tout[1] = yx + wz;\r\n\tout[4] = 1 - xx - zz;\r\n\tout[7] = zy - wx;\r\n\tout[2] = zx - wy;\r\n\tout[5] = zy + wx;\r\n\tout[8] = 1 - xx - yy;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function normalFromMat4(out, a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta03 = a[3];\r\n\tvar a10 = a[4],\r\n\t\ta11 = a[5],\r\n\t\ta12 = a[6],\r\n\t\ta13 = a[7];\r\n\tvar a20 = a[8],\r\n\t\ta21 = a[9],\r\n\t\ta22 = a[10],\r\n\t\ta23 = a[11];\r\n\tvar a30 = a[12],\r\n\t\ta31 = a[13],\r\n\t\ta32 = a[14],\r\n\t\ta33 = a[15];\r\n\tvar b00 = a00 * a11 - a01 * a10;\r\n\tvar b01 = a00 * a12 - a02 * a10;\r\n\tvar b02 = a00 * a13 - a03 * a10;\r\n\tvar b03 = a01 * a12 - a02 * a11;\r\n\tvar b04 = a01 * a13 - a03 * a11;\r\n\tvar b05 = a02 * a13 - a03 * a12;\r\n\tvar b06 = a20 * a31 - a21 * a30;\r\n\tvar b07 = a20 * a32 - a22 * a30;\r\n\tvar b08 = a20 * a33 - a23 * a30;\r\n\tvar b09 = a21 * a32 - a22 * a31;\r\n\tvar b10 = a21 * a33 - a23 * a31;\r\n\tvar b11 = a22 * a33 - a23 * a32; // Calculate the determinant\r\n\tvar det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\tif (!det) {\r\n\t\treturn null;\r\n\t}\r\n\tdet = 1.0 / det;\r\n\tout[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n\tout[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n\tout[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\tout[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n\tout[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n\tout[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\tout[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n\tout[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n\tout[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function projection(out, width, height) {\r\n\tout[0] = 2 / width;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = -2 / height;\r\n\tout[5] = 0;\r\n\tout[6] = -1;\r\n\tout[7] = 1;\r\n\tout[8] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\n\r\nexport function frob(a) {\r\n\treturn Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\r\n}\r\n\r\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\tout[4] = a[4] + b[4];\r\n\tout[5] = a[5] + b[5];\r\n\tout[6] = a[6] + b[6];\r\n\tout[7] = a[7] + b[7];\r\n\tout[8] = a[8] + b[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\tout[3] = a[3] - b[3];\r\n\tout[4] = a[4] - b[4];\r\n\tout[5] = a[5] - b[5];\r\n\tout[6] = a[6] - b[6];\r\n\tout[7] = a[7] - b[7];\r\n\tout[8] = a[8] - b[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function multiplyScalar(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\tout[4] = a[4] * b;\r\n\tout[5] = a[5] * b;\r\n\tout[6] = a[6] * b;\r\n\tout[7] = a[7] * b;\r\n\tout[8] = a[8] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\r\n\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\tout[3] = a[3] + b[3] * scale;\r\n\tout[4] = a[4] + b[4] * scale;\r\n\tout[5] = a[5] + b[5] * scale;\r\n\tout[6] = a[6] + b[6] * scale;\r\n\tout[7] = a[7] + b[7] * scale;\r\n\tout[8] = a[8] + b[8] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5],\r\n\t\ta6 = a[6],\r\n\t\ta7 = a[7],\r\n\t\ta8 = a[8];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3],\r\n\t\tb4 = b[4],\r\n\t\tb5 = b[5],\r\n\t\tb6 = b[6],\r\n\t\tb7 = b[7],\r\n\t\tb8 = b[8];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\r\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(16);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t\tout[3] = 0;\r\n\t\tout[4] = 0;\r\n\t\tout[6] = 0;\r\n\t\tout[7] = 0;\r\n\t\tout[8] = 0;\r\n\t\tout[9] = 0;\r\n\t\tout[11] = 0;\r\n\t\tout[12] = 0;\r\n\t\tout[13] = 0;\r\n\t\tout[14] = 0;\r\n\t}\r\n\tout[0] = 1;\r\n\tout[5] = 1;\r\n\tout[10] = 1;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(16);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\tout[8] = a[8];\r\n\tout[9] = a[9];\r\n\tout[10] = a[10];\r\n\tout[11] = a[11];\r\n\tout[12] = a[12];\r\n\tout[13] = a[13];\r\n\tout[14] = a[14];\r\n\tout[15] = a[15];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\tout[8] = a[8];\r\n\tout[9] = a[9];\r\n\tout[10] = a[10];\r\n\tout[11] = a[11];\r\n\tout[12] = a[12];\r\n\tout[13] = a[13];\r\n\tout[14] = a[14];\r\n\tout[15] = a[15];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\r\n\r\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(16);\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m02;\r\n\tout[3] = m03;\r\n\tout[4] = m10;\r\n\tout[5] = m11;\r\n\tout[6] = m12;\r\n\tout[7] = m13;\r\n\tout[8] = m20;\r\n\tout[9] = m21;\r\n\tout[10] = m22;\r\n\tout[11] = m23;\r\n\tout[12] = m30;\r\n\tout[13] = m31;\r\n\tout[14] = m32;\r\n\tout[15] = m33;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n\tout[0] = m00;\r\n\tout[1] = m01;\r\n\tout[2] = m02;\r\n\tout[3] = m03;\r\n\tout[4] = m10;\r\n\tout[5] = m11;\r\n\tout[6] = m12;\r\n\tout[7] = m13;\r\n\tout[8] = m20;\r\n\tout[9] = m21;\r\n\tout[10] = m22;\r\n\tout[11] = m23;\r\n\tout[12] = m30;\r\n\tout[13] = m31;\r\n\tout[14] = m32;\r\n\tout[15] = m33;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = 1;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = 1;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function transpose(out, a) {\r\n\t// If we are transposing ourselves we can skip a few steps but have to cache some values\r\n\tif (out === a) {\r\n\t\tvar a01 = a[1],\r\n\t\t\ta02 = a[2],\r\n\t\t\ta03 = a[3];\r\n\t\tvar a12 = a[6],\r\n\t\t\ta13 = a[7];\r\n\t\tvar a23 = a[11];\r\n\t\tout[1] = a[4];\r\n\t\tout[2] = a[8];\r\n\t\tout[3] = a[12];\r\n\t\tout[4] = a01;\r\n\t\tout[6] = a[9];\r\n\t\tout[7] = a[13];\r\n\t\tout[8] = a02;\r\n\t\tout[9] = a12;\r\n\t\tout[11] = a[14];\r\n\t\tout[12] = a03;\r\n\t\tout[13] = a13;\r\n\t\tout[14] = a23;\r\n\t} else {\r\n\t\tout[0] = a[0];\r\n\t\tout[1] = a[4];\r\n\t\tout[2] = a[8];\r\n\t\tout[3] = a[12];\r\n\t\tout[4] = a[1];\r\n\t\tout[5] = a[5];\r\n\t\tout[6] = a[9];\r\n\t\tout[7] = a[13];\r\n\t\tout[8] = a[2];\r\n\t\tout[9] = a[6];\r\n\t\tout[10] = a[10];\r\n\t\tout[11] = a[14];\r\n\t\tout[12] = a[3];\r\n\t\tout[13] = a[7];\r\n\t\tout[14] = a[11];\r\n\t\tout[15] = a[15];\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta03 = a[3];\r\n\tvar a10 = a[4],\r\n\t\ta11 = a[5],\r\n\t\ta12 = a[6],\r\n\t\ta13 = a[7];\r\n\tvar a20 = a[8],\r\n\t\ta21 = a[9],\r\n\t\ta22 = a[10],\r\n\t\ta23 = a[11];\r\n\tvar a30 = a[12],\r\n\t\ta31 = a[13],\r\n\t\ta32 = a[14],\r\n\t\ta33 = a[15];\r\n\tvar b00 = a00 * a11 - a01 * a10;\r\n\tvar b01 = a00 * a12 - a02 * a10;\r\n\tvar b02 = a00 * a13 - a03 * a10;\r\n\tvar b03 = a01 * a12 - a02 * a11;\r\n\tvar b04 = a01 * a13 - a03 * a11;\r\n\tvar b05 = a02 * a13 - a03 * a12;\r\n\tvar b06 = a20 * a31 - a21 * a30;\r\n\tvar b07 = a20 * a32 - a22 * a30;\r\n\tvar b08 = a20 * a33 - a23 * a30;\r\n\tvar b09 = a21 * a32 - a22 * a31;\r\n\tvar b10 = a21 * a33 - a23 * a31;\r\n\tvar b11 = a22 * a33 - a23 * a32; // Calculate the determinant\r\n\tvar det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\tif (!det) {\r\n\t\treturn null;\r\n\t}\r\n\tdet = 1.0 / det;\r\n\tout[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n\tout[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n\tout[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n\tout[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n\tout[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n\tout[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n\tout[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n\tout[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n\tout[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\tout[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\tout[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n\tout[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n\tout[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n\tout[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n\tout[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n\tout[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function adjoint(out, a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta03 = a[3];\r\n\tvar a10 = a[4],\r\n\t\ta11 = a[5],\r\n\t\ta12 = a[6],\r\n\t\ta13 = a[7];\r\n\tvar a20 = a[8],\r\n\t\ta21 = a[9],\r\n\t\ta22 = a[10],\r\n\t\ta23 = a[11];\r\n\tvar a30 = a[12],\r\n\t\ta31 = a[13],\r\n\t\ta32 = a[14],\r\n\t\ta33 = a[15];\r\n\tvar b00 = a00 * a11 - a01 * a10;\r\n\tvar b01 = a00 * a12 - a02 * a10;\r\n\tvar b02 = a00 * a13 - a03 * a10;\r\n\tvar b03 = a01 * a12 - a02 * a11;\r\n\tvar b04 = a01 * a13 - a03 * a11;\r\n\tvar b05 = a02 * a13 - a03 * a12;\r\n\tvar b06 = a20 * a31 - a21 * a30;\r\n\tvar b07 = a20 * a32 - a22 * a30;\r\n\tvar b08 = a20 * a33 - a23 * a30;\r\n\tvar b09 = a21 * a32 - a22 * a31;\r\n\tvar b10 = a21 * a33 - a23 * a31;\r\n\tvar b11 = a22 * a33 - a23 * a32;\r\n\tout[0] = a11 * b11 - a12 * b10 + a13 * b09;\r\n\tout[1] = a02 * b10 - a01 * b11 - a03 * b09;\r\n\tout[2] = a31 * b05 - a32 * b04 + a33 * b03;\r\n\tout[3] = a22 * b04 - a21 * b05 - a23 * b03;\r\n\tout[4] = a12 * b08 - a10 * b11 - a13 * b07;\r\n\tout[5] = a00 * b11 - a02 * b08 + a03 * b07;\r\n\tout[6] = a32 * b02 - a30 * b05 - a33 * b01;\r\n\tout[7] = a20 * b05 - a22 * b02 + a23 * b01;\r\n\tout[8] = a10 * b10 - a11 * b08 + a13 * b06;\r\n\tout[9] = a01 * b08 - a00 * b10 - a03 * b06;\r\n\tout[10] = a30 * b04 - a31 * b02 + a33 * b00;\r\n\tout[11] = a21 * b02 - a20 * b04 - a23 * b00;\r\n\tout[12] = a11 * b07 - a10 * b09 - a12 * b06;\r\n\tout[13] = a00 * b09 - a01 * b07 + a02 * b06;\r\n\tout[14] = a31 * b01 - a30 * b03 - a32 * b00;\r\n\tout[15] = a20 * b03 - a21 * b01 + a22 * b00;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\n\r\nexport function determinant(a) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta03 = a[3];\r\n\tvar a10 = a[4],\r\n\t\ta11 = a[5],\r\n\t\ta12 = a[6],\r\n\t\ta13 = a[7];\r\n\tvar a20 = a[8],\r\n\t\ta21 = a[9],\r\n\t\ta22 = a[10],\r\n\t\ta23 = a[11];\r\n\tvar a30 = a[12],\r\n\t\ta31 = a[13],\r\n\t\ta32 = a[14],\r\n\t\ta33 = a[15];\r\n\tvar b0 = a00 * a11 - a01 * a10;\r\n\tvar b1 = a00 * a12 - a02 * a10;\r\n\tvar b2 = a01 * a12 - a02 * a11;\r\n\tvar b3 = a20 * a31 - a21 * a30;\r\n\tvar b4 = a20 * a32 - a22 * a30;\r\n\tvar b5 = a21 * a32 - a22 * a31;\r\n\tvar b6 = a00 * b5 - a01 * b4 + a02 * b3;\r\n\tvar b7 = a10 * b5 - a11 * b4 + a12 * b3;\r\n\tvar b8 = a20 * b2 - a21 * b1 + a22 * b0;\r\n\tvar b9 = a30 * b2 - a31 * b1 + a32 * b0; // Calculate the determinant\r\n\treturn a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\r\n}\r\n\r\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar a00 = a[0],\r\n\t\ta01 = a[1],\r\n\t\ta02 = a[2],\r\n\t\ta03 = a[3];\r\n\tvar a10 = a[4],\r\n\t\ta11 = a[5],\r\n\t\ta12 = a[6],\r\n\t\ta13 = a[7];\r\n\tvar a20 = a[8],\r\n\t\ta21 = a[9],\r\n\t\ta22 = a[10],\r\n\t\ta23 = a[11];\r\n\tvar a30 = a[12],\r\n\t\ta31 = a[13],\r\n\t\ta32 = a[14],\r\n\t\ta33 = a[15]; // Cache only the current line of the second matrix\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3];\r\n\tout[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n\tout[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n\tout[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n\tout[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\tb0 = b[4];\r\n\tb1 = b[5];\r\n\tb2 = b[6];\r\n\tb3 = b[7];\r\n\tout[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n\tout[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n\tout[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n\tout[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\tb0 = b[8];\r\n\tb1 = b[9];\r\n\tb2 = b[10];\r\n\tb3 = b[11];\r\n\tout[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n\tout[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n\tout[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n\tout[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\tb0 = b[12];\r\n\tb1 = b[13];\r\n\tb2 = b[14];\r\n\tb3 = b[15];\r\n\tout[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n\tout[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n\tout[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n\tout[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function translate(out, a, v) {\r\n\tvar x = v[0],\r\n\t\ty = v[1],\r\n\t\tz = v[2];\r\n\tvar a00, a01, a02, a03;\r\n\tvar a10, a11, a12, a13;\r\n\tvar a20, a21, a22, a23;\r\n\tif (a === out) {\r\n\t\tout[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\r\n\t\tout[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\r\n\t\tout[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\r\n\t\tout[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\r\n\t} else {\r\n\t\ta00 = a[0];\r\n\t\ta01 = a[1];\r\n\t\ta02 = a[2];\r\n\t\ta03 = a[3];\r\n\t\ta10 = a[4];\r\n\t\ta11 = a[5];\r\n\t\ta12 = a[6];\r\n\t\ta13 = a[7];\r\n\t\ta20 = a[8];\r\n\t\ta21 = a[9];\r\n\t\ta22 = a[10];\r\n\t\ta23 = a[11];\r\n\t\tout[0] = a00;\r\n\t\tout[1] = a01;\r\n\t\tout[2] = a02;\r\n\t\tout[3] = a03;\r\n\t\tout[4] = a10;\r\n\t\tout[5] = a11;\r\n\t\tout[6] = a12;\r\n\t\tout[7] = a13;\r\n\t\tout[8] = a20;\r\n\t\tout[9] = a21;\r\n\t\tout[10] = a22;\r\n\t\tout[11] = a23;\r\n\t\tout[12] = a00 * x + a10 * y + a20 * z + a[12];\r\n\t\tout[13] = a01 * x + a11 * y + a21 * z + a[13];\r\n\t\tout[14] = a02 * x + a12 * y + a22 * z + a[14];\r\n\t\tout[15] = a03 * x + a13 * y + a23 * z + a[15];\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\n\r\nexport function scale(out, a, v) {\r\n\tvar x = v[0],\r\n\t\ty = v[1],\r\n\t\tz = v[2];\r\n\tout[0] = a[0] * x;\r\n\tout[1] = a[1] * x;\r\n\tout[2] = a[2] * x;\r\n\tout[3] = a[3] * x;\r\n\tout[4] = a[4] * y;\r\n\tout[5] = a[5] * y;\r\n\tout[6] = a[6] * y;\r\n\tout[7] = a[7] * y;\r\n\tout[8] = a[8] * z;\r\n\tout[9] = a[9] * z;\r\n\tout[10] = a[10] * z;\r\n\tout[11] = a[11] * z;\r\n\tout[12] = a[12];\r\n\tout[13] = a[13];\r\n\tout[14] = a[14];\r\n\tout[15] = a[15];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function rotate(out, a, rad, axis) {\r\n\tvar x = axis[0],\r\n\t\ty = axis[1],\r\n\t\tz = axis[2];\r\n\tvar len = Math.hypot(x, y, z);\r\n\tvar s, c, t;\r\n\tvar a00, a01, a02, a03;\r\n\tvar a10, a11, a12, a13;\r\n\tvar a20, a21, a22, a23;\r\n\tvar b00, b01, b02;\r\n\tvar b10, b11, b12;\r\n\tvar b20, b21, b22;\r\n\tif (len < glMatrix.EPSILON) {\r\n\t\treturn null;\r\n\t}\r\n\tlen = 1 / len;\r\n\tx *= len;\r\n\ty *= len;\r\n\tz *= len;\r\n\ts = Math.sin(rad);\r\n\tc = Math.cos(rad);\r\n\tt = 1 - c;\r\n\ta00 = a[0];\r\n\ta01 = a[1];\r\n\ta02 = a[2];\r\n\ta03 = a[3];\r\n\ta10 = a[4];\r\n\ta11 = a[5];\r\n\ta12 = a[6];\r\n\ta13 = a[7];\r\n\ta20 = a[8];\r\n\ta21 = a[9];\r\n\ta22 = a[10];\r\n\ta23 = a[11]; // Construct the elements of the rotation matrix\r\n\tb00 = x * x * t + c;\r\n\tb01 = y * x * t + z * s;\r\n\tb02 = z * x * t - y * s;\r\n\tb10 = x * y * t - z * s;\r\n\tb11 = y * y * t + c;\r\n\tb12 = z * y * t + x * s;\r\n\tb20 = x * z * t + y * s;\r\n\tb21 = y * z * t - x * s;\r\n\tb22 = z * z * t + c; // Perform rotation-specific matrix multiplication\r\n\tout[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n\tout[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n\tout[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n\tout[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n\tout[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n\tout[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n\tout[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n\tout[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n\tout[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n\tout[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n\tout[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n\tout[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n\tif (a !== out) {\r\n\t\t// If the source and destination differ, copy the unchanged last row\r\n\t\tout[12] = a[12];\r\n\t\tout[13] = a[13];\r\n\t\tout[14] = a[14];\r\n\t\tout[15] = a[15];\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function rotateX(out, a, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tvar a10 = a[4];\r\n\tvar a11 = a[5];\r\n\tvar a12 = a[6];\r\n\tvar a13 = a[7];\r\n\tvar a20 = a[8];\r\n\tvar a21 = a[9];\r\n\tvar a22 = a[10];\r\n\tvar a23 = a[11];\r\n\tif (a !== out) {\r\n\t\t// If the source and destination differ, copy the unchanged rows\r\n\t\tout[0] = a[0];\r\n\t\tout[1] = a[1];\r\n\t\tout[2] = a[2];\r\n\t\tout[3] = a[3];\r\n\t\tout[12] = a[12];\r\n\t\tout[13] = a[13];\r\n\t\tout[14] = a[14];\r\n\t\tout[15] = a[15];\r\n\t} // Perform axis-specific matrix multiplication\r\n\tout[4] = a10 * c + a20 * s;\r\n\tout[5] = a11 * c + a21 * s;\r\n\tout[6] = a12 * c + a22 * s;\r\n\tout[7] = a13 * c + a23 * s;\r\n\tout[8] = a20 * c - a10 * s;\r\n\tout[9] = a21 * c - a11 * s;\r\n\tout[10] = a22 * c - a12 * s;\r\n\tout[11] = a23 * c - a13 * s;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function rotateY(out, a, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tvar a00 = a[0];\r\n\tvar a01 = a[1];\r\n\tvar a02 = a[2];\r\n\tvar a03 = a[3];\r\n\tvar a20 = a[8];\r\n\tvar a21 = a[9];\r\n\tvar a22 = a[10];\r\n\tvar a23 = a[11];\r\n\tif (a !== out) {\r\n\t\t// If the source and destination differ, copy the unchanged rows\r\n\t\tout[4] = a[4];\r\n\t\tout[5] = a[5];\r\n\t\tout[6] = a[6];\r\n\t\tout[7] = a[7];\r\n\t\tout[12] = a[12];\r\n\t\tout[13] = a[13];\r\n\t\tout[14] = a[14];\r\n\t\tout[15] = a[15];\r\n\t} // Perform axis-specific matrix multiplication\r\n\tout[0] = a00 * c - a20 * s;\r\n\tout[1] = a01 * c - a21 * s;\r\n\tout[2] = a02 * c - a22 * s;\r\n\tout[3] = a03 * c - a23 * s;\r\n\tout[8] = a00 * s + a20 * c;\r\n\tout[9] = a01 * s + a21 * c;\r\n\tout[10] = a02 * s + a22 * c;\r\n\tout[11] = a03 * s + a23 * c;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function rotateZ(out, a, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad);\r\n\tvar a00 = a[0];\r\n\tvar a01 = a[1];\r\n\tvar a02 = a[2];\r\n\tvar a03 = a[3];\r\n\tvar a10 = a[4];\r\n\tvar a11 = a[5];\r\n\tvar a12 = a[6];\r\n\tvar a13 = a[7];\r\n\tif (a !== out) {\r\n\t\t// If the source and destination differ, copy the unchanged last row\r\n\t\tout[8] = a[8];\r\n\t\tout[9] = a[9];\r\n\t\tout[10] = a[10];\r\n\t\tout[11] = a[11];\r\n\t\tout[12] = a[12];\r\n\t\tout[13] = a[13];\r\n\t\tout[14] = a[14];\r\n\t\tout[15] = a[15];\r\n\t} // Perform axis-specific matrix multiplication\r\n\tout[0] = a00 * c + a10 * s;\r\n\tout[1] = a01 * c + a11 * s;\r\n\tout[2] = a02 * c + a12 * s;\r\n\tout[3] = a03 * c + a13 * s;\r\n\tout[4] = a10 * c - a00 * s;\r\n\tout[5] = a11 * c - a01 * s;\r\n\tout[6] = a12 * c - a02 * s;\r\n\tout[7] = a13 * c - a03 * s;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromTranslation(out, v) {\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = 1;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = 1;\r\n\tout[11] = 0;\r\n\tout[12] = v[0];\r\n\tout[13] = v[1];\r\n\tout[14] = v[2];\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromScaling(out, v) {\r\n\tout[0] = v[0];\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = v[1];\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = v[2];\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromRotation(out, rad, axis) {\r\n\tvar x = axis[0],\r\n\t\ty = axis[1],\r\n\t\tz = axis[2];\r\n\tvar len = Math.hypot(x, y, z);\r\n\tvar s, c, t;\r\n\tif (len < glMatrix.EPSILON) {\r\n\t\treturn null;\r\n\t}\r\n\tlen = 1 / len;\r\n\tx *= len;\r\n\ty *= len;\r\n\tz *= len;\r\n\ts = Math.sin(rad);\r\n\tc = Math.cos(rad);\r\n\tt = 1 - c; // Perform rotation-specific matrix multiplication\r\n\tout[0] = x * x * t + c;\r\n\tout[1] = y * x * t + z * s;\r\n\tout[2] = z * x * t - y * s;\r\n\tout[3] = 0;\r\n\tout[4] = x * y * t - z * s;\r\n\tout[5] = y * y * t + c;\r\n\tout[6] = z * y * t + x * s;\r\n\tout[7] = 0;\r\n\tout[8] = x * z * t + y * s;\r\n\tout[9] = y * z * t - x * s;\r\n\tout[10] = z * z * t + c;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromXRotation(out, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad); // Perform axis-specific matrix multiplication\r\n\tout[0] = 1;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = c;\r\n\tout[6] = s;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = -s;\r\n\tout[10] = c;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromYRotation(out, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad); // Perform axis-specific matrix multiplication\r\n\tout[0] = c;\r\n\tout[1] = 0;\r\n\tout[2] = -s;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = 1;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = s;\r\n\tout[9] = 0;\r\n\tout[10] = c;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromZRotation(out, rad) {\r\n\tvar s = Math.sin(rad);\r\n\tvar c = Math.cos(rad); // Perform axis-specific matrix multiplication\r\n\tout[0] = c;\r\n\tout[1] = s;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = -s;\r\n\tout[5] = c;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = 1;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromRotationTranslation(out, q, v) {\r\n\t// Quaternion math\r\n\tvar x = q[0],\r\n\t\ty = q[1],\r\n\t\tz = q[2],\r\n\t\tw = q[3];\r\n\tvar x2 = x + x;\r\n\tvar y2 = y + y;\r\n\tvar z2 = z + z;\r\n\tvar xx = x * x2;\r\n\tvar xy = x * y2;\r\n\tvar xz = x * z2;\r\n\tvar yy = y * y2;\r\n\tvar yz = y * z2;\r\n\tvar zz = z * z2;\r\n\tvar wx = w * x2;\r\n\tvar wy = w * y2;\r\n\tvar wz = w * z2;\r\n\tout[0] = 1 - (yy + zz);\r\n\tout[1] = xy + wz;\r\n\tout[2] = xz - wy;\r\n\tout[3] = 0;\r\n\tout[4] = xy - wz;\r\n\tout[5] = 1 - (xx + zz);\r\n\tout[6] = yz + wx;\r\n\tout[7] = 0;\r\n\tout[8] = xz + wy;\r\n\tout[9] = yz - wx;\r\n\tout[10] = 1 - (xx + yy);\r\n\tout[11] = 0;\r\n\tout[12] = v[0];\r\n\tout[13] = v[1];\r\n\tout[14] = v[2];\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\r\n\r\nexport function fromQuat2(out, a) {\r\n\tvar translation = new glMatrix.ARRAY_TYPE(3);\r\n\tvar bx = -a[0],\r\n\t\tby = -a[1],\r\n\t\tbz = -a[2],\r\n\t\tbw = a[3],\r\n\t\tax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7];\r\n\tvar magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\r\n\tif (magnitude > 0) {\r\n\t\ttranslation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\r\n\t\ttranslation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\r\n\t\ttranslation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\r\n\t} else {\r\n\t\ttranslation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n\t\ttranslation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n\t\ttranslation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n\t}\r\n\tfromRotationTranslation(out, a, translation);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\n\r\nexport function getTranslation(out, mat) {\r\n\tout[0] = mat[12];\r\n\tout[1] = mat[13];\r\n\tout[2] = mat[14];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\n\r\nexport function getScaling(out, mat) {\r\n\tvar m11 = mat[0];\r\n\tvar m12 = mat[1];\r\n\tvar m13 = mat[2];\r\n\tvar m21 = mat[4];\r\n\tvar m22 = mat[5];\r\n\tvar m23 = mat[6];\r\n\tvar m31 = mat[8];\r\n\tvar m32 = mat[9];\r\n\tvar m33 = mat[10];\r\n\tout[0] = Math.hypot(m11, m12, m13);\r\n\tout[1] = Math.hypot(m21, m22, m23);\r\n\tout[2] = Math.hypot(m31, m32, m33);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\r\n\r\nexport function getRotation(out, mat) {\r\n\tvar scaling = new glMatrix.ARRAY_TYPE(3);\r\n\tgetScaling(scaling, mat);\r\n\tvar is1 = 1 / scaling[0];\r\n\tvar is2 = 1 / scaling[1];\r\n\tvar is3 = 1 / scaling[2];\r\n\tvar sm11 = mat[0] * is1;\r\n\tvar sm12 = mat[1] * is2;\r\n\tvar sm13 = mat[2] * is3;\r\n\tvar sm21 = mat[4] * is1;\r\n\tvar sm22 = mat[5] * is2;\r\n\tvar sm23 = mat[6] * is3;\r\n\tvar sm31 = mat[8] * is1;\r\n\tvar sm32 = mat[9] * is2;\r\n\tvar sm33 = mat[10] * is3;\r\n\tvar trace = sm11 + sm22 + sm33;\r\n\tvar S = 0;\r\n\tif (trace > 0) {\r\n\t\tS = Math.sqrt(trace + 1.0) * 2;\r\n\t\tout[3] = 0.25 * S;\r\n\t\tout[0] = (sm23 - sm32) / S;\r\n\t\tout[1] = (sm31 - sm13) / S;\r\n\t\tout[2] = (sm12 - sm21) / S;\r\n\t} else if (sm11 > sm22 && sm11 > sm33) {\r\n\t\tS = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\r\n\t\tout[3] = (sm23 - sm32) / S;\r\n\t\tout[0] = 0.25 * S;\r\n\t\tout[1] = (sm12 + sm21) / S;\r\n\t\tout[2] = (sm31 + sm13) / S;\r\n\t} else if (sm22 > sm33) {\r\n\t\tS = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\r\n\t\tout[3] = (sm31 - sm13) / S;\r\n\t\tout[0] = (sm12 + sm21) / S;\r\n\t\tout[1] = 0.25 * S;\r\n\t\tout[2] = (sm23 + sm32) / S;\r\n\t} else {\r\n\t\tS = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\r\n\t\tout[3] = (sm12 - sm21) / S;\r\n\t\tout[0] = (sm31 + sm13) / S;\r\n\t\tout[1] = (sm23 + sm32) / S;\r\n\t\tout[2] = 0.25 * S;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Decomposes a transformation matrix into its rotation, translation\r\n * and scale components. Returns only the rotation component\r\n * @param  {quat} out_r Quaternion to receive the rotation component\r\n * @param  {vec3} out_t Vector to receive the translation vector\r\n * @param  {vec3} out_s Vector to receive the scaling factor\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @returns {quat} out_r\r\n */\r\n\r\nexport function decompose(out_r, out_t, out_s, mat) {\r\n\tout_t[0] = mat[12];\r\n\tout_t[1] = mat[13];\r\n\tout_t[2] = mat[14];\r\n\tvar m11 = mat[0];\r\n\tvar m12 = mat[1];\r\n\tvar m13 = mat[2];\r\n\tvar m21 = mat[4];\r\n\tvar m22 = mat[5];\r\n\tvar m23 = mat[6];\r\n\tvar m31 = mat[8];\r\n\tvar m32 = mat[9];\r\n\tvar m33 = mat[10];\r\n\tout_s[0] = Math.hypot(m11, m12, m13);\r\n\tout_s[1] = Math.hypot(m21, m22, m23);\r\n\tout_s[2] = Math.hypot(m31, m32, m33);\r\n\tvar is1 = 1 / out_s[0];\r\n\tvar is2 = 1 / out_s[1];\r\n\tvar is3 = 1 / out_s[2];\r\n\tvar sm11 = m11 * is1;\r\n\tvar sm12 = m12 * is2;\r\n\tvar sm13 = m13 * is3;\r\n\tvar sm21 = m21 * is1;\r\n\tvar sm22 = m22 * is2;\r\n\tvar sm23 = m23 * is3;\r\n\tvar sm31 = m31 * is1;\r\n\tvar sm32 = m32 * is2;\r\n\tvar sm33 = m33 * is3;\r\n\tvar trace = sm11 + sm22 + sm33;\r\n\tvar S = 0;\r\n\tif (trace > 0) {\r\n\t\tS = Math.sqrt(trace + 1.0) * 2;\r\n\t\tout_r[3] = 0.25 * S;\r\n\t\tout_r[0] = (sm23 - sm32) / S;\r\n\t\tout_r[1] = (sm31 - sm13) / S;\r\n\t\tout_r[2] = (sm12 - sm21) / S;\r\n\t} else if (sm11 > sm22 && sm11 > sm33) {\r\n\t\tS = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\r\n\t\tout_r[3] = (sm23 - sm32) / S;\r\n\t\tout_r[0] = 0.25 * S;\r\n\t\tout_r[1] = (sm12 + sm21) / S;\r\n\t\tout_r[2] = (sm31 + sm13) / S;\r\n\t} else if (sm22 > sm33) {\r\n\t\tS = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\r\n\t\tout_r[3] = (sm31 - sm13) / S;\r\n\t\tout_r[0] = (sm12 + sm21) / S;\r\n\t\tout_r[1] = 0.25 * S;\r\n\t\tout_r[2] = (sm23 + sm32) / S;\r\n\t} else {\r\n\t\tS = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\r\n\t\tout_r[3] = (sm12 - sm21) / S;\r\n\t\tout_r[0] = (sm31 + sm13) / S;\r\n\t\tout_r[1] = (sm23 + sm32) / S;\r\n\t\tout_r[2] = 0.25 * S;\r\n\t}\r\n\treturn out_r;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromRotationTranslationScale(out, q, v, s) {\r\n\t// Quaternion math\r\n\tvar x = q[0],\r\n\t\ty = q[1],\r\n\t\tz = q[2],\r\n\t\tw = q[3];\r\n\tvar x2 = x + x;\r\n\tvar y2 = y + y;\r\n\tvar z2 = z + z;\r\n\tvar xx = x * x2;\r\n\tvar xy = x * y2;\r\n\tvar xz = x * z2;\r\n\tvar yy = y * y2;\r\n\tvar yz = y * z2;\r\n\tvar zz = z * z2;\r\n\tvar wx = w * x2;\r\n\tvar wy = w * y2;\r\n\tvar wz = w * z2;\r\n\tvar sx = s[0];\r\n\tvar sy = s[1];\r\n\tvar sz = s[2];\r\n\tout[0] = (1 - (yy + zz)) * sx;\r\n\tout[1] = (xy + wz) * sx;\r\n\tout[2] = (xz - wy) * sx;\r\n\tout[3] = 0;\r\n\tout[4] = (xy - wz) * sy;\r\n\tout[5] = (1 - (xx + zz)) * sy;\r\n\tout[6] = (yz + wx) * sy;\r\n\tout[7] = 0;\r\n\tout[8] = (xz + wy) * sz;\r\n\tout[9] = (yz - wx) * sz;\r\n\tout[10] = (1 - (xx + yy)) * sz;\r\n\tout[11] = 0;\r\n\tout[12] = v[0];\r\n\tout[13] = v[1];\r\n\tout[14] = v[2];\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\r\n\t// Quaternion math\r\n\tvar x = q[0],\r\n\t\ty = q[1],\r\n\t\tz = q[2],\r\n\t\tw = q[3];\r\n\tvar x2 = x + x;\r\n\tvar y2 = y + y;\r\n\tvar z2 = z + z;\r\n\tvar xx = x * x2;\r\n\tvar xy = x * y2;\r\n\tvar xz = x * z2;\r\n\tvar yy = y * y2;\r\n\tvar yz = y * z2;\r\n\tvar zz = z * z2;\r\n\tvar wx = w * x2;\r\n\tvar wy = w * y2;\r\n\tvar wz = w * z2;\r\n\tvar sx = s[0];\r\n\tvar sy = s[1];\r\n\tvar sz = s[2];\r\n\tvar ox = o[0];\r\n\tvar oy = o[1];\r\n\tvar oz = o[2];\r\n\tvar out0 = (1 - (yy + zz)) * sx;\r\n\tvar out1 = (xy + wz) * sx;\r\n\tvar out2 = (xz - wy) * sx;\r\n\tvar out4 = (xy - wz) * sy;\r\n\tvar out5 = (1 - (xx + zz)) * sy;\r\n\tvar out6 = (yz + wx) * sy;\r\n\tvar out8 = (xz + wy) * sz;\r\n\tvar out9 = (yz - wx) * sz;\r\n\tvar out10 = (1 - (xx + yy)) * sz;\r\n\tout[0] = out0;\r\n\tout[1] = out1;\r\n\tout[2] = out2;\r\n\tout[3] = 0;\r\n\tout[4] = out4;\r\n\tout[5] = out5;\r\n\tout[6] = out6;\r\n\tout[7] = 0;\r\n\tout[8] = out8;\r\n\tout[9] = out9;\r\n\tout[10] = out10;\r\n\tout[11] = 0;\r\n\tout[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\r\n\tout[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\r\n\tout[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function fromQuat(out, q) {\r\n\tvar x = q[0],\r\n\t\ty = q[1],\r\n\t\tz = q[2],\r\n\t\tw = q[3];\r\n\tvar x2 = x + x;\r\n\tvar y2 = y + y;\r\n\tvar z2 = z + z;\r\n\tvar xx = x * x2;\r\n\tvar yx = y * x2;\r\n\tvar yy = y * y2;\r\n\tvar zx = z * x2;\r\n\tvar zy = z * y2;\r\n\tvar zz = z * z2;\r\n\tvar wx = w * x2;\r\n\tvar wy = w * y2;\r\n\tvar wz = w * z2;\r\n\tout[0] = 1 - yy - zz;\r\n\tout[1] = yx + wz;\r\n\tout[2] = zx - wy;\r\n\tout[3] = 0;\r\n\tout[4] = yx - wz;\r\n\tout[5] = 1 - xx - zz;\r\n\tout[6] = zy + wx;\r\n\tout[7] = 0;\r\n\tout[8] = zx + wy;\r\n\tout[9] = zy - wx;\r\n\tout[10] = 1 - xx - yy;\r\n\tout[11] = 0;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = 0;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function frustum(out, left, right, bottom, top, near, far) {\r\n\tvar rl = 1 / (right - left);\r\n\tvar tb = 1 / (top - bottom);\r\n\tvar nf = 1 / (near - far);\r\n\tout[0] = near * 2 * rl;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = near * 2 * tb;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = (right + left) * rl;\r\n\tout[9] = (top + bottom) * tb;\r\n\tout[10] = (far + near) * nf;\r\n\tout[11] = -1;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[14] = far * near * 2 * nf;\r\n\tout[15] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\r\n * which matches WebGL/OpenGL's clip volume.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function perspectiveNO(out, fovy, aspect, near, far) {\r\n\tvar f = 1.0 / Math.tan(fovy / 2);\r\n\tout[0] = f / aspect;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = f;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[11] = -1;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[15] = 0;\r\n\tif (far != null && far !== Infinity) {\r\n\t\tvar nf = 1 / (near - far);\r\n\t\tout[10] = (far + near) * nf;\r\n\t\tout[14] = 2 * far * near * nf;\r\n\t} else {\r\n\t\tout[10] = -1;\r\n\t\tout[14] = -2 * near;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.perspectiveNO}\r\n * @function\r\n */\r\n\r\nexport var perspective = perspectiveNO;\r\n\r\n/**\r\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\r\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\r\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function perspectiveZO(out, fovy, aspect, near, far) {\r\n\tvar f = 1.0 / Math.tan(fovy / 2);\r\n\tout[0] = f / aspect;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = f;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[11] = -1;\r\n\tout[12] = 0;\r\n\tout[13] = 0;\r\n\tout[15] = 0;\r\n\tif (far != null && far !== Infinity) {\r\n\t\tvar nf = 1 / (near - far);\r\n\t\tout[10] = far * nf;\r\n\t\tout[14] = far * near * nf;\r\n\t} else {\r\n\t\tout[10] = -1;\r\n\t\tout[14] = -near;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\r\n\tvar upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\r\n\tvar downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\r\n\tvar leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\r\n\tvar rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\r\n\tvar xScale = 2.0 / (leftTan + rightTan);\r\n\tvar yScale = 2.0 / (upTan + downTan);\r\n\tout[0] = xScale;\r\n\tout[1] = 0.0;\r\n\tout[2] = 0.0;\r\n\tout[3] = 0.0;\r\n\tout[4] = 0.0;\r\n\tout[5] = yScale;\r\n\tout[6] = 0.0;\r\n\tout[7] = 0.0;\r\n\tout[8] = -((leftTan - rightTan) * xScale * 0.5);\r\n\tout[9] = (upTan - downTan) * yScale * 0.5;\r\n\tout[10] = far / (near - far);\r\n\tout[11] = -1.0;\r\n\tout[12] = 0.0;\r\n\tout[13] = 0.0;\r\n\tout[14] = far * near / (near - far);\r\n\tout[15] = 0.0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds.\r\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\r\n * which matches WebGL/OpenGL's clip volume.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function orthoNO(out, left, right, bottom, top, near, far) {\r\n\tvar lr = 1 / (left - right);\r\n\tvar bt = 1 / (bottom - top);\r\n\tvar nf = 1 / (near - far);\r\n\tout[0] = -2 * lr;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = -2 * bt;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = 2 * nf;\r\n\tout[11] = 0;\r\n\tout[12] = (left + right) * lr;\r\n\tout[13] = (top + bottom) * bt;\r\n\tout[14] = (far + near) * nf;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.orthoNO}\r\n * @function\r\n */\r\n\r\nexport var ortho = orthoNO;\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds.\r\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\r\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function orthoZO(out, left, right, bottom, top, near, far) {\r\n\tvar lr = 1 / (left - right);\r\n\tvar bt = 1 / (bottom - top);\r\n\tvar nf = 1 / (near - far);\r\n\tout[0] = -2 * lr;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 0;\r\n\tout[4] = 0;\r\n\tout[5] = -2 * bt;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\tout[8] = 0;\r\n\tout[9] = 0;\r\n\tout[10] = nf;\r\n\tout[11] = 0;\r\n\tout[12] = (left + right) * lr;\r\n\tout[13] = (top + bottom) * bt;\r\n\tout[14] = near * nf;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function lookAt(out, eye, center, up) {\r\n\tvar x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\r\n\tvar eyex = eye[0];\r\n\tvar eyey = eye[1];\r\n\tvar eyez = eye[2];\r\n\tvar upx = up[0];\r\n\tvar upy = up[1];\r\n\tvar upz = up[2];\r\n\tvar centerx = center[0];\r\n\tvar centery = center[1];\r\n\tvar centerz = center[2];\r\n\tif (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\r\n\t\treturn identity(out);\r\n\t}\r\n\tz0 = eyex - centerx;\r\n\tz1 = eyey - centery;\r\n\tz2 = eyez - centerz;\r\n\tlen = 1 / Math.hypot(z0, z1, z2);\r\n\tz0 *= len;\r\n\tz1 *= len;\r\n\tz2 *= len;\r\n\tx0 = upy * z2 - upz * z1;\r\n\tx1 = upz * z0 - upx * z2;\r\n\tx2 = upx * z1 - upy * z0;\r\n\tlen = Math.hypot(x0, x1, x2);\r\n\tif (!len) {\r\n\t\tx0 = 0;\r\n\t\tx1 = 0;\r\n\t\tx2 = 0;\r\n\t} else {\r\n\t\tlen = 1 / len;\r\n\t\tx0 *= len;\r\n\t\tx1 *= len;\r\n\t\tx2 *= len;\r\n\t}\r\n\ty0 = z1 * x2 - z2 * x1;\r\n\ty1 = z2 * x0 - z0 * x2;\r\n\ty2 = z0 * x1 - z1 * x0;\r\n\tlen = Math.hypot(y0, y1, y2);\r\n\tif (!len) {\r\n\t\ty0 = 0;\r\n\t\ty1 = 0;\r\n\t\ty2 = 0;\r\n\t} else {\r\n\t\tlen = 1 / len;\r\n\t\ty0 *= len;\r\n\t\ty1 *= len;\r\n\t\ty2 *= len;\r\n\t}\r\n\tout[0] = x0;\r\n\tout[1] = y0;\r\n\tout[2] = z0;\r\n\tout[3] = 0;\r\n\tout[4] = x1;\r\n\tout[5] = y1;\r\n\tout[6] = z1;\r\n\tout[7] = 0;\r\n\tout[8] = x2;\r\n\tout[9] = y2;\r\n\tout[10] = z2;\r\n\tout[11] = 0;\r\n\tout[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\r\n\tout[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\r\n\tout[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function targetTo(out, eye, target, up) {\r\n\tvar eyex = eye[0],\r\n\t\teyey = eye[1],\r\n\t\teyez = eye[2],\r\n\t\tupx = up[0],\r\n\t\tupy = up[1],\r\n\t\tupz = up[2];\r\n\tvar z0 = eyex - target[0],\r\n\t\tz1 = eyey - target[1],\r\n\t\tz2 = eyez - target[2];\r\n\tvar len = z0 * z0 + z1 * z1 + z2 * z2;\r\n\tif (len > 0) {\r\n\t\tlen = 1 / Math.sqrt(len);\r\n\t\tz0 *= len;\r\n\t\tz1 *= len;\r\n\t\tz2 *= len;\r\n\t}\r\n\tvar x0 = upy * z2 - upz * z1,\r\n\t\tx1 = upz * z0 - upx * z2,\r\n\t\tx2 = upx * z1 - upy * z0;\r\n\tlen = x0 * x0 + x1 * x1 + x2 * x2;\r\n\tif (len > 0) {\r\n\t\tlen = 1 / Math.sqrt(len);\r\n\t\tx0 *= len;\r\n\t\tx1 *= len;\r\n\t\tx2 *= len;\r\n\t}\r\n\tout[0] = x0;\r\n\tout[1] = x1;\r\n\tout[2] = x2;\r\n\tout[3] = 0;\r\n\tout[4] = z1 * x2 - z2 * x1;\r\n\tout[5] = z2 * x0 - z0 * x2;\r\n\tout[6] = z0 * x1 - z1 * x0;\r\n\tout[7] = 0;\r\n\tout[8] = z0;\r\n\tout[9] = z1;\r\n\tout[10] = z2;\r\n\tout[11] = 0;\r\n\tout[12] = eyex;\r\n\tout[13] = eyey;\r\n\tout[14] = eyez;\r\n\tout[15] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\n\r\nexport function frob(a) {\r\n\treturn Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\r\n}\r\n\r\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\tout[4] = a[4] + b[4];\r\n\tout[5] = a[5] + b[5];\r\n\tout[6] = a[6] + b[6];\r\n\tout[7] = a[7] + b[7];\r\n\tout[8] = a[8] + b[8];\r\n\tout[9] = a[9] + b[9];\r\n\tout[10] = a[10] + b[10];\r\n\tout[11] = a[11] + b[11];\r\n\tout[12] = a[12] + b[12];\r\n\tout[13] = a[13] + b[13];\r\n\tout[14] = a[14] + b[14];\r\n\tout[15] = a[15] + b[15];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\tout[3] = a[3] - b[3];\r\n\tout[4] = a[4] - b[4];\r\n\tout[5] = a[5] - b[5];\r\n\tout[6] = a[6] - b[6];\r\n\tout[7] = a[7] - b[7];\r\n\tout[8] = a[8] - b[8];\r\n\tout[9] = a[9] - b[9];\r\n\tout[10] = a[10] - b[10];\r\n\tout[11] = a[11] - b[11];\r\n\tout[12] = a[12] - b[12];\r\n\tout[13] = a[13] - b[13];\r\n\tout[14] = a[14] - b[14];\r\n\tout[15] = a[15] - b[15];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function multiplyScalar(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\tout[4] = a[4] * b;\r\n\tout[5] = a[5] * b;\r\n\tout[6] = a[6] * b;\r\n\tout[7] = a[7] * b;\r\n\tout[8] = a[8] * b;\r\n\tout[9] = a[9] * b;\r\n\tout[10] = a[10] * b;\r\n\tout[11] = a[11] * b;\r\n\tout[12] = a[12] * b;\r\n\tout[13] = a[13] * b;\r\n\tout[14] = a[14] * b;\r\n\tout[15] = a[15] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\r\n\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\tout[3] = a[3] + b[3] * scale;\r\n\tout[4] = a[4] + b[4] * scale;\r\n\tout[5] = a[5] + b[5] * scale;\r\n\tout[6] = a[6] + b[6] * scale;\r\n\tout[7] = a[7] + b[7] * scale;\r\n\tout[8] = a[8] + b[8] * scale;\r\n\tout[9] = a[9] + b[9] * scale;\r\n\tout[10] = a[10] + b[10] * scale;\r\n\tout[11] = a[11] + b[11] * scale;\r\n\tout[12] = a[12] + b[12] * scale;\r\n\tout[13] = a[13] + b[13] * scale;\r\n\tout[14] = a[14] + b[14] * scale;\r\n\tout[15] = a[15] + b[15] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar a4 = a[4],\r\n\t\ta5 = a[5],\r\n\t\ta6 = a[6],\r\n\t\ta7 = a[7];\r\n\tvar a8 = a[8],\r\n\t\ta9 = a[9],\r\n\t\ta10 = a[10],\r\n\t\ta11 = a[11];\r\n\tvar a12 = a[12],\r\n\t\ta13 = a[13],\r\n\t\ta14 = a[14],\r\n\t\ta15 = a[15];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3];\r\n\tvar b4 = b[4],\r\n\t\tb5 = b[5],\r\n\t\tb6 = b[6],\r\n\t\tb7 = b[7];\r\n\tvar b8 = b[8],\r\n\t\tb9 = b[9],\r\n\t\tb10 = b[10],\r\n\t\tb11 = b[11];\r\n\tvar b12 = b[12],\r\n\t\tb13 = b[13],\r\n\t\tb14 = b[14],\r\n\t\tb15 = b[15];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\nimport * as mat3 from \"./mat3.js\";\r\nimport * as vec3 from \"./vec3.js\";\r\nimport * as vec4 from \"./vec4.js\";\r\n\r\n/**\r\n * Quaternion in the format XYZW\r\n * @module quat\r\n */\r\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[0] = 0;\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t}\r\n\tout[3] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 0;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyVec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\r\n\r\nexport function setAxisAngle(out, axis, rad) {\r\n\trad = rad * 0.5;\r\n\tvar s = Math.sin(rad);\r\n\tout[0] = s * axis[0];\r\n\tout[1] = s * axis[1];\r\n\tout[2] = s * axis[2];\r\n\tout[3] = Math.cos(rad);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\r\n\r\nexport function getAxisAngle(out_axis, q) {\r\n\tvar rad = Math.acos(q[3]) * 2.0;\r\n\tvar s = Math.sin(rad / 2.0);\r\n\tif (s > glMatrix.EPSILON) {\r\n\t\tout_axis[0] = q[0] / s;\r\n\t\tout_axis[1] = q[1] / s;\r\n\t\tout_axis[2] = q[2] / s;\r\n\t} else {\r\n\t\t// If s is zero, return any axis (no rotation - axis does not matter)\r\n\t\tout_axis[0] = 1;\r\n\t\tout_axis[1] = 0;\r\n\t\tout_axis[2] = 0;\r\n\t}\r\n\treturn rad;\r\n}\r\n\r\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {ReadonlyQuat} a     Origin unit quaternion\r\n * @param  {ReadonlyQuat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\r\n\r\nexport function getAngle(a, b) {\r\n\tvar dotproduct = dot(a, b);\r\n\treturn Math.acos(2 * dotproduct * dotproduct - 1);\r\n}\r\n\r\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tvar bx = b[0],\r\n\t\tby = b[1],\r\n\t\tbz = b[2],\r\n\t\tbw = b[3];\r\n\tout[0] = ax * bw + aw * bx + ay * bz - az * by;\r\n\tout[1] = ay * bw + aw * by + az * bx - ax * bz;\r\n\tout[2] = az * bw + aw * bz + ax * by - ay * bx;\r\n\tout[3] = aw * bw - ax * bx - ay * by - az * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\n\r\nexport function rotateX(out, a, rad) {\r\n\trad *= 0.5;\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tvar bx = Math.sin(rad),\r\n\t\tbw = Math.cos(rad);\r\n\tout[0] = ax * bw + aw * bx;\r\n\tout[1] = ay * bw + az * bx;\r\n\tout[2] = az * bw - ay * bx;\r\n\tout[3] = aw * bw - ax * bx;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\n\r\nexport function rotateY(out, a, rad) {\r\n\trad *= 0.5;\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tvar by = Math.sin(rad),\r\n\t\tbw = Math.cos(rad);\r\n\tout[0] = ax * bw - az * by;\r\n\tout[1] = ay * bw + aw * by;\r\n\tout[2] = az * bw + ax * by;\r\n\tout[3] = aw * bw - ay * by;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\n\r\nexport function rotateZ(out, a, rad) {\r\n\trad *= 0.5;\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tvar bz = Math.sin(rad),\r\n\t\tbw = Math.cos(rad);\r\n\tout[0] = ax * bw + ay * bz;\r\n\tout[1] = ay * bw - ax * bz;\r\n\tout[2] = az * bw + aw * bz;\r\n\tout[3] = aw * bw - az * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\r\n\r\nexport function calculateW(out, a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2];\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\tout[2] = z;\r\n\tout[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\r\n\r\nexport function exp(out, a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2],\r\n\t\tw = a[3];\r\n\tvar r = Math.sqrt(x * x + y * y + z * z);\r\n\tvar et = Math.exp(w);\r\n\tvar s = r > 0 ? et * Math.sin(r) / r : 0;\r\n\tout[0] = x * s;\r\n\tout[1] = y * s;\r\n\tout[2] = z * s;\r\n\tout[3] = et * Math.cos(r);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\r\n\r\nexport function ln(out, a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2],\r\n\t\tw = a[3];\r\n\tvar r = Math.sqrt(x * x + y * y + z * z);\r\n\tvar t = r > 0 ? Math.atan2(r, w) / r : 0;\r\n\tout[0] = x * t;\r\n\tout[1] = y * t;\r\n\tout[2] = z * t;\r\n\tout[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\r\n\r\nexport function pow(out, a, b) {\r\n\tln(out, a);\r\n\tscale(out, out, b);\r\n\texp(out, out);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\n\r\nexport function slerp(out, a, b, t) {\r\n\t// benchmarks:\r\n\t//    http://jsperf.com/quaternion-slerp-implementations\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tvar bx = b[0],\r\n\t\tby = b[1],\r\n\t\tbz = b[2],\r\n\t\tbw = b[3];\r\n\tvar omega, cosom, sinom, scale0, scale1; // calc cosine\r\n\tcosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\r\n\tif (cosom < 0.0) {\r\n\t\tcosom = -cosom;\r\n\t\tbx = -bx;\r\n\t\tby = -by;\r\n\t\tbz = -bz;\r\n\t\tbw = -bw;\r\n\t} // calculate coefficients\r\n\tif (1.0 - cosom > glMatrix.EPSILON) {\r\n\t\t// standard case (slerp)\r\n\t\tomega = Math.acos(cosom);\r\n\t\tsinom = Math.sin(omega);\r\n\t\tscale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n\t\tscale1 = Math.sin(t * omega) / sinom;\r\n\t} else {\r\n\t\t// \"from\" and \"to\" quaternions are very close\r\n\t\t//  ... so we can do a linear interpolation\r\n\t\tscale0 = 1.0 - t;\r\n\t\tscale1 = t;\r\n\t} // calculate final values\r\n\tout[0] = scale0 * ax + scale1 * bx;\r\n\tout[1] = scale0 * ay + scale1 * by;\r\n\tout[2] = scale0 * az + scale1 * bz;\r\n\tout[3] = scale0 * aw + scale1 * bw;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a random unit quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\n\r\nexport function random(out) {\r\n\t// Implementation of http://planning.cs.uiuc.edu/node198.html\r\n\t// TODO: Calling random 3 times is probably not the fastest solution\r\n\tvar u1 = glMatrix.RANDOM();\r\n\tvar u2 = glMatrix.RANDOM();\r\n\tvar u3 = glMatrix.RANDOM();\r\n\tvar sqrt1MinusU1 = Math.sqrt(1 - u1);\r\n\tvar sqrtU1 = Math.sqrt(u1);\r\n\tout[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\r\n\tout[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\r\n\tout[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\r\n\tout[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\r\n\tvar invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\r\n\tout[0] = -a0 * invDot;\r\n\tout[1] = -a1 * invDot;\r\n\tout[2] = -a2 * invDot;\r\n\tout[3] = a3 * invDot;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\r\n\r\nexport function conjugate(out, a) {\r\n\tout[0] = -a[0];\r\n\tout[1] = -a[1];\r\n\tout[2] = -a[2];\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyMat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport function fromMat3(out, m) {\r\n\t// Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\r\n\t// article \"Quaternion Calculus and Fast Animation\".\r\n\tvar fTrace = m[0] + m[4] + m[8];\r\n\tvar fRoot;\r\n\tif (fTrace > 0.0) {\r\n\t\t// |w| > 1/2, may as well choose w > 1/2\r\n\t\tfRoot = Math.sqrt(fTrace + 1.0); // 2w\r\n\t\tout[3] = 0.5 * fRoot;\r\n\t\tfRoot = 0.5 / fRoot; // 1/(4w)\r\n\t\tout[0] = (m[5] - m[7]) * fRoot;\r\n\t\tout[1] = (m[6] - m[2]) * fRoot;\r\n\t\tout[2] = (m[1] - m[3]) * fRoot;\r\n\t} else {\r\n\t\t// |w| <= 1/2\r\n\t\tvar i = 0;\r\n\t\tif (m[4] > m[0]) i = 1;\r\n\t\tif (m[8] > m[i * 3 + i]) i = 2;\r\n\t\tvar j = (i + 1) % 3;\r\n\t\tvar k = (i + 2) % 3;\r\n\t\tfRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\r\n\t\tout[i] = 0.5 * fRoot;\r\n\t\tfRoot = 0.5 / fRoot;\r\n\t\tout[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\r\n\t\tout[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\r\n\t\tout[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given euler angle x, y, z using the provided intrinsic order for the conversion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} x Angle to rotate around X axis in degrees.\r\n * @param {y} y Angle to rotate around Y axis in degrees.\r\n * @param {z} z Angle to rotate around Z axis in degrees.\r\n * @param {'zyx'|'xyz'|'yxz'|'yzx'|'zxy'|'zyx'} order Intrinsic order for conversion, default is zyx.\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport function fromEuler(out, x, y, z) {\r\n\tvar order = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : glMatrix.ANGLE_ORDER;\r\n\tvar halfToRad = Math.PI / 360;\r\n\tx *= halfToRad;\r\n\tz *= halfToRad;\r\n\ty *= halfToRad;\r\n\tvar sx = Math.sin(x);\r\n\tvar cx = Math.cos(x);\r\n\tvar sy = Math.sin(y);\r\n\tvar cy = Math.cos(y);\r\n\tvar sz = Math.sin(z);\r\n\tvar cz = Math.cos(z);\r\n\tswitch (order) {\r\n\t\tcase \"xyz\":\r\n\t\t\tout[0] = sx * cy * cz + cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz - sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz + sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz - sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tcase \"xzy\":\r\n\t\t\tout[0] = sx * cy * cz - cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz - sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz + sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz + sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tcase \"yxz\":\r\n\t\t\tout[0] = sx * cy * cz + cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz - sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz - sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz + sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tcase \"yzx\":\r\n\t\t\tout[0] = sx * cy * cz + cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz + sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz - sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz - sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tcase \"zxy\":\r\n\t\t\tout[0] = sx * cy * cz - cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz + sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz + sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz - sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tcase \"zyx\":\r\n\t\t\tout[0] = sx * cy * cz - cx * sy * sz;\r\n\t\t\tout[1] = cx * sy * cz + sx * cy * sz;\r\n\t\t\tout[2] = cx * cy * sz - sx * sy * cz;\r\n\t\t\tout[3] = cx * cy * cz + sx * sy * sz;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('Unknown angle order ' + order);\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a quaternion\r\n *\r\n * @param {ReadonlyQuat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\n\r\nexport var clone = vec4.clone;\r\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\n\r\nexport var fromValues = vec4.fromValues;\r\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var copy = vec4.copy;\r\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var set = vec4.set;\r\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var add = vec4.add;\r\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {ReadonlyQuat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var scale = vec4.scale;\r\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\n\r\nexport var dot = vec4.dot;\r\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var lerp = vec4.lerp;\r\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\n\r\nexport var length = vec4.length;\r\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\r\n\r\nexport var len = length;\r\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\n\r\nexport var squaredLength = vec4.squaredLength;\r\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\r\n\r\nexport var sqrLen = squaredLength;\r\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\r\n\r\nexport var normalize = vec4.normalize;\r\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat} a The first quaternion.\r\n * @param {ReadonlyQuat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport var exactEquals = vec4.exactEquals;\r\n\r\n/**\r\n * Returns whether or not the quaternions point approximately to the same direction.\r\n *\r\n * Both quaternions are assumed to be unit length.\r\n *\r\n * @param {ReadonlyQuat} a The first unit quaternion.\r\n * @param {ReadonlyQuat} b The second unit quaternion.\r\n * @returns {Boolean} True if the quaternions are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\treturn Math.abs(vec4.dot(a, b)) >= 1 - glMatrix.EPSILON;\r\n}\r\n\r\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {ReadonlyVec3} a the initial vector\r\n * @param {ReadonlyVec3} b the destination vector\r\n * @returns {quat} out\r\n */\r\n\r\nexport var rotationTo = function () {\r\n\tvar tmpvec3 = vec3.create();\r\n\tvar xUnitVec3 = vec3.fromValues(1, 0, 0);\r\n\tvar yUnitVec3 = vec3.fromValues(0, 1, 0);\r\n\treturn function (out, a, b) {\r\n\t\tvar dot = vec3.dot(a, b);\r\n\t\tif (dot < -0.999999) {\r\n\t\t\tvec3.cross(tmpvec3, xUnitVec3, a);\r\n\t\t\tif (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\r\n\t\t\tvec3.normalize(tmpvec3, tmpvec3);\r\n\t\t\tsetAxisAngle(out, tmpvec3, Math.PI);\r\n\t\t\treturn out;\r\n\t\t} else if (dot > 0.999999) {\r\n\t\t\tout[0] = 0;\r\n\t\t\tout[1] = 0;\r\n\t\t\tout[2] = 0;\r\n\t\t\tout[3] = 1;\r\n\t\t\treturn out;\r\n\t\t} else {\r\n\t\t\tvec3.cross(tmpvec3, a, b);\r\n\t\t\tout[0] = tmpvec3[0];\r\n\t\t\tout[1] = tmpvec3[1];\r\n\t\t\tout[2] = tmpvec3[2];\r\n\t\t\tout[3] = 1 + dot;\r\n\t\t\treturn normalize(out, out);\r\n\t\t}\r\n\t};\r\n}();\r\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {ReadonlyQuat} c the third operand\r\n * @param {ReadonlyQuat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\n\r\nexport var sqlerp = function () {\r\n\tvar temp1 = create();\r\n\tvar temp2 = create();\r\n\treturn function (out, a, b, c, d, t) {\r\n\t\tslerp(temp1, a, d, t);\r\n\t\tslerp(temp2, b, c, t);\r\n\t\tslerp(out, temp1, temp2, 2 * t * (1 - t));\r\n\t\treturn out;\r\n\t};\r\n}();\r\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\r\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\r\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\r\n\r\nexport var setAxes = function () {\r\n\tvar matr = mat3.create();\r\n\treturn function (out, view, right, up) {\r\n\t\tmatr[0] = right[0];\r\n\t\tmatr[3] = right[1];\r\n\t\tmatr[6] = right[2];\r\n\t\tmatr[1] = up[0];\r\n\t\tmatr[4] = up[1];\r\n\t\tmatr[7] = up[2];\r\n\t\tmatr[2] = -view[0];\r\n\t\tmatr[5] = -view[1];\r\n\t\tmatr[8] = -view[2];\r\n\t\treturn normalize(out, fromMat3(out, matr));\r\n\t};\r\n}();","import * as glMatrix from \"./common.js\";\r\nimport * as mat4 from \"./mat4.js\";\r\nimport * as quat from \"./quat.js\";\r\n\r\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\r\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\r\n\r\nexport function create() {\r\n\tvar dq = new glMatrix.ARRAY_TYPE(8);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tdq[0] = 0;\r\n\t\tdq[1] = 0;\r\n\t\tdq[2] = 0;\r\n\t\tdq[4] = 0;\r\n\t\tdq[5] = 0;\r\n\t\tdq[6] = 0;\r\n\t\tdq[7] = 0;\r\n\t}\r\n\tdq[3] = 1;\r\n\treturn dq;\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar dq = new glMatrix.ARRAY_TYPE(8);\r\n\tdq[0] = a[0];\r\n\tdq[1] = a[1];\r\n\tdq[2] = a[2];\r\n\tdq[3] = a[3];\r\n\tdq[4] = a[4];\r\n\tdq[5] = a[5];\r\n\tdq[6] = a[6];\r\n\tdq[7] = a[7];\r\n\treturn dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\n\r\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\r\n\tvar dq = new glMatrix.ARRAY_TYPE(8);\r\n\tdq[0] = x1;\r\n\tdq[1] = y1;\r\n\tdq[2] = z1;\r\n\tdq[3] = w1;\r\n\tdq[4] = x2;\r\n\tdq[5] = y2;\r\n\tdq[6] = z2;\r\n\tdq[7] = w2;\r\n\treturn dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\n\r\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\r\n\tvar dq = new glMatrix.ARRAY_TYPE(8);\r\n\tdq[0] = x1;\r\n\tdq[1] = y1;\r\n\tdq[2] = z1;\r\n\tdq[3] = w1;\r\n\tvar ax = x2 * 0.5,\r\n\t\tay = y2 * 0.5,\r\n\t\taz = z2 * 0.5;\r\n\tdq[4] = ax * w1 + ay * z1 - az * y1;\r\n\tdq[5] = ay * w1 + az * x1 - ax * z1;\r\n\tdq[6] = az * w1 + ax * y1 - ay * x1;\r\n\tdq[7] = -ax * x1 - ay * y1 - az * z1;\r\n\treturn dq;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q a normalized quaternion\r\n * @param {ReadonlyVec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\n\r\nexport function fromRotationTranslation(out, q, t) {\r\n\tvar ax = t[0] * 0.5,\r\n\t\tay = t[1] * 0.5,\r\n\t\taz = t[2] * 0.5,\r\n\t\tbx = q[0],\r\n\t\tby = q[1],\r\n\t\tbz = q[2],\r\n\t\tbw = q[3];\r\n\tout[0] = bx;\r\n\tout[1] = by;\r\n\tout[2] = bz;\r\n\tout[3] = bw;\r\n\tout[4] = ax * bw + ay * bz - az * by;\r\n\tout[5] = ay * bw + az * bx - ax * bz;\r\n\tout[6] = az * bw + ax * by - ay * bx;\r\n\tout[7] = -ax * bx - ay * by - az * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyVec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\n\r\nexport function fromTranslation(out, t) {\r\n\tout[0] = 0;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\tout[4] = t[0] * 0.5;\r\n\tout[5] = t[1] * 0.5;\r\n\tout[6] = t[2] * 0.5;\r\n\tout[7] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\n\r\nexport function fromRotation(out, q) {\r\n\tout[0] = q[0];\r\n\tout[1] = q[1];\r\n\tout[2] = q[2];\r\n\tout[3] = q[3];\r\n\tout[4] = 0;\r\n\tout[5] = 0;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {ReadonlyMat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\r\n\r\nexport function fromMat4(out, a) {\r\n\t//TODO Optimize this\r\n\tvar outer = quat.create();\r\n\tmat4.getRotation(outer, a);\r\n\tvar t = new glMatrix.ARRAY_TYPE(3);\r\n\tmat4.getTranslation(t, a);\r\n\tfromRotationTranslation(out, outer, t);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = a[4];\r\n\tout[5] = a[5];\r\n\tout[6] = a[6];\r\n\tout[7] = a[7];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function identity(out) {\r\n\tout[0] = 0;\r\n\tout[1] = 0;\r\n\tout[2] = 0;\r\n\tout[3] = 1;\r\n\tout[4] = 0;\r\n\tout[5] = 0;\r\n\tout[6] = 0;\r\n\tout[7] = 0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\r\n\tout[0] = x1;\r\n\tout[1] = y1;\r\n\tout[2] = z1;\r\n\tout[3] = w1;\r\n\tout[4] = x2;\r\n\tout[5] = y2;\r\n\tout[6] = z2;\r\n\tout[7] = w2;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\r\n\r\nexport var getReal = quat.copy;\r\n\r\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\r\n\r\nexport function getDual(out, a) {\r\n\tout[0] = a[4];\r\n\tout[1] = a[5];\r\n\tout[2] = a[6];\r\n\tout[3] = a[7];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport var setReal = quat.copy;\r\n\r\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function setDual(out, q) {\r\n\tout[4] = q[0];\r\n\tout[5] = q[1];\r\n\tout[6] = q[2];\r\n\tout[7] = q[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\r\n\r\nexport function getTranslation(out, a) {\r\n\tvar ax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7],\r\n\t\tbx = -a[0],\r\n\t\tby = -a[1],\r\n\t\tbz = -a[2],\r\n\t\tbw = a[3];\r\n\tout[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n\tout[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n\tout[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function translate(out, a, v) {\r\n\tvar ax1 = a[0],\r\n\t\tay1 = a[1],\r\n\t\taz1 = a[2],\r\n\t\taw1 = a[3],\r\n\t\tbx1 = v[0] * 0.5,\r\n\t\tby1 = v[1] * 0.5,\r\n\t\tbz1 = v[2] * 0.5,\r\n\t\tax2 = a[4],\r\n\t\tay2 = a[5],\r\n\t\taz2 = a[6],\r\n\t\taw2 = a[7];\r\n\tout[0] = ax1;\r\n\tout[1] = ay1;\r\n\tout[2] = az1;\r\n\tout[3] = aw1;\r\n\tout[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\r\n\tout[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\r\n\tout[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\r\n\tout[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateX(out, a, rad) {\r\n\tvar bx = -a[0],\r\n\t\tby = -a[1],\r\n\t\tbz = -a[2],\r\n\t\tbw = a[3],\r\n\t\tax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7],\r\n\t\tax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n\t\tay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n\t\taz1 = az * bw + aw * bz + ax * by - ay * bx,\r\n\t\taw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n\tquat.rotateX(out, a, rad);\r\n\tbx = out[0];\r\n\tby = out[1];\r\n\tbz = out[2];\r\n\tbw = out[3];\r\n\tout[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n\tout[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n\tout[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n\tout[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateY(out, a, rad) {\r\n\tvar bx = -a[0],\r\n\t\tby = -a[1],\r\n\t\tbz = -a[2],\r\n\t\tbw = a[3],\r\n\t\tax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7],\r\n\t\tax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n\t\tay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n\t\taz1 = az * bw + aw * bz + ax * by - ay * bx,\r\n\t\taw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n\tquat.rotateY(out, a, rad);\r\n\tbx = out[0];\r\n\tby = out[1];\r\n\tbz = out[2];\r\n\tbw = out[3];\r\n\tout[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n\tout[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n\tout[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n\tout[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateZ(out, a, rad) {\r\n\tvar bx = -a[0],\r\n\t\tby = -a[1],\r\n\t\tbz = -a[2],\r\n\t\tbw = a[3],\r\n\t\tax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7],\r\n\t\tax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n\t\tay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n\t\taz1 = az * bw + aw * bz + ax * by - ay * bx,\r\n\t\taw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n\tquat.rotateZ(out, a, rad);\r\n\tbx = out[0];\r\n\tby = out[1];\r\n\tbz = out[2];\r\n\tbw = out[3];\r\n\tout[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n\tout[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n\tout[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n\tout[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateByQuatAppend(out, a, q) {\r\n\tvar qx = q[0],\r\n\t\tqy = q[1],\r\n\t\tqz = q[2],\r\n\t\tqw = q[3],\r\n\t\tax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\taw = a[3];\r\n\tout[0] = ax * qw + aw * qx + ay * qz - az * qy;\r\n\tout[1] = ay * qw + aw * qy + az * qx - ax * qz;\r\n\tout[2] = az * qw + aw * qz + ax * qy - ay * qx;\r\n\tout[3] = aw * qw - ax * qx - ay * qy - az * qz;\r\n\tax = a[4];\r\n\tay = a[5];\r\n\taz = a[6];\r\n\taw = a[7];\r\n\tout[4] = ax * qw + aw * qx + ay * qz - az * qy;\r\n\tout[5] = ay * qw + aw * qy + az * qx - ax * qz;\r\n\tout[6] = az * qw + aw * qz + ax * qy - ay * qx;\r\n\tout[7] = aw * qw - ax * qx - ay * qy - az * qz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateByQuatPrepend(out, q, a) {\r\n\tvar qx = q[0],\r\n\t\tqy = q[1],\r\n\t\tqz = q[2],\r\n\t\tqw = q[3],\r\n\t\tbx = a[0],\r\n\t\tby = a[1],\r\n\t\tbz = a[2],\r\n\t\tbw = a[3];\r\n\tout[0] = qx * bw + qw * bx + qy * bz - qz * by;\r\n\tout[1] = qy * bw + qw * by + qz * bx - qx * bz;\r\n\tout[2] = qz * bw + qw * bz + qx * by - qy * bx;\r\n\tout[3] = qw * bw - qx * bx - qy * by - qz * bz;\r\n\tbx = a[4];\r\n\tby = a[5];\r\n\tbz = a[6];\r\n\tbw = a[7];\r\n\tout[4] = qx * bw + qw * bx + qy * bz - qz * by;\r\n\tout[5] = qy * bw + qw * by + qz * bx - qx * bz;\r\n\tout[6] = qz * bw + qw * bz + qx * by - qy * bx;\r\n\tout[7] = qw * bw - qx * bx - qy * by - qz * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function rotateAroundAxis(out, a, axis, rad) {\r\n\t//Special case for rad = 0\r\n\tif (Math.abs(rad) < glMatrix.EPSILON) {\r\n\t\treturn copy(out, a);\r\n\t}\r\n\tvar axisLength = Math.hypot(axis[0], axis[1], axis[2]);\r\n\trad = rad * 0.5;\r\n\tvar s = Math.sin(rad);\r\n\tvar bx = s * axis[0] / axisLength;\r\n\tvar by = s * axis[1] / axisLength;\r\n\tvar bz = s * axis[2] / axisLength;\r\n\tvar bw = Math.cos(rad);\r\n\tvar ax1 = a[0],\r\n\t\tay1 = a[1],\r\n\t\taz1 = a[2],\r\n\t\taw1 = a[3];\r\n\tout[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n\tout[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n\tout[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n\tout[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\tvar ax = a[4],\r\n\t\tay = a[5],\r\n\t\taz = a[6],\r\n\t\taw = a[7];\r\n\tout[4] = ax * bw + aw * bx + ay * bz - az * by;\r\n\tout[5] = ay * bw + aw * by + az * bx - ax * bz;\r\n\tout[6] = az * bw + aw * bz + ax * by - ay * bx;\r\n\tout[7] = aw * bw - ax * bx - ay * by - az * bz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\tout[4] = a[4] + b[4];\r\n\tout[5] = a[5] + b[5];\r\n\tout[6] = a[6] + b[6];\r\n\tout[7] = a[7] + b[7];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tvar ax0 = a[0],\r\n\t\tay0 = a[1],\r\n\t\taz0 = a[2],\r\n\t\taw0 = a[3],\r\n\t\tbx1 = b[4],\r\n\t\tby1 = b[5],\r\n\t\tbz1 = b[6],\r\n\t\tbw1 = b[7],\r\n\t\tax1 = a[4],\r\n\t\tay1 = a[5],\r\n\t\taz1 = a[6],\r\n\t\taw1 = a[7],\r\n\t\tbx0 = b[0],\r\n\t\tby0 = b[1],\r\n\t\tbz0 = b[2],\r\n\t\tbw0 = b[3];\r\n\tout[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\r\n\tout[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\r\n\tout[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\r\n\tout[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\r\n\tout[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\r\n\tout[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\r\n\tout[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\r\n\tout[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function scale(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\tout[4] = a[4] * b;\r\n\tout[5] = a[5] * b;\r\n\tout[6] = a[6] * b;\r\n\tout[7] = a[7] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\n\r\nexport var dot = quat.dot;\r\n\r\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function lerp(out, a, b, t) {\r\n\tvar mt = 1 - t;\r\n\tif (dot(a, b) < 0) t = -t;\r\n\tout[0] = a[0] * mt + b[0] * t;\r\n\tout[1] = a[1] * mt + b[1] * t;\r\n\tout[2] = a[2] * mt + b[2] * t;\r\n\tout[3] = a[3] * mt + b[3] * t;\r\n\tout[4] = a[4] * mt + b[4] * t;\r\n\tout[5] = a[5] * mt + b[5] * t;\r\n\tout[6] = a[6] * mt + b[6] * t;\r\n\tout[7] = a[7] * mt + b[7] * t;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function invert(out, a) {\r\n\tvar sqlen = squaredLength(a);\r\n\tout[0] = -a[0] / sqlen;\r\n\tout[1] = -a[1] / sqlen;\r\n\tout[2] = -a[2] / sqlen;\r\n\tout[3] = a[3] / sqlen;\r\n\tout[4] = -a[4] / sqlen;\r\n\tout[5] = -a[5] / sqlen;\r\n\tout[6] = -a[6] / sqlen;\r\n\tout[7] = a[7] / sqlen;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\r\n\r\nexport function conjugate(out, a) {\r\n\tout[0] = -a[0];\r\n\tout[1] = -a[1];\r\n\tout[2] = -a[2];\r\n\tout[3] = a[3];\r\n\tout[4] = -a[4];\r\n\tout[5] = -a[5];\r\n\tout[6] = -a[6];\r\n\tout[7] = a[7];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\r\n\r\nexport var length = quat.length;\r\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\r\n\r\nexport var len = length;\r\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\n\r\nexport var squaredLength = quat.squaredLength;\r\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\r\n\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\r\n\r\nexport function normalize(out, a) {\r\n\tvar magnitude = squaredLength(a);\r\n\tif (magnitude > 0) {\r\n\t\tmagnitude = Math.sqrt(magnitude);\r\n\t\tvar a0 = a[0] / magnitude;\r\n\t\tvar a1 = a[1] / magnitude;\r\n\t\tvar a2 = a[2] / magnitude;\r\n\t\tvar a3 = a[3] / magnitude;\r\n\t\tvar b0 = a[4];\r\n\t\tvar b1 = a[5];\r\n\t\tvar b2 = a[6];\r\n\t\tvar b3 = a[7];\r\n\t\tvar a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\r\n\t\tout[0] = a0;\r\n\t\tout[1] = a1;\r\n\t\tout[2] = a2;\r\n\t\tout[3] = a3;\r\n\t\tout[4] = (b0 - a0 * a_dot_b) / magnitude;\r\n\t\tout[5] = (b1 - a1 * a_dot_b) / magnitude;\r\n\t\tout[6] = (b2 - a2 * a_dot_b) / magnitude;\r\n\t\tout[7] = (b3 - a3 * a_dot_b) / magnitude;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a dual quaternion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quaternion.\r\n * @param {ReadonlyQuat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quat.\r\n * @param {ReadonlyQuat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3],\r\n\t\ta4 = a[4],\r\n\t\ta5 = a[5],\r\n\t\ta6 = a[6],\r\n\t\ta7 = a[7];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3],\r\n\t\tb4 = b[4],\r\n\t\tb5 = b[5],\r\n\t\tb6 = b[6],\r\n\t\tb7 = b[7];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\r\n}\r\n","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\r\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(2);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[0] = 0;\r\n\t\tout[1] = 0;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(2);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\r\n\r\nexport function fromValues(x, y) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(2);\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function set(out, x, y) {\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tout[0] = a[0] * b[0];\r\n\tout[1] = a[1] * b[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function divide(out, a, b) {\r\n\tout[0] = a[0] / b[0];\r\n\tout[1] = a[1] / b[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function ceil(out, a) {\r\n\tout[0] = Math.ceil(a[0]);\r\n\tout[1] = Math.ceil(a[1]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function floor(out, a) {\r\n\tout[0] = Math.floor(a[0]);\r\n\tout[1] = Math.floor(a[1]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function min(out, a, b) {\r\n\tout[0] = Math.min(a[0], b[0]);\r\n\tout[1] = Math.min(a[1], b[1]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function max(out, a, b) {\r\n\tout[0] = Math.max(a[0], b[0]);\r\n\tout[1] = Math.max(a[1], b[1]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function round(out, a) {\r\n\tout[0] = Math.round(a[0]);\r\n\tout[1] = Math.round(a[1]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function scale(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\n\r\nexport function distance(a, b) {\r\n\tvar x = b[0] - a[0],\r\n\t\ty = b[1] - a[1];\r\n\treturn Math.hypot(x, y);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\n\r\nexport function squaredDistance(a, b) {\r\n\tvar x = b[0] - a[0],\r\n\t\ty = b[1] - a[1];\r\n\treturn x * x + y * y;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\n\r\nexport function length(a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\treturn Math.hypot(x, y);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\n\r\nexport function squaredLength(a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\treturn x * x + y * y;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function negate(out, a) {\r\n\tout[0] = -a[0];\r\n\tout[1] = -a[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function inverse(out, a) {\r\n\tout[0] = 1.0 / a[0];\r\n\tout[1] = 1.0 / a[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function normalize(out, a) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\tvar len = x * x + y * y;\r\n\tif (len > 0) {\r\n\t\t//TODO: evaluate use of glm_invsqrt here?\r\n\t\tlen = 1 / Math.sqrt(len);\r\n\t}\r\n\tout[0] = a[0] * len;\r\n\tout[1] = a[1] * len;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\n\r\nexport function dot(a, b) {\r\n\treturn a[0] * b[0] + a[1] * b[1];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function cross(out, a, b) {\r\n\tvar z = a[0] * b[1] - a[1] * b[0];\r\n\tout[0] = out[1] = 0;\r\n\tout[2] = z;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function lerp(out, a, b, t) {\r\n\tvar ax = a[0],\r\n\t\tay = a[1];\r\n\tout[0] = ax + t * (b[0] - ax);\r\n\tout[1] = ay + t * (b[1] - ay);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function random(out, scale) {\r\n\tscale = scale === undefined ? 1.0 : scale;\r\n\tvar r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n\tout[0] = Math.cos(r) * scale;\r\n\tout[1] = Math.sin(r) * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function transformMat2(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\tout[0] = m[0] * x + m[2] * y;\r\n\tout[1] = m[1] * x + m[3] * y;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function transformMat2d(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\tout[0] = m[0] * x + m[2] * y + m[4];\r\n\tout[1] = m[1] * x + m[3] * y + m[5];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function transformMat3(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1];\r\n\tout[0] = m[0] * x + m[3] * y + m[6];\r\n\tout[1] = m[1] * x + m[4] * y + m[7];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function transformMat4(out, a, m) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tout[0] = m[0] * x + m[4] * y + m[12];\r\n\tout[1] = m[1] * x + m[5] * y + m[13];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function rotate(out, a, b, rad) {\r\n\t//Translate point to the origin\r\n\tvar p0 = a[0] - b[0],\r\n\t\tp1 = a[1] - b[1],\r\n\t\tsinC = Math.sin(rad),\r\n\t\tcosC = Math.cos(rad); //perform rotation and translate to correct position\r\n\tout[0] = p0 * cosC - p1 * sinC + b[0];\r\n\tout[1] = p0 * sinC + p1 * cosC + b[1];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\n\r\nexport function angle(a, b) {\r\n\tvar x1 = a[0],\r\n\t\ty1 = a[1],\r\n\t\tx2 = b[0],\r\n\t\ty2 = b[1],\r\n\t\t// mag is the product of the magnitudes of a and b\r\n\t\tmag = Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)),\r\n\t\t// mag &&.. short circuits if mag == 0\r\n\t\tcosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\r\n\treturn Math.acos(Math.min(Math.max(cosine, -1), 1));\r\n}\r\n\r\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\r\n\r\nexport function zero(out) {\r\n\tout[0] = 0.0;\r\n\tout[1] = 0.0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"vec2(\" + a[0] + \", \" + a[1] + \")\";\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\r\n\r\nexport var len = length;\r\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;\r\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\r\n\r\nexport var div = divide;\r\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\r\n\r\nexport var dist = distance;\r\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\r\n\r\nexport var sqrDist = squaredDistance;\r\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\r\n\r\nexport var sqrLen = squaredLength;\r\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\n\r\nexport var forEach = function () {\r\n\tvar vec = create();\r\n\treturn function (a, stride, offset, count, fn, arg) {\r\n\t\tvar i, l;\r\n\t\tif (!stride) {\r\n\t\t\tstride = 2;\r\n\t\t}\r\n\t\tif (!offset) {\r\n\t\t\toffset = 0;\r\n\t\t}\r\n\t\tif (count) {\r\n\t\t\tl = Math.min(count * stride + offset, a.length);\r\n\t\t} else {\r\n\t\t\tl = a.length;\r\n\t\t}\r\n\t\tfor (i = offset; i < l; i += stride) {\r\n\t\t\tvec[0] = a[i];\r\n\t\t\tvec[1] = a[i + 1];\r\n\t\t\tfn(vec, vec, arg);\r\n\t\t\ta[i] = vec[0];\r\n\t\t\ta[i + 1] = vec[1];\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n}();","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\r\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(3);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[0] = 0;\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(3);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\n\r\nexport function length(a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\treturn Math.hypot(x, y, z);\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\r\n\r\nexport function fromValues(x, y, z) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(3);\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\tout[2] = z;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function set(out, x, y, z) {\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\tout[2] = z;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tout[0] = a[0] * b[0];\r\n\tout[1] = a[1] * b[1];\r\n\tout[2] = a[2] * b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function divide(out, a, b) {\r\n\tout[0] = a[0] / b[0];\r\n\tout[1] = a[1] / b[1];\r\n\tout[2] = a[2] / b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function ceil(out, a) {\r\n\tout[0] = Math.ceil(a[0]);\r\n\tout[1] = Math.ceil(a[1]);\r\n\tout[2] = Math.ceil(a[2]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function floor(out, a) {\r\n\tout[0] = Math.floor(a[0]);\r\n\tout[1] = Math.floor(a[1]);\r\n\tout[2] = Math.floor(a[2]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function min(out, a, b) {\r\n\tout[0] = Math.min(a[0], b[0]);\r\n\tout[1] = Math.min(a[1], b[1]);\r\n\tout[2] = Math.min(a[2], b[2]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function max(out, a, b) {\r\n\tout[0] = Math.max(a[0], b[0]);\r\n\tout[1] = Math.max(a[1], b[1]);\r\n\tout[2] = Math.max(a[2], b[2]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function round(out, a) {\r\n\tout[0] = Math.round(a[0]);\r\n\tout[1] = Math.round(a[1]);\r\n\tout[2] = Math.round(a[2]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function scale(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\n\r\nexport function distance(a, b) {\r\n\tvar x = b[0] - a[0];\r\n\tvar y = b[1] - a[1];\r\n\tvar z = b[2] - a[2];\r\n\treturn Math.hypot(x, y, z);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\n\r\nexport function squaredDistance(a, b) {\r\n\tvar x = b[0] - a[0];\r\n\tvar y = b[1] - a[1];\r\n\tvar z = b[2] - a[2];\r\n\treturn x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\n\r\nexport function squaredLength(a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\treturn x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function negate(out, a) {\r\n\tout[0] = -a[0];\r\n\tout[1] = -a[1];\r\n\tout[2] = -a[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function inverse(out, a) {\r\n\tout[0] = 1.0 / a[0];\r\n\tout[1] = 1.0 / a[1];\r\n\tout[2] = 1.0 / a[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function normalize(out, a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\tvar len = x * x + y * y + z * z;\r\n\tif (len > 0) {\r\n\t\t//TODO: evaluate use of glm_invsqrt here?\r\n\t\tlen = 1 / Math.sqrt(len);\r\n\t}\r\n\tout[0] = a[0] * len;\r\n\tout[1] = a[1] * len;\r\n\tout[2] = a[2] * len;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\n\r\nexport function dot(a, b) {\r\n\treturn a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function cross(out, a, b) {\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2];\r\n\tvar bx = b[0],\r\n\t\tby = b[1],\r\n\t\tbz = b[2];\r\n\tout[0] = ay * bz - az * by;\r\n\tout[1] = az * bx - ax * bz;\r\n\tout[2] = ax * by - ay * bx;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function lerp(out, a, b, t) {\r\n\tvar ax = a[0];\r\n\tvar ay = a[1];\r\n\tvar az = a[2];\r\n\tout[0] = ax + t * (b[0] - ax);\r\n\tout[1] = ay + t * (b[1] - ay);\r\n\tout[2] = az + t * (b[2] - az);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a spherical linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function slerp(out, a, b, t) {\r\n\tvar angle = Math.acos(Math.min(Math.max(dot(a, b), -1), 1));\r\n\tvar sinTotal = Math.sin(angle);\r\n\tvar ratioA = Math.sin((1 - t) * angle) / sinTotal;\r\n\tvar ratioB = Math.sin(t * angle) / sinTotal;\r\n\tout[0] = ratioA * a[0] + ratioB * b[0];\r\n\tout[1] = ratioA * a[1] + ratioB * b[1];\r\n\tout[2] = ratioA * a[2] + ratioB * b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function hermite(out, a, b, c, d, t) {\r\n\tvar factorTimes2 = t * t;\r\n\tvar factor1 = factorTimes2 * (2 * t - 3) + 1;\r\n\tvar factor2 = factorTimes2 * (t - 2) + t;\r\n\tvar factor3 = factorTimes2 * (t - 1);\r\n\tvar factor4 = factorTimes2 * (3 - 2 * t);\r\n\tout[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n\tout[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n\tout[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function bezier(out, a, b, c, d, t) {\r\n\tvar inverseFactor = 1 - t;\r\n\tvar inverseFactorTimesTwo = inverseFactor * inverseFactor;\r\n\tvar factorTimes2 = t * t;\r\n\tvar factor1 = inverseFactorTimesTwo * inverseFactor;\r\n\tvar factor2 = 3 * t * inverseFactorTimesTwo;\r\n\tvar factor3 = 3 * factorTimes2 * inverseFactor;\r\n\tvar factor4 = factorTimes2 * t;\r\n\tout[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n\tout[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n\tout[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function random(out, scale) {\r\n\tscale = scale === undefined ? 1.0 : scale;\r\n\tvar r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n\tvar z = glMatrix.RANDOM() * 2.0 - 1.0;\r\n\tvar zScale = Math.sqrt(1.0 - z * z) * scale;\r\n\tout[0] = Math.cos(r) * zScale;\r\n\tout[1] = Math.sin(r) * zScale;\r\n\tout[2] = z * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function transformMat4(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2];\r\n\tvar w = m[3] * x + m[7] * y + m[11] * z + m[15];\r\n\tw = w || 1.0;\r\n\tout[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\r\n\tout[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\r\n\tout[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function transformMat3(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2];\r\n\tout[0] = x * m[0] + y * m[3] + z * m[6];\r\n\tout[1] = x * m[1] + y * m[4] + z * m[7];\r\n\tout[2] = x * m[2] + y * m[5] + z * m[8];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function transformQuat(out, a, q) {\r\n\t// benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\r\n\tvar qx = q[0],\r\n\t\tqy = q[1],\r\n\t\tqz = q[2],\r\n\t\tqw = q[3];\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2]; // var qvec = [qx, qy, qz];\r\n\t// var uv = vec3.cross([], qvec, a);\r\n\tvar uvx = qy * z - qz * y,\r\n\t\tuvy = qz * x - qx * z,\r\n\t\tuvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\r\n\tvar uuvx = qy * uvz - qz * uvy,\r\n\t\tuuvy = qz * uvx - qx * uvz,\r\n\t\tuuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\r\n\tvar w2 = qw * 2;\r\n\tuvx *= w2;\r\n\tuvy *= w2;\r\n\tuvz *= w2; // vec3.scale(uuv, uuv, 2);\r\n\tuuvx *= 2;\r\n\tuuvy *= 2;\r\n\tuuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\r\n\tout[0] = x + uvx + uuvx;\r\n\tout[1] = y + uvy + uuvy;\r\n\tout[2] = z + uvz + uuvz;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function rotateX(out, a, b, rad) {\r\n\tvar p = [],\r\n\t\tr = []; //Translate point to the origin\r\n\tp[0] = a[0] - b[0];\r\n\tp[1] = a[1] - b[1];\r\n\tp[2] = a[2] - b[2]; //perform rotation\r\n\tr[0] = p[0];\r\n\tr[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\r\n\tr[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\r\n\tout[0] = r[0] + b[0];\r\n\tout[1] = r[1] + b[1];\r\n\tout[2] = r[2] + b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function rotateY(out, a, b, rad) {\r\n\tvar p = [],\r\n\t\tr = []; //Translate point to the origin\r\n\tp[0] = a[0] - b[0];\r\n\tp[1] = a[1] - b[1];\r\n\tp[2] = a[2] - b[2]; //perform rotation\r\n\tr[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\r\n\tr[1] = p[1];\r\n\tr[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\r\n\tout[0] = r[0] + b[0];\r\n\tout[1] = r[1] + b[1];\r\n\tout[2] = r[2] + b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function rotateZ(out, a, b, rad) {\r\n\tvar p = [],\r\n\t\tr = []; //Translate point to the origin\r\n\tp[0] = a[0] - b[0];\r\n\tp[1] = a[1] - b[1];\r\n\tp[2] = a[2] - b[2]; //perform rotation\r\n\tr[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\r\n\tr[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\r\n\tr[2] = p[2]; //translate to correct position\r\n\tout[0] = r[0] + b[0];\r\n\tout[1] = r[1] + b[1];\r\n\tout[2] = r[2] + b[2];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\n\r\nexport function angle(a, b) {\r\n\tvar ax = a[0],\r\n\t\tay = a[1],\r\n\t\taz = a[2],\r\n\t\tbx = b[0],\r\n\t\tby = b[1],\r\n\t\tbz = b[2],\r\n\t\tmag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz)),\r\n\t\tcosine = mag && dot(a, b) / mag;\r\n\treturn Math.acos(Math.min(Math.max(cosine, -1), 1));\r\n}\r\n\r\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\r\n\r\nexport function zero(out) {\r\n\tout[0] = 0.0;\r\n\tout[1] = 0.0;\r\n\tout[2] = 0.0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;\r\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\r\n\r\nexport var div = divide;\r\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\r\n\r\nexport var dist = distance;\r\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\r\n\r\nexport var sqrDist = squaredDistance;\r\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\r\n\r\nexport var len = length;\r\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\r\n\r\nexport var sqrLen = squaredLength;\r\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\n\r\nexport var forEach = function () {\r\n\tvar vec = create();\r\n\treturn function (a, stride, offset, count, fn, arg) {\r\n\t\tvar i, l;\r\n\t\tif (!stride) {\r\n\t\t\tstride = 3;\r\n\t\t}\r\n\t\tif (!offset) {\r\n\t\t\toffset = 0;\r\n\t\t}\r\n\t\tif (count) {\r\n\t\t\tl = Math.min(count * stride + offset, a.length);\r\n\t\t} else {\r\n\t\t\tl = a.length;\r\n\t\t}\r\n\t\tfor (i = offset; i < l; i += stride) {\r\n\t\t\tvec[0] = a[i];\r\n\t\t\tvec[1] = a[i + 1];\r\n\t\t\tvec[2] = a[i + 2];\r\n\t\t\tfn(vec, vec, arg);\r\n\t\t\ta[i] = vec[0];\r\n\t\t\ta[i + 1] = vec[1];\r\n\t\t\ta[i + 2] = vec[2];\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n}();","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\r\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\r\n\r\nexport function create() {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tif (glMatrix.ARRAY_TYPE != Float32Array) {\r\n\t\tout[0] = 0;\r\n\t\tout[1] = 0;\r\n\t\tout[2] = 0;\r\n\t\tout[3] = 0;\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\r\n\r\nexport function clone(a) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\r\n\r\nexport function fromValues(x, y, z, w) {\r\n\tvar out = new glMatrix.ARRAY_TYPE(4);\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\tout[2] = z;\r\n\tout[3] = w;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function copy(out, a) {\r\n\tout[0] = a[0];\r\n\tout[1] = a[1];\r\n\tout[2] = a[2];\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function set(out, x, y, z, w) {\r\n\tout[0] = x;\r\n\tout[1] = y;\r\n\tout[2] = z;\r\n\tout[3] = w;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function add(out, a, b) {\r\n\tout[0] = a[0] + b[0];\r\n\tout[1] = a[1] + b[1];\r\n\tout[2] = a[2] + b[2];\r\n\tout[3] = a[3] + b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function subtract(out, a, b) {\r\n\tout[0] = a[0] - b[0];\r\n\tout[1] = a[1] - b[1];\r\n\tout[2] = a[2] - b[2];\r\n\tout[3] = a[3] - b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function multiply(out, a, b) {\r\n\tout[0] = a[0] * b[0];\r\n\tout[1] = a[1] * b[1];\r\n\tout[2] = a[2] * b[2];\r\n\tout[3] = a[3] * b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function divide(out, a, b) {\r\n\tout[0] = a[0] / b[0];\r\n\tout[1] = a[1] / b[1];\r\n\tout[2] = a[2] / b[2];\r\n\tout[3] = a[3] / b[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function ceil(out, a) {\r\n\tout[0] = Math.ceil(a[0]);\r\n\tout[1] = Math.ceil(a[1]);\r\n\tout[2] = Math.ceil(a[2]);\r\n\tout[3] = Math.ceil(a[3]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function floor(out, a) {\r\n\tout[0] = Math.floor(a[0]);\r\n\tout[1] = Math.floor(a[1]);\r\n\tout[2] = Math.floor(a[2]);\r\n\tout[3] = Math.floor(a[3]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function min(out, a, b) {\r\n\tout[0] = Math.min(a[0], b[0]);\r\n\tout[1] = Math.min(a[1], b[1]);\r\n\tout[2] = Math.min(a[2], b[2]);\r\n\tout[3] = Math.min(a[3], b[3]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function max(out, a, b) {\r\n\tout[0] = Math.max(a[0], b[0]);\r\n\tout[1] = Math.max(a[1], b[1]);\r\n\tout[2] = Math.max(a[2], b[2]);\r\n\tout[3] = Math.max(a[3], b[3]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function round(out, a) {\r\n\tout[0] = Math.round(a[0]);\r\n\tout[1] = Math.round(a[1]);\r\n\tout[2] = Math.round(a[2]);\r\n\tout[3] = Math.round(a[3]);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function scale(out, a, b) {\r\n\tout[0] = a[0] * b;\r\n\tout[1] = a[1] * b;\r\n\tout[2] = a[2] * b;\r\n\tout[3] = a[3] * b;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n\tout[0] = a[0] + b[0] * scale;\r\n\tout[1] = a[1] + b[1] * scale;\r\n\tout[2] = a[2] + b[2] * scale;\r\n\tout[3] = a[3] + b[3] * scale;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\n\r\nexport function distance(a, b) {\r\n\tvar x = b[0] - a[0];\r\n\tvar y = b[1] - a[1];\r\n\tvar z = b[2] - a[2];\r\n\tvar w = b[3] - a[3];\r\n\treturn Math.hypot(x, y, z, w);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\n\r\nexport function squaredDistance(a, b) {\r\n\tvar x = b[0] - a[0];\r\n\tvar y = b[1] - a[1];\r\n\tvar z = b[2] - a[2];\r\n\tvar w = b[3] - a[3];\r\n\treturn x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\n\r\nexport function length(a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\tvar w = a[3];\r\n\treturn Math.hypot(x, y, z, w);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\n\r\nexport function squaredLength(a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\tvar w = a[3];\r\n\treturn x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function negate(out, a) {\r\n\tout[0] = -a[0];\r\n\tout[1] = -a[1];\r\n\tout[2] = -a[2];\r\n\tout[3] = -a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function inverse(out, a) {\r\n\tout[0] = 1.0 / a[0];\r\n\tout[1] = 1.0 / a[1];\r\n\tout[2] = 1.0 / a[2];\r\n\tout[3] = 1.0 / a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function normalize(out, a) {\r\n\tvar x = a[0];\r\n\tvar y = a[1];\r\n\tvar z = a[2];\r\n\tvar w = a[3];\r\n\tvar len = x * x + y * y + z * z + w * w;\r\n\tif (len > 0) {\r\n\t\tlen = 1 / Math.sqrt(len);\r\n\t}\r\n\tout[0] = x * len;\r\n\tout[1] = y * len;\r\n\tout[2] = z * len;\r\n\tout[3] = w * len;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\n\r\nexport function dot(a, b) {\r\n\treturn a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\r\n}\r\n\r\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\r\n\r\nexport function cross(out, u, v, w) {\r\n\tvar A = v[0] * w[1] - v[1] * w[0],\r\n\t\tB = v[0] * w[2] - v[2] * w[0],\r\n\t\tC = v[0] * w[3] - v[3] * w[0],\r\n\t\tD = v[1] * w[2] - v[2] * w[1],\r\n\t\tE = v[1] * w[3] - v[3] * w[1],\r\n\t\tF = v[2] * w[3] - v[3] * w[2];\r\n\tvar G = u[0];\r\n\tvar H = u[1];\r\n\tvar I = u[2];\r\n\tvar J = u[3];\r\n\tout[0] = H * F - I * E + J * D;\r\n\tout[1] = -(G * F) + I * C - J * B;\r\n\tout[2] = G * E - H * C + J * A;\r\n\tout[3] = -(G * D) + H * B - I * A;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function lerp(out, a, b, t) {\r\n\tvar ax = a[0];\r\n\tvar ay = a[1];\r\n\tvar az = a[2];\r\n\tvar aw = a[3];\r\n\tout[0] = ax + t * (b[0] - ax);\r\n\tout[1] = ay + t * (b[1] - ay);\r\n\tout[2] = az + t * (b[2] - az);\r\n\tout[3] = aw + t * (b[3] - aw);\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function random(out, scale) {\r\n\tscale = scale === undefined ? 1.0 : scale; // Marsaglia, George. Choosing a Point from the Surface of a\r\n\t// Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\r\n\t// http://projecteuclid.org/euclid.aoms/1177692644;\r\n\tvar v1, v2, v3, v4;\r\n\tvar s1, s2;\r\n\tdo {\r\n\t\tv1 = glMatrix.RANDOM() * 2 - 1;\r\n\t\tv2 = glMatrix.RANDOM() * 2 - 1;\r\n\t\ts1 = v1 * v1 + v2 * v2;\r\n\t} while (s1 >= 1);\r\n\tdo {\r\n\t\tv3 = glMatrix.RANDOM() * 2 - 1;\r\n\t\tv4 = glMatrix.RANDOM() * 2 - 1;\r\n\t\ts2 = v3 * v3 + v4 * v4;\r\n\t} while (s2 >= 1);\r\n\tvar d = Math.sqrt((1 - s1) / s2);\r\n\tout[0] = scale * v1;\r\n\tout[1] = scale * v2;\r\n\tout[2] = scale * v3 * d;\r\n\tout[3] = scale * v4 * d;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function transformMat4(out, a, m) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2],\r\n\t\tw = a[3];\r\n\tout[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\r\n\tout[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\r\n\tout[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\r\n\tout[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function transformQuat(out, a, q) {\r\n\tvar x = a[0],\r\n\t\ty = a[1],\r\n\t\tz = a[2];\r\n\tvar qx = q[0],\r\n\t\tqy = q[1],\r\n\t\tqz = q[2],\r\n\t\tqw = q[3]; // calculate quat * vec\r\n\tvar ix = qw * x + qy * z - qz * y;\r\n\tvar iy = qw * y + qz * x - qx * z;\r\n\tvar iz = qw * z + qx * y - qy * x;\r\n\tvar iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\r\n\tout[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n\tout[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n\tout[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n\tout[3] = a[3];\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\r\n\r\nexport function zero(out) {\r\n\tout[0] = 0.0;\r\n\tout[1] = 0.0;\r\n\tout[2] = 0.0;\r\n\tout[3] = 0.0;\r\n\treturn out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\n\r\nexport function str(a) {\r\n\treturn \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function exactEquals(a, b) {\r\n\treturn a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\n\r\nexport function equals(a, b) {\r\n\tvar a0 = a[0],\r\n\t\ta1 = a[1],\r\n\t\ta2 = a[2],\r\n\t\ta3 = a[3];\r\n\tvar b0 = b[0],\r\n\t\tb1 = b[1],\r\n\t\tb2 = b[2],\r\n\t\tb3 = b[3];\r\n\treturn Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\r\n\r\nexport var sub = subtract;\r\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\r\n\r\nexport var mul = multiply;\r\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\r\n\r\nexport var div = divide;\r\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\r\n\r\nexport var dist = distance;\r\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\r\n\r\nexport var sqrDist = squaredDistance;\r\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\r\n\r\nexport var len = length;\r\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\r\n\r\nexport var sqrLen = squaredLength;\r\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\n\r\nexport var forEach = function () {\r\n\tvar vec = create();\r\n\treturn function (a, stride, offset, count, fn, arg) {\r\n\t\tvar i, l;\r\n\t\tif (!stride) {\r\n\t\t\tstride = 4;\r\n\t\t}\r\n\t\tif (!offset) {\r\n\t\t\toffset = 0;\r\n\t\t}\r\n\t\tif (count) {\r\n\t\t\tl = Math.min(count * stride + offset, a.length);\r\n\t\t} else {\r\n\t\t\tl = a.length;\r\n\t\t}\r\n\t\tfor (i = offset; i < l; i += stride) {\r\n\t\t\tvec[0] = a[i];\r\n\t\t\tvec[1] = a[i + 1];\r\n\t\t\tvec[2] = a[i + 2];\r\n\t\t\tvec[3] = a[i + 3];\r\n\t\t\tfn(vec, vec, arg);\r\n\t\t\ta[i] = vec[0];\r\n\t\t\ta[i + 1] = vec[1];\r\n\t\t\ta[i + 2] = vec[2];\r\n\t\t\ta[i + 3] = vec[3];\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n}();","import computeViewFrustumPlanes from \"./computeViewFrustumPlanes\";\r\nimport getConstructorName from \"./getConstructorName\";\r\n\r\nexport * from \"./errorFunc\";\r\nexport * from \"./color\";\r\nexport {\r\n\tgetConstructorName,\r\n\tcomputeViewFrustumPlanes\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { RedGPUContext } from \"./context\";\r\nexport * from \"./systemShaderDefine\";\r\nexport * from \"./context\";\r\nexport * from \"./main/view\";\r\nexport * from \"./postEffect\";\r\nexport * from \"./main/render\";\r\nexport * from \"./main/scene\";\r\nexport * from \"./camera\";\r\nexport * from \"./light\";\r\nexport * from \"./light/pointLightCluster\";\r\nexport * from \"./util\";\r\nexport * from \"./util/gl-matrix\";\r\nexport * from \"./material\";\r\nexport * from \"./object3d\";\r\nexport * from \"./resource/buffers\";\r\nexport * from \"./resource/geometry\";\r\nexport * from \"./resource/texture\";\r\nexport * from \"./temp/qurd/Quad\";\r\nconst BASE_OPTION = {\r\n    powerPreference: \"high-performance\",\r\n    forceFallbackAdapter: false\r\n};\r\nconst BASE_REQUIRED_FEATURES = {};\r\n/**\r\n * test232\r\n * RedGPU initialization function.\r\n * @param {HTMLCanvasElement} canvas\r\n * @param label\r\n * @param {GPUCanvasAlphaMode=} alphaMode  알파모드 설정\r\n * @param {GPURequestAdapterOptions=} requestAdapterOptions\r\n * @param {Function=} HD_destroy GPUDevice가 lost 될 경우 발동할 핸들러\r\n *\r\n * @example\r\n * RedGPU.initialize(HTMLCanvasElement instance).then(\r\n *  (redGPUContext)=>{\r\n *     console.log(redGPUContext) // success!\r\n *  }\r\n * )\r\n */\r\nconst init = (canvas, label, alphaMode = 'premultiplied', requestAdapterOptions = BASE_OPTION, HD_destroy) => {\r\n    alphaMode = alphaMode || 'premultiplied';\r\n    return new Promise(async (resolve, reject) => {\r\n        let errorInfo;\r\n        const checkCanvas = canvas => canvas instanceof HTMLCanvasElement;\r\n        const checkAdapter = gpu => {\r\n            gpu.requestAdapter(requestAdapterOptions)\r\n                .then(checkDevice)\r\n                .catch(e => {\r\n                errorInfo = { successYn: false, reason: e };\r\n                reject(errorInfo);\r\n            });\r\n        };\r\n        const checkDevice = adapter => {\r\n            const gpuDeviceDescriptor = {\r\n                ...BASE_REQUIRED_FEATURES,\r\n                label: label || `gpuDevice : Label input is recommended.`\r\n            };\r\n            adapter.requestDevice(gpuDeviceDescriptor)\r\n                .then(device => {\r\n                console.log('device', device);\r\n                checkContext(canvas, adapter, device);\r\n                device.addEventListener('uncapturederror', (event) => {\r\n                    // TODO uncapturederror 보강처리\r\n                    // Re-surface the error, because adding an event listener may silence console logs.\r\n                    console.error('TODO A WebGPU error was not captured:', event.error);\r\n                });\r\n                device.lost.then(v => {\r\n                    console.log('GPUDevice Lost', v);\r\n                    device.destroy();\r\n                    HD_destroy?.(v);\r\n                });\r\n            })\r\n                .catch(e => {\r\n                errorInfo = { successYn: false, reason: e };\r\n                reject(errorInfo);\r\n                throw errorInfo;\r\n            });\r\n        };\r\n        const checkContext = (canvas, adapter, device) => {\r\n            const context = canvas.getContext('webgpu');\r\n            if (context)\r\n                resolve(new RedGPUContext(canvas, adapter, device, context, alphaMode));\r\n            else {\r\n                errorInfo = { successYn: false, reason: 'canvas.getContext(\\'webgpu\\') is null' };\r\n                reject(errorInfo);\r\n            }\r\n        };\r\n        const { gpu } = navigator;\r\n        if (checkCanvas(canvas)) {\r\n            if (gpu)\r\n                checkAdapter(gpu);\r\n            else {\r\n                errorInfo = {\r\n                    successYn: false,\r\n                    reason: 'Cannot find navigator.gpu.'\r\n                };\r\n                reject(errorInfo);\r\n            }\r\n        }\r\n        else {\r\n            errorInfo = {\r\n                successYn: false,\r\n                reason: 'canvas is not HTMLCanvasElement '\r\n            };\r\n            reject(errorInfo);\r\n        }\r\n    });\r\n};\r\nexport { init };\r\n"],"names":[],"sourceRoot":""}